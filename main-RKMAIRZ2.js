import"./chunk-X6YHEMIY.js";import"./chunk-JIMCF4Q3.js";import{e as LC,h as UC}from"./chunk-TDYF2ULQ.js";import{a as D,b as J,c as mc,e as ar,f as PC,g as $n,h as FC,i as vc,j as T}from"./chunk-BHCM4M3W.js";var jS=PC((pC,gC)=>{"use strict";(function(n,e){typeof define=="function"&&define.amd?define([],e):typeof pC<"u"?e():(e(),n.FileSaver={})})(pC,function(){"use strict";function n(a,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function e(a,c,l){var u=new XMLHttpRequest;u.open("GET",a),u.responseType="blob",u.onload=function(){s(u.response,c,l)},u.onerror=function(){console.error("could not download file")},u.send()}function t(a){var c=new XMLHttpRequest;c.open("HEAD",a,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function r(a){try{a.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(c)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,i=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(a,c,l){var u=o.URL||o.webkitURL,d=document.createElement("a");c=c||a.name||"download",d.download=c,d.rel="noopener",typeof a=="string"?(d.href=a,d.origin===location.origin?r(d):t(d.href)?e(a,c,l):r(d,d.target="_blank")):(d.href=u.createObjectURL(a),setTimeout(function(){u.revokeObjectURL(d.href)},4e4),setTimeout(function(){r(d)},0))}:"msSaveOrOpenBlob"in navigator?function(a,c,l){if(c=c||a.name||"download",typeof a!="string")navigator.msSaveOrOpenBlob(n(a,l),c);else if(t(a))e(a,c,l);else{var u=document.createElement("a");u.href=a,u.target="_blank",setTimeout(function(){r(u)})}}:function(a,c,l,u){if(u=u||open("","_blank"),u&&(u.document.title=u.document.body.innerText="downloading..."),typeof a=="string")return e(a,c,l);var d=a.type==="application/octet-stream",p=/constructor/i.test(o.HTMLElement)||o.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||d&&p||i)&&typeof FileReader<"u"){var m=new FileReader;m.onloadend=function(){var w=m.result;w=h?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),u?u.location.href=w:location=w,u=null},m.readAsDataURL(a)}else{var g=o.URL||o.webkitURL,y=g.createObjectURL(a);u?u.location=y:location.href=y,u=null,setTimeout(function(){g.revokeObjectURL(y)},4e4)}});o.saveAs=s.saveAs=s,typeof gC<"u"&&(gC.exports=s)})});var $S=PC((zS,mC)=>{"use strict";(function(n){typeof zS=="object"&&typeof mC<"u"?mC.exports=n():typeof define=="function"&&define.amd?define([],n):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).JSZip=n()})(function(){return function n(e,t,r){function o(a,c){if(!t[a]){if(!e[a]){var l=typeof mc=="function"&&mc;if(!c&&l)return l(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=t[a]={exports:{}};e[a][0].call(d.exports,function(p){var h=e[a][1][p];return o(h||p)},d,d.exports,n,e,t,r)}return t[a].exports}for(var i=typeof mc=="function"&&mc,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(n,e,t){"use strict";var r=n("./utils"),o=n("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.encode=function(s){for(var a,c,l,u,d,p,h,m=[],g=0,y=s.length,w=y,S=r.getTypeOf(s)!=="string";g<s.length;)w=y-g,l=S?(a=s[g++],c=g<y?s[g++]:0,g<y?s[g++]:0):(a=s.charCodeAt(g++),c=g<y?s.charCodeAt(g++):0,g<y?s.charCodeAt(g++):0),u=a>>2,d=(3&a)<<4|c>>4,p=1<w?(15&c)<<2|l>>6:64,h=2<w?63&l:64,m.push(i.charAt(u)+i.charAt(d)+i.charAt(p)+i.charAt(h));return m.join("")},t.decode=function(s){var a,c,l,u,d,p,h=0,m=0,g="data:";if(s.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var y,w=3*(s=s.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(s.charAt(s.length-1)===i.charAt(64)&&w--,s.charAt(s.length-2)===i.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=o.uint8array?new Uint8Array(0|w):new Array(0|w);h<s.length;)a=i.indexOf(s.charAt(h++))<<2|(u=i.indexOf(s.charAt(h++)))>>4,c=(15&u)<<4|(d=i.indexOf(s.charAt(h++)))>>2,l=(3&d)<<6|(p=i.indexOf(s.charAt(h++))),y[m++]=a,d!==64&&(y[m++]=c),p!==64&&(y[m++]=l);return y}},{"./support":30,"./utils":32}],2:[function(n,e,t){"use strict";var r=n("./external"),o=n("./stream/DataWorker"),i=n("./stream/Crc32Probe"),s=n("./stream/DataLengthProbe");function a(c,l,u,d,p){this.compressedSize=c,this.uncompressedSize=l,this.crc32=u,this.compression=d,this.compressedContent=p}a.prototype={getContentWorker:function(){var c=new o(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),l=this;return c.on("end",function(){if(this.streamInfo.data_length!==l.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new o(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(c,l,u){return c.pipe(new i).pipe(new s("uncompressedSize")).pipe(l.compressWorker(u)).pipe(new s("compressedSize")).withStreamInfo("compression",l)},e.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,e,t){"use strict";var r=n("./stream/GenericWorker");t.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},t.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,e,t){"use strict";var r=n("./utils"),o=function(){for(var i,s=[],a=0;a<256;a++){i=a;for(var c=0;c<8;c++)i=1&i?3988292384^i>>>1:i>>>1;s[a]=i}return s}();e.exports=function(i,s){return i!==void 0&&i.length?r.getTypeOf(i)!=="string"?function(a,c,l,u){var d=o,p=u+l;a^=-1;for(var h=u;h<p;h++)a=a>>>8^d[255&(a^c[h])];return-1^a}(0|s,i,i.length,0):function(a,c,l,u){var d=o,p=u+l;a^=-1;for(var h=u;h<p;h++)a=a>>>8^d[255&(a^c.charCodeAt(h))];return-1^a}(0|s,i,i.length,0):0}},{"./utils":32}],5:[function(n,e,t){"use strict";t.base64=!1,t.binary=!1,t.dir=!1,t.createFolders=!0,t.date=null,t.compression=null,t.compressionOptions=null,t.comment=null,t.unixPermissions=null,t.dosPermissions=null},{}],6:[function(n,e,t){"use strict";var r=null;r=typeof Promise<"u"?Promise:n("lie"),e.exports={Promise:r}},{lie:37}],7:[function(n,e,t){"use strict";var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),i=n("./utils"),s=n("./stream/GenericWorker"),a=r?"uint8array":"array";function c(l,u){s.call(this,"FlateWorker/"+l),this._pako=null,this._pakoAction=l,this._pakoOptions=u,this.meta={}}t.magic="\b\0",i.inherits(c,s),c.prototype.processChunk=function(l){this.meta=l.meta,this._pako===null&&this._createPako(),this._pako.push(i.transformTo(a,l.data),!1)},c.prototype.flush=function(){s.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var l=this;this._pako.onData=function(u){l.push({data:u,meta:l.meta})}},t.compressWorker=function(l){return new c("Deflate",l)},t.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,e,t){"use strict";function r(d,p){var h,m="";for(h=0;h<p;h++)m+=String.fromCharCode(255&d),d>>>=8;return m}function o(d,p,h,m,g,y){var w,S,b=d.file,F=d.compression,N=y!==a.utf8encode,V=i.transformTo("string",y(b.name)),O=i.transformTo("string",a.utf8encode(b.name)),W=b.comment,fe=i.transformTo("string",y(W)),I=i.transformTo("string",a.utf8encode(W)),U=O.length!==b.name.length,v=I.length!==W.length,z="",Ie="",q="",ke=b.dir,K=b.date,ye={crc32:0,compressedSize:0,uncompressedSize:0};p&&!h||(ye.crc32=d.crc32,ye.compressedSize=d.compressedSize,ye.uncompressedSize=d.uncompressedSize);var x=0;p&&(x|=8),N||!U&&!v||(x|=2048);var k=0,pe=0;ke&&(k|=16),g==="UNIX"?(pe=798,k|=function(ee,ut){var jt=ee;return ee||(jt=ut?16893:33204),(65535&jt)<<16}(b.unixPermissions,ke)):(pe=20,k|=function(ee){return 63&(ee||0)}(b.dosPermissions)),w=K.getUTCHours(),w<<=6,w|=K.getUTCMinutes(),w<<=5,w|=K.getUTCSeconds()/2,S=K.getUTCFullYear()-1980,S<<=4,S|=K.getUTCMonth()+1,S<<=5,S|=K.getUTCDate(),U&&(Ie=r(1,1)+r(c(V),4)+O,z+="up"+r(Ie.length,2)+Ie),v&&(q=r(1,1)+r(c(fe),4)+I,z+="uc"+r(q.length,2)+q);var ae="";return ae+=`
\0`,ae+=r(x,2),ae+=F.magic,ae+=r(w,2),ae+=r(S,2),ae+=r(ye.crc32,4),ae+=r(ye.compressedSize,4),ae+=r(ye.uncompressedSize,4),ae+=r(V.length,2),ae+=r(z.length,2),{fileRecord:l.LOCAL_FILE_HEADER+ae+V+z,dirRecord:l.CENTRAL_FILE_HEADER+r(pe,2)+ae+r(fe.length,2)+"\0\0\0\0"+r(k,4)+r(m,4)+V+z+fe}}var i=n("../utils"),s=n("../stream/GenericWorker"),a=n("../utf8"),c=n("../crc32"),l=n("../signature");function u(d,p,h,m){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=h,this.encodeFileName=m,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(u,s),u.prototype.push=function(d){var p=d.meta.percent||0,h=this.entriesCount,m=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,s.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:h?(p+100*(h-m-1))/h:100}}))},u.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var p=this.streamFiles&&!d.file.dir;if(p){var h=o(d,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:h.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(d){this.accumulate=!1;var p=this.streamFiles&&!d.file.dir,h=o(d,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(h.dirRecord),p)this.push({data:function(m){return l.DATA_DESCRIPTOR+r(m.crc32,4)+r(m.compressedSize,4)+r(m.uncompressedSize,4)}(d),meta:{percent:100}});else for(this.push({data:h.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var d=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var h=this.bytesWritten-d,m=function(g,y,w,S,b){var F=i.transformTo("string",b(S));return l.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(g,2)+r(g,2)+r(y,4)+r(w,4)+r(F.length,2)+F}(this.dirRecords.length,h,d,this.zipComment,this.encodeFileName);this.push({data:m,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(d){this._sources.push(d);var p=this;return d.on("data",function(h){p.processChunk(h)}),d.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),d.on("error",function(h){p.error(h)}),this},u.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(d){var p=this._sources;if(!s.prototype.error.call(this,d))return!1;for(var h=0;h<p.length;h++)try{p[h].error(d)}catch{}return!0},u.prototype.lock=function(){s.prototype.lock.call(this);for(var d=this._sources,p=0;p<d.length;p++)d[p].lock()},e.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,e,t){"use strict";var r=n("../compressions"),o=n("./ZipFileWorker");t.generateWorker=function(i,s,a){var c=new o(s.streamFiles,a,s.platform,s.encodeFileName),l=0;try{i.forEach(function(u,d){l++;var p=function(y,w){var S=y||w,b=r[S];if(!b)throw new Error(S+" is not a valid compression method !");return b}(d.options.compression,s.compression),h=d.options.compressionOptions||s.compressionOptions||{},m=d.dir,g=d.date;d._compressWorker(p,h).withStreamInfo("file",{name:u,dir:m,date:g,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(c)}),c.entriesCount=l}catch(u){c.error(u)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,e,t){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new r;for(var i in this)typeof this[i]!="function"&&(o[i]=this[i]);return o}}(r.prototype=n("./object")).loadAsync=n("./load"),r.support=n("./support"),r.defaults=n("./defaults"),r.version="3.10.1",r.loadAsync=function(o,i){return new r().loadAsync(o,i)},r.external=n("./external"),e.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,e,t){"use strict";var r=n("./utils"),o=n("./external"),i=n("./utf8"),s=n("./zipEntries"),a=n("./stream/Crc32Probe"),c=n("./nodejsUtils");function l(u){return new o.Promise(function(d,p){var h=u.decompressed.getContentWorker().pipe(new a);h.on("error",function(m){p(m)}).on("end",function(){h.streamInfo.crc32!==u.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}e.exports=function(u,d){var p=this;return d=r.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),c.isNode&&c.isStream(u)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",u,!0,d.optimizedBinaryString,d.base64).then(function(h){var m=new s(d);return m.load(h),m}).then(function(h){var m=[o.Promise.resolve(h)],g=h.files;if(d.checkCRC32)for(var y=0;y<g.length;y++)m.push(l(g[y]));return o.Promise.all(m)}).then(function(h){for(var m=h.shift(),g=m.files,y=0;y<g.length;y++){var w=g[y],S=w.fileNameStr,b=r.resolve(w.fileNameStr);p.file(b,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:d.createFolders}),w.dir||(p.file(b).unsafeOriginalName=S)}return m.zipComment.length&&(p.comment=m.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,e,t){"use strict";var r=n("../utils"),o=n("../stream/GenericWorker");function i(s,a){o.call(this,"Nodejs stream input adapter for "+s),this._upstreamEnded=!1,this._bindStream(a)}r.inherits(i,o),i.prototype._bindStream=function(s){var a=this;(this._stream=s).pause(),s.on("data",function(c){a.push({data:c,meta:{percent:0}})}).on("error",function(c){a.isPaused?this.generatedError=c:a.error(c)}).on("end",function(){a.isPaused?a._upstreamEnded=!0:a.end()})},i.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,e,t){"use strict";var r=n("readable-stream").Readable;function o(i,s,a){r.call(this,s),this._helper=i;var c=this;i.on("data",function(l,u){c.push(l)||c._helper.pause(),a&&a(u)}).on("error",function(l){c.emit("error",l)}).on("end",function(){c.push(null)})}n("../utils").inherits(o,r),o.prototype._read=function(){this._helper.resume()},e.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,e,t){"use strict";e.exports={isNode:typeof Buffer<"u",newBufferFrom:function(r,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,o);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,o)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var o=new Buffer(r);return o.fill(0),o},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(n,e,t){"use strict";function r(b,F,N){var V,O=i.getTypeOf(F),W=i.extend(N||{},c);W.date=W.date||new Date,W.compression!==null&&(W.compression=W.compression.toUpperCase()),typeof W.unixPermissions=="string"&&(W.unixPermissions=parseInt(W.unixPermissions,8)),W.unixPermissions&&16384&W.unixPermissions&&(W.dir=!0),W.dosPermissions&&16&W.dosPermissions&&(W.dir=!0),W.dir&&(b=g(b)),W.createFolders&&(V=m(b))&&y.call(this,V,!0);var fe=O==="string"&&W.binary===!1&&W.base64===!1;N&&N.binary!==void 0||(W.binary=!fe),(F instanceof l&&F.uncompressedSize===0||W.dir||!F||F.length===0)&&(W.base64=!1,W.binary=!0,F="",W.compression="STORE",O="string");var I=null;I=F instanceof l||F instanceof s?F:p.isNode&&p.isStream(F)?new h(b,F):i.prepareContent(b,F,W.binary,W.optimizedBinaryString,W.base64);var U=new u(b,I,W);this.files[b]=U}var o=n("./utf8"),i=n("./utils"),s=n("./stream/GenericWorker"),a=n("./stream/StreamHelper"),c=n("./defaults"),l=n("./compressedObject"),u=n("./zipObject"),d=n("./generate"),p=n("./nodejsUtils"),h=n("./nodejs/NodejsStreamInputAdapter"),m=function(b){b.slice(-1)==="/"&&(b=b.substring(0,b.length-1));var F=b.lastIndexOf("/");return 0<F?b.substring(0,F):""},g=function(b){return b.slice(-1)!=="/"&&(b+="/"),b},y=function(b,F){return F=F!==void 0?F:c.createFolders,b=g(b),this.files[b]||r.call(this,b,null,{dir:!0,createFolders:F}),this.files[b]};function w(b){return Object.prototype.toString.call(b)==="[object RegExp]"}var S={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(b){var F,N,V;for(F in this.files)V=this.files[F],(N=F.slice(this.root.length,F.length))&&F.slice(0,this.root.length)===this.root&&b(N,V)},filter:function(b){var F=[];return this.forEach(function(N,V){b(N,V)&&F.push(V)}),F},file:function(b,F,N){if(arguments.length!==1)return b=this.root+b,r.call(this,b,F,N),this;if(w(b)){var V=b;return this.filter(function(W,fe){return!fe.dir&&V.test(W)})}var O=this.files[this.root+b];return O&&!O.dir?O:null},folder:function(b){if(!b)return this;if(w(b))return this.filter(function(O,W){return W.dir&&b.test(O)});var F=this.root+b,N=y.call(this,F),V=this.clone();return V.root=N.name,V},remove:function(b){b=this.root+b;var F=this.files[b];if(F||(b.slice(-1)!=="/"&&(b+="/"),F=this.files[b]),F&&!F.dir)delete this.files[b];else for(var N=this.filter(function(O,W){return W.name.slice(0,b.length)===b}),V=0;V<N.length;V++)delete this.files[N[V].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(b){var F,N={};try{if((N=i.extend(b||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=N.type.toLowerCase(),N.compression=N.compression.toUpperCase(),N.type==="binarystring"&&(N.type="string"),!N.type)throw new Error("No output type specified.");i.checkSupport(N.type),N.platform!=="darwin"&&N.platform!=="freebsd"&&N.platform!=="linux"&&N.platform!=="sunos"||(N.platform="UNIX"),N.platform==="win32"&&(N.platform="DOS");var V=N.comment||this.comment||"";F=d.generateWorker(this,N,V)}catch(O){(F=new s("error")).error(O)}return new a(F,N.type||"string",N.mimeType)},generateAsync:function(b,F){return this.generateInternalStream(b).accumulate(F)},generateNodeStream:function(b,F){return(b=b||{}).type||(b.type="nodebuffer"),this.generateInternalStream(b).toNodejsStream(F)}};e.exports=S},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,e,t){"use strict";e.exports=n("stream")},{stream:void 0}],17:[function(n,e,t){"use strict";var r=n("./DataReader");function o(i){r.call(this,i);for(var s=0;s<this.data.length;s++)i[s]=255&i[s]}n("../utils").inherits(o,r),o.prototype.byteAt=function(i){return this.data[this.zero+i]},o.prototype.lastIndexOfSignature=function(i){for(var s=i.charCodeAt(0),a=i.charCodeAt(1),c=i.charCodeAt(2),l=i.charCodeAt(3),u=this.length-4;0<=u;--u)if(this.data[u]===s&&this.data[u+1]===a&&this.data[u+2]===c&&this.data[u+3]===l)return u-this.zero;return-1},o.prototype.readAndCheckSignature=function(i){var s=i.charCodeAt(0),a=i.charCodeAt(1),c=i.charCodeAt(2),l=i.charCodeAt(3),u=this.readData(4);return s===u[0]&&a===u[1]&&c===u[2]&&l===u[3]},o.prototype.readData=function(i){if(this.checkOffset(i),i===0)return[];var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},e.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,e,t){"use strict";var r=n("../utils");function o(i){this.data=i,this.length=i.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(i){this.checkIndex(this.index+i)},checkIndex:function(i){if(this.length<this.zero+i||i<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+i+"). Corrupted zip ?")},setIndex:function(i){this.checkIndex(i),this.index=i},skip:function(i){this.setIndex(this.index+i)},byteAt:function(){},readInt:function(i){var s,a=0;for(this.checkOffset(i),s=this.index+i-1;s>=this.index;s--)a=(a<<8)+this.byteAt(s);return this.index+=i,a},readString:function(i){return r.transformTo("string",this.readData(i))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var i=this.readInt(4);return new Date(Date.UTC(1980+(i>>25&127),(i>>21&15)-1,i>>16&31,i>>11&31,i>>5&63,(31&i)<<1))}},e.exports=o},{"../utils":32}],19:[function(n,e,t){"use strict";var r=n("./Uint8ArrayReader");function o(i){r.call(this,i)}n("../utils").inherits(o,r),o.prototype.readData=function(i){this.checkOffset(i);var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},e.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,e,t){"use strict";var r=n("./DataReader");function o(i){r.call(this,i)}n("../utils").inherits(o,r),o.prototype.byteAt=function(i){return this.data.charCodeAt(this.zero+i)},o.prototype.lastIndexOfSignature=function(i){return this.data.lastIndexOf(i)-this.zero},o.prototype.readAndCheckSignature=function(i){return i===this.readData(4)},o.prototype.readData=function(i){this.checkOffset(i);var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},e.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,e,t){"use strict";var r=n("./ArrayReader");function o(i){r.call(this,i)}n("../utils").inherits(o,r),o.prototype.readData=function(i){if(this.checkOffset(i),i===0)return new Uint8Array(0);var s=this.data.subarray(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},e.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,e,t){"use strict";var r=n("../utils"),o=n("../support"),i=n("./ArrayReader"),s=n("./StringReader"),a=n("./NodeBufferReader"),c=n("./Uint8ArrayReader");e.exports=function(l){var u=r.getTypeOf(l);return r.checkSupport(u),u!=="string"||o.uint8array?u==="nodebuffer"?new a(l):o.uint8array?new c(r.transformTo("uint8array",l)):new i(r.transformTo("array",l)):new s(l)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,e,t){"use strict";t.LOCAL_FILE_HEADER="PK",t.CENTRAL_FILE_HEADER="PK",t.CENTRAL_DIRECTORY_END="PK",t.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",t.ZIP64_CENTRAL_DIRECTORY_END="PK",t.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,e,t){"use strict";var r=n("./GenericWorker"),o=n("../utils");function i(s){r.call(this,"ConvertWorker to "+s),this.destType=s}o.inherits(i,r),i.prototype.processChunk=function(s){this.push({data:o.transformTo(this.destType,s.data),meta:s.meta})},e.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(n,e,t){"use strict";var r=n("./GenericWorker"),o=n("../crc32");function i(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(i,r),i.prototype.processChunk=function(s){this.streamInfo.crc32=o(s.data,this.streamInfo.crc32||0),this.push(s)},e.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,e,t){"use strict";var r=n("../utils"),o=n("./GenericWorker");function i(s){o.call(this,"DataLengthProbe for "+s),this.propName=s,this.withStreamInfo(s,0)}r.inherits(i,o),i.prototype.processChunk=function(s){if(s){var a=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=a+s.data.length}o.prototype.processChunk.call(this,s)},e.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(n,e,t){"use strict";var r=n("../utils"),o=n("./GenericWorker");function i(s){o.call(this,"DataWorker");var a=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,s.then(function(c){a.dataIsReady=!0,a.data=c,a.max=c&&c.length||0,a.type=r.getTypeOf(c),a.isPaused||a._tickAndRepeat()},function(c){a.error(c)})}r.inherits(i,o),i.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var s=null,a=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":s=this.data.substring(this.index,a);break;case"uint8array":s=this.data.subarray(this.index,a);break;case"array":case"nodebuffer":s=this.data.slice(this.index,a)}return this.index=a,this.push({data:s,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(n,e,t){"use strict";function r(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,i){return this._listeners[o].push(i),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,i){if(this._listeners[o])for(var s=0;s<this._listeners[o].length;s++)this._listeners[o][s].call(this,i)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var i=this;return o.on("data",function(s){i.processChunk(s)}),o.on("end",function(){i.end()}),o.on("error",function(s){i.error(s)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,i){return this.extraStreamInfo[o]=i,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},e.exports=r},{}],29:[function(n,e,t){"use strict";var r=n("../utils"),o=n("./ConvertWorker"),i=n("./GenericWorker"),s=n("../base64"),a=n("../support"),c=n("../external"),l=null;if(a.nodestream)try{l=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function u(p,h){return new c.Promise(function(m,g){var y=[],w=p._internalType,S=p._outputType,b=p._mimeType;p.on("data",function(F,N){y.push(F),h&&h(N)}).on("error",function(F){y=[],g(F)}).on("end",function(){try{var F=function(N,V,O){switch(N){case"blob":return r.newBlob(r.transformTo("arraybuffer",V),O);case"base64":return s.encode(V);default:return r.transformTo(N,V)}}(S,function(N,V){var O,W=0,fe=null,I=0;for(O=0;O<V.length;O++)I+=V[O].length;switch(N){case"string":return V.join("");case"array":return Array.prototype.concat.apply([],V);case"uint8array":for(fe=new Uint8Array(I),O=0;O<V.length;O++)fe.set(V[O],W),W+=V[O].length;return fe;case"nodebuffer":return Buffer.concat(V);default:throw new Error("concat : unsupported type '"+N+"'")}}(w,y),b);m(F)}catch(N){g(N)}y=[]}).resume()})}function d(p,h,m){var g=h;switch(h){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=h,this._mimeType=m,r.checkSupport(g),this._worker=p.pipe(new o(g)),p.lock()}catch(y){this._worker=new i("error"),this._worker.error(y)}}d.prototype={accumulate:function(p){return u(this,p)},on:function(p,h){var m=this;return p==="data"?this._worker.on(p,function(g){h.call(m,g.data,g.meta)}):this._worker.on(p,function(){r.delay(h,arguments,m)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:this._outputType!=="nodebuffer"},p)}},e.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,e,t){"use strict";if(t.base64=!0,t.array=!0,t.string=!0,t.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",t.nodebuffer=typeof Buffer<"u",t.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")t.blob=!1;else{var r=new ArrayBuffer(0);try{t.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(r),t.blob=o.getBlob("application/zip").size===0}catch{t.blob=!1}}}try{t.nodestream=!!n("readable-stream").Readable}catch{t.nodestream=!1}},{"readable-stream":16}],31:[function(n,e,t){"use strict";for(var r=n("./utils"),o=n("./support"),i=n("./nodejsUtils"),s=n("./stream/GenericWorker"),a=new Array(256),c=0;c<256;c++)a[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;a[254]=a[254]=1;function l(){s.call(this,"utf-8 decode"),this.leftOver=null}function u(){s.call(this,"utf-8 encode")}t.utf8encode=function(d){return o.nodebuffer?i.newBufferFrom(d,"utf-8"):function(p){var h,m,g,y,w,S=p.length,b=0;for(y=0;y<S;y++)(64512&(m=p.charCodeAt(y)))==55296&&y+1<S&&(64512&(g=p.charCodeAt(y+1)))==56320&&(m=65536+(m-55296<<10)+(g-56320),y++),b+=m<128?1:m<2048?2:m<65536?3:4;for(h=o.uint8array?new Uint8Array(b):new Array(b),y=w=0;w<b;y++)(64512&(m=p.charCodeAt(y)))==55296&&y+1<S&&(64512&(g=p.charCodeAt(y+1)))==56320&&(m=65536+(m-55296<<10)+(g-56320),y++),m<128?h[w++]=m:(m<2048?h[w++]=192|m>>>6:(m<65536?h[w++]=224|m>>>12:(h[w++]=240|m>>>18,h[w++]=128|m>>>12&63),h[w++]=128|m>>>6&63),h[w++]=128|63&m);return h}(d)},t.utf8decode=function(d){return o.nodebuffer?r.transformTo("nodebuffer",d).toString("utf-8"):function(p){var h,m,g,y,w=p.length,S=new Array(2*w);for(h=m=0;h<w;)if((g=p[h++])<128)S[m++]=g;else if(4<(y=a[g]))S[m++]=65533,h+=y-1;else{for(g&=y===2?31:y===3?15:7;1<y&&h<w;)g=g<<6|63&p[h++],y--;1<y?S[m++]=65533:g<65536?S[m++]=g:(g-=65536,S[m++]=55296|g>>10&1023,S[m++]=56320|1023&g)}return S.length!==m&&(S.subarray?S=S.subarray(0,m):S.length=m),r.applyFromCharCode(S)}(d=r.transformTo(o.uint8array?"uint8array":"array",d))},r.inherits(l,s),l.prototype.processChunk=function(d){var p=r.transformTo(o.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var h=p;(p=new Uint8Array(h.length+this.leftOver.length)).set(this.leftOver,0),p.set(h,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var m=function(y,w){var S;for((w=w||y.length)>y.length&&(w=y.length),S=w-1;0<=S&&(192&y[S])==128;)S--;return S<0||S===0?w:S+a[y[S]]>w?S:w}(p),g=p;m!==p.length&&(o.uint8array?(g=p.subarray(0,m),this.leftOver=p.subarray(m,p.length)):(g=p.slice(0,m),this.leftOver=p.slice(m,p.length))),this.push({data:t.utf8decode(g),meta:d.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:t.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},t.Utf8DecodeWorker=l,r.inherits(u,s),u.prototype.processChunk=function(d){this.push({data:t.utf8encode(d.data),meta:d.meta})},t.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,e,t){"use strict";var r=n("./support"),o=n("./base64"),i=n("./nodejsUtils"),s=n("./external");function a(h){return h}function c(h,m){for(var g=0;g<h.length;++g)m[g]=255&h.charCodeAt(g);return m}n("setimmediate"),t.newBlob=function(h,m){t.checkSupport("blob");try{return new Blob([h],{type:m})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(h),g.getBlob(m)}catch{throw new Error("Bug : can't construct the Blob.")}}};var l={stringifyByChunk:function(h,m,g){var y=[],w=0,S=h.length;if(S<=g)return String.fromCharCode.apply(null,h);for(;w<S;)m==="array"||m==="nodebuffer"?y.push(String.fromCharCode.apply(null,h.slice(w,Math.min(w+g,S)))):y.push(String.fromCharCode.apply(null,h.subarray(w,Math.min(w+g,S)))),w+=g;return y.join("")},stringifyByChar:function(h){for(var m="",g=0;g<h.length;g++)m+=String.fromCharCode(h[g]);return m},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,i.allocBuffer(1)).length===1}catch{return!1}}()}};function u(h){var m=65536,g=t.getTypeOf(h),y=!0;if(g==="uint8array"?y=l.applyCanBeUsed.uint8array:g==="nodebuffer"&&(y=l.applyCanBeUsed.nodebuffer),y)for(;1<m;)try{return l.stringifyByChunk(h,g,m)}catch{m=Math.floor(m/2)}return l.stringifyByChar(h)}function d(h,m){for(var g=0;g<h.length;g++)m[g]=h[g];return m}t.applyFromCharCode=u;var p={};p.string={string:a,array:function(h){return c(h,new Array(h.length))},arraybuffer:function(h){return p.string.uint8array(h).buffer},uint8array:function(h){return c(h,new Uint8Array(h.length))},nodebuffer:function(h){return c(h,i.allocBuffer(h.length))}},p.array={string:u,array:a,arraybuffer:function(h){return new Uint8Array(h).buffer},uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return i.newBufferFrom(h)}},p.arraybuffer={string:function(h){return u(new Uint8Array(h))},array:function(h){return d(new Uint8Array(h),new Array(h.byteLength))},arraybuffer:a,uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return i.newBufferFrom(new Uint8Array(h))}},p.uint8array={string:u,array:function(h){return d(h,new Array(h.length))},arraybuffer:function(h){return h.buffer},uint8array:a,nodebuffer:function(h){return i.newBufferFrom(h)}},p.nodebuffer={string:u,array:function(h){return d(h,new Array(h.length))},arraybuffer:function(h){return p.nodebuffer.uint8array(h).buffer},uint8array:function(h){return d(h,new Uint8Array(h.length))},nodebuffer:a},t.transformTo=function(h,m){if(m=m||"",!h)return m;t.checkSupport(h);var g=t.getTypeOf(m);return p[g][h](m)},t.resolve=function(h){for(var m=h.split("/"),g=[],y=0;y<m.length;y++){var w=m[y];w==="."||w===""&&y!==0&&y!==m.length-1||(w===".."?g.pop():g.push(w))}return g.join("/")},t.getTypeOf=function(h){return typeof h=="string"?"string":Object.prototype.toString.call(h)==="[object Array]"?"array":r.nodebuffer&&i.isBuffer(h)?"nodebuffer":r.uint8array&&h instanceof Uint8Array?"uint8array":r.arraybuffer&&h instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(h){if(!r[h.toLowerCase()])throw new Error(h+" is not supported by this platform")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(h){var m,g,y="";for(g=0;g<(h||"").length;g++)y+="\\x"+((m=h.charCodeAt(g))<16?"0":"")+m.toString(16).toUpperCase();return y},t.delay=function(h,m,g){setImmediate(function(){h.apply(g||null,m||[])})},t.inherits=function(h,m){function g(){}g.prototype=m.prototype,h.prototype=new g},t.extend=function(){var h,m,g={};for(h=0;h<arguments.length;h++)for(m in arguments[h])Object.prototype.hasOwnProperty.call(arguments[h],m)&&g[m]===void 0&&(g[m]=arguments[h][m]);return g},t.prepareContent=function(h,m,g,y,w){return s.Promise.resolve(m).then(function(S){return r.blob&&(S instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(S))!==-1)&&typeof FileReader<"u"?new s.Promise(function(b,F){var N=new FileReader;N.onload=function(V){b(V.target.result)},N.onerror=function(V){F(V.target.error)},N.readAsArrayBuffer(S)}):S}).then(function(S){var b=t.getTypeOf(S);return b?(b==="arraybuffer"?S=t.transformTo("uint8array",S):b==="string"&&(w?S=o.decode(S):g&&y!==!0&&(S=function(F){return c(F,r.uint8array?new Uint8Array(F.length):new Array(F.length))}(S))),S):s.Promise.reject(new Error("Can't read the data of '"+h+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,e,t){"use strict";var r=n("./reader/readerFor"),o=n("./utils"),i=n("./signature"),s=n("./zipEntry"),a=n("./support");function c(l){this.files=[],this.loadOptions=l}c.prototype={checkSignature:function(l){if(!this.reader.readAndCheckSignature(l)){this.reader.index-=4;var u=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(u)+", expected "+o.pretty(l)+")")}},isSignature:function(l,u){var d=this.reader.index;this.reader.setIndex(l);var p=this.reader.readString(4)===u;return this.reader.setIndex(d),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var l=this.reader.readData(this.zipCommentLength),u=a.uint8array?"uint8array":"array",d=o.transformTo(u,l);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var l,u,d,p=this.zip64EndOfCentralSize-44;0<p;)l=this.reader.readInt(2),u=this.reader.readInt(4),d=this.reader.readData(u),this.zip64ExtensibleData[l]={id:l,length:u,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var l,u;for(l=0;l<this.files.length;l++)u=this.files[l],this.reader.setIndex(u.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),u.readLocalPart(this.reader),u.handleUTF8(),u.processAttributes()},readCentralDir:function(){var l;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(l=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(l);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var l=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(l<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(l);var u=l;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(l=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(l),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var p=u-d;if(0<p)this.isSignature(u,i.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(l){this.reader=r(l)},load:function(l){this.prepareReader(l),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,e,t){"use strict";var r=n("./reader/readerFor"),o=n("./utils"),i=n("./compressedObject"),s=n("./crc32"),a=n("./utf8"),c=n("./compressions"),l=n("./support");function u(d,p){this.options=d,this.loadOptions=p}u.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var p,h;if(d.skip(22),this.fileNameLength=d.readInt(2),h=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(h),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(m){for(var g in c)if(Object.prototype.hasOwnProperty.call(c,g)&&c[g].magic===m)return c[g];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,p,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var p=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(p),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=r(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var p,h,m,g=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<g;)p=d.readInt(2),h=d.readInt(2),m=d.readData(h),this.extraFields[p]={id:p,length:h,value:m};d.setIndex(g)},handleUTF8:function(){var d=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var h=o.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(h)}var m=this.findExtraFieldUnicodeComment();if(m!==null)this.fileCommentStr=m;else{var g=o.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var p=r(d.value);return p.readInt(1)!==1||s(this.fileName)!==p.readInt(4)?null:a.utf8decode(p.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var p=r(d.value);return p.readInt(1)!==1||s(this.fileComment)!==p.readInt(4)?null:a.utf8decode(p.readData(d.length-5))}return null}},e.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,e,t){"use strict";function r(p,h,m){this.name=p,this.dir=m.dir,this.date=m.date,this.comment=m.comment,this.unixPermissions=m.unixPermissions,this.dosPermissions=m.dosPermissions,this._data=h,this._dataBinary=m.binary,this.options={compression:m.compression,compressionOptions:m.compressionOptions}}var o=n("./stream/StreamHelper"),i=n("./stream/DataWorker"),s=n("./utf8"),a=n("./compressedObject"),c=n("./stream/GenericWorker");r.prototype={internalStream:function(p){var h=null,m="string";try{if(!p)throw new Error("No output type specified.");var g=(m=p.toLowerCase())==="string"||m==="text";m!=="binarystring"&&m!=="text"||(m="string"),h=this._decompressWorker();var y=!this._dataBinary;y&&!g&&(h=h.pipe(new s.Utf8EncodeWorker)),!y&&g&&(h=h.pipe(new s.Utf8DecodeWorker))}catch(w){(h=new c("error")).error(w)}return new o(h,m,"")},async:function(p,h){return this.internalStream(p).accumulate(h)},nodeStream:function(p,h){return this.internalStream(p||"nodebuffer").toNodejsStream(h)},_compressWorker:function(p,h){if(this._data instanceof a&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var m=this._decompressWorker();return this._dataBinary||(m=m.pipe(new s.Utf8EncodeWorker)),a.createWorkerFrom(m,p,h)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof c?this._data:new i(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<l.length;d++)r.prototype[l[d]]=u;e.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,e,t){(function(r){"use strict";var o,i,s=r.MutationObserver||r.WebKitMutationObserver;if(s){var a=0,c=new s(p),l=r.document.createTextNode("");c.observe(l,{characterData:!0}),o=function(){l.data=a=++a%2}}else if(r.setImmediate||r.MessageChannel===void 0)o="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var h=r.document.createElement("script");h.onreadystatechange=function(){p(),h.onreadystatechange=null,h.parentNode.removeChild(h),h=null},r.document.documentElement.appendChild(h)}:function(){setTimeout(p,0)};else{var u=new r.MessageChannel;u.port1.onmessage=p,o=function(){u.port2.postMessage(0)}}var d=[];function p(){var h,m;i=!0;for(var g=d.length;g;){for(m=d,d=[],h=-1;++h<g;)m[h]();g=d.length}i=!1}e.exports=function(h){d.push(h)!==1||i||o()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,e,t){"use strict";var r=n("immediate");function o(){}var i={},s=["REJECTED"],a=["FULFILLED"],c=["PENDING"];function l(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,g!==o&&h(this,g)}function u(g,y,w){this.promise=g,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function d(g,y,w){r(function(){var S;try{S=y(w)}catch(b){return i.reject(g,b)}S===g?i.reject(g,new TypeError("Cannot resolve promise with itself")):i.resolve(g,S)})}function p(g){var y=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof y=="function")return function(){y.apply(g,arguments)}}function h(g,y){var w=!1;function S(N){w||(w=!0,i.reject(g,N))}function b(N){w||(w=!0,i.resolve(g,N))}var F=m(function(){y(b,S)});F.status==="error"&&S(F.value)}function m(g,y){var w={};try{w.value=g(y),w.status="success"}catch(S){w.status="error",w.value=S}return w}(e.exports=l).prototype.finally=function(g){if(typeof g!="function")return this;var y=this.constructor;return this.then(function(w){return y.resolve(g()).then(function(){return w})},function(w){return y.resolve(g()).then(function(){throw w})})},l.prototype.catch=function(g){return this.then(null,g)},l.prototype.then=function(g,y){if(typeof g!="function"&&this.state===a||typeof y!="function"&&this.state===s)return this;var w=new this.constructor(o);return this.state!==c?d(w,this.state===a?g:y,this.outcome):this.queue.push(new u(w,g,y)),w},u.prototype.callFulfilled=function(g){i.resolve(this.promise,g)},u.prototype.otherCallFulfilled=function(g){d(this.promise,this.onFulfilled,g)},u.prototype.callRejected=function(g){i.reject(this.promise,g)},u.prototype.otherCallRejected=function(g){d(this.promise,this.onRejected,g)},i.resolve=function(g,y){var w=m(p,y);if(w.status==="error")return i.reject(g,w.value);var S=w.value;if(S)h(g,S);else{g.state=a,g.outcome=y;for(var b=-1,F=g.queue.length;++b<F;)g.queue[b].callFulfilled(y)}return g},i.reject=function(g,y){g.state=s,g.outcome=y;for(var w=-1,S=g.queue.length;++w<S;)g.queue[w].callRejected(y);return g},l.resolve=function(g){return g instanceof this?g:i.resolve(new this(o),g)},l.reject=function(g){var y=new this(o);return i.reject(y,g)},l.all=function(g){var y=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=g.length,S=!1;if(!w)return this.resolve([]);for(var b=new Array(w),F=0,N=-1,V=new this(o);++N<w;)O(g[N],N);return V;function O(W,fe){y.resolve(W).then(function(I){b[fe]=I,++F!==w||S||(S=!0,i.resolve(V,b))},function(I){S||(S=!0,i.reject(V,I))})}},l.race=function(g){var y=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=g.length,S=!1;if(!w)return this.resolve([]);for(var b=-1,F=new this(o);++b<w;)N=g[b],y.resolve(N).then(function(V){S||(S=!0,i.resolve(F,V))},function(V){S||(S=!0,i.reject(F,V))});var N;return F}},{immediate:36}],38:[function(n,e,t){"use strict";var r={};(0,n("./lib/utils/common").assign)(r,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),e.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,e,t){"use strict";var r=n("./zlib/deflate"),o=n("./utils/common"),i=n("./utils/strings"),s=n("./zlib/messages"),a=n("./zlib/zstream"),c=Object.prototype.toString,l=0,u=-1,d=0,p=8;function h(g){if(!(this instanceof h))return new h(g);this.options=o.assign({level:u,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},g||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var w=r.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(w!==l)throw new Error(s[w]);if(y.header&&r.deflateSetHeader(this.strm,y.header),y.dictionary){var S;if(S=typeof y.dictionary=="string"?i.string2buf(y.dictionary):c.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(w=r.deflateSetDictionary(this.strm,S))!==l)throw new Error(s[w]);this._dict_set=!0}}function m(g,y){var w=new h(y);if(w.push(g,!0),w.err)throw w.msg||s[w.err];return w.result}h.prototype.push=function(g,y){var w,S,b=this.strm,F=this.options.chunkSize;if(this.ended)return!1;S=y===~~y?y:y===!0?4:0,typeof g=="string"?b.input=i.string2buf(g):c.call(g)==="[object ArrayBuffer]"?b.input=new Uint8Array(g):b.input=g,b.next_in=0,b.avail_in=b.input.length;do{if(b.avail_out===0&&(b.output=new o.Buf8(F),b.next_out=0,b.avail_out=F),(w=r.deflate(b,S))!==1&&w!==l)return this.onEnd(w),!(this.ended=!0);b.avail_out!==0&&(b.avail_in!==0||S!==4&&S!==2)||(this.options.to==="string"?this.onData(i.buf2binstring(o.shrinkBuf(b.output,b.next_out))):this.onData(o.shrinkBuf(b.output,b.next_out)))}while((0<b.avail_in||b.avail_out===0)&&w!==1);return S===4?(w=r.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===l):S!==2||(this.onEnd(l),!(b.avail_out=0))},h.prototype.onData=function(g){this.chunks.push(g)},h.prototype.onEnd=function(g){g===l&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},t.Deflate=h,t.deflate=m,t.deflateRaw=function(g,y){return(y=y||{}).raw=!0,m(g,y)},t.gzip=function(g,y){return(y=y||{}).gzip=!0,m(g,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,e,t){"use strict";var r=n("./zlib/inflate"),o=n("./utils/common"),i=n("./utils/strings"),s=n("./zlib/constants"),a=n("./zlib/messages"),c=n("./zlib/zstream"),l=n("./zlib/gzheader"),u=Object.prototype.toString;function d(h){if(!(this instanceof d))return new d(h);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},h||{});var m=this.options;m.raw&&0<=m.windowBits&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),!(0<=m.windowBits&&m.windowBits<16)||h&&h.windowBits||(m.windowBits+=32),15<m.windowBits&&m.windowBits<48&&!(15&m.windowBits)&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var g=r.inflateInit2(this.strm,m.windowBits);if(g!==s.Z_OK)throw new Error(a[g]);this.header=new l,r.inflateGetHeader(this.strm,this.header)}function p(h,m){var g=new d(m);if(g.push(h,!0),g.err)throw g.msg||a[g.err];return g.result}d.prototype.push=function(h,m){var g,y,w,S,b,F,N=this.strm,V=this.options.chunkSize,O=this.options.dictionary,W=!1;if(this.ended)return!1;y=m===~~m?m:m===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof h=="string"?N.input=i.binstring2buf(h):u.call(h)==="[object ArrayBuffer]"?N.input=new Uint8Array(h):N.input=h,N.next_in=0,N.avail_in=N.input.length;do{if(N.avail_out===0&&(N.output=new o.Buf8(V),N.next_out=0,N.avail_out=V),(g=r.inflate(N,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&O&&(F=typeof O=="string"?i.string2buf(O):u.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,g=r.inflateSetDictionary(this.strm,F)),g===s.Z_BUF_ERROR&&W===!0&&(g=s.Z_OK,W=!1),g!==s.Z_STREAM_END&&g!==s.Z_OK)return this.onEnd(g),!(this.ended=!0);N.next_out&&(N.avail_out!==0&&g!==s.Z_STREAM_END&&(N.avail_in!==0||y!==s.Z_FINISH&&y!==s.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=i.utf8border(N.output,N.next_out),S=N.next_out-w,b=i.buf2string(N.output,w),N.next_out=S,N.avail_out=V-S,S&&o.arraySet(N.output,N.output,w,S,0),this.onData(b)):this.onData(o.shrinkBuf(N.output,N.next_out)))),N.avail_in===0&&N.avail_out===0&&(W=!0)}while((0<N.avail_in||N.avail_out===0)&&g!==s.Z_STREAM_END);return g===s.Z_STREAM_END&&(y=s.Z_FINISH),y===s.Z_FINISH?(g=r.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===s.Z_OK):y!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(N.avail_out=0))},d.prototype.onData=function(h){this.chunks.push(h)},d.prototype.onEnd=function(h){h===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},t.Inflate=d,t.inflate=p,t.inflateRaw=function(h,m){return(m=m||{}).raw=!0,p(h,m)},t.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,e,t){"use strict";var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";t.assign=function(s){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var c=a.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])}}return s},t.shrinkBuf=function(s,a){return s.length===a?s:s.subarray?s.subarray(0,a):(s.length=a,s)};var o={arraySet:function(s,a,c,l,u){if(a.subarray&&s.subarray)s.set(a.subarray(c,c+l),u);else for(var d=0;d<l;d++)s[u+d]=a[c+d]},flattenChunks:function(s){var a,c,l,u,d,p;for(a=l=0,c=s.length;a<c;a++)l+=s[a].length;for(p=new Uint8Array(l),a=u=0,c=s.length;a<c;a++)d=s[a],p.set(d,u),u+=d.length;return p}},i={arraySet:function(s,a,c,l,u){for(var d=0;d<l;d++)s[u+d]=a[c+d]},flattenChunks:function(s){return[].concat.apply([],s)}};t.setTyped=function(s){s?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(r)},{}],42:[function(n,e,t){"use strict";var r=n("./common"),o=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{i=!1}for(var s=new r.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function c(l,u){if(u<65537&&(l.subarray&&i||!l.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(l,u));for(var d="",p=0;p<u;p++)d+=String.fromCharCode(l[p]);return d}s[254]=s[254]=1,t.string2buf=function(l){var u,d,p,h,m,g=l.length,y=0;for(h=0;h<g;h++)(64512&(d=l.charCodeAt(h)))==55296&&h+1<g&&(64512&(p=l.charCodeAt(h+1)))==56320&&(d=65536+(d-55296<<10)+(p-56320),h++),y+=d<128?1:d<2048?2:d<65536?3:4;for(u=new r.Buf8(y),h=m=0;m<y;h++)(64512&(d=l.charCodeAt(h)))==55296&&h+1<g&&(64512&(p=l.charCodeAt(h+1)))==56320&&(d=65536+(d-55296<<10)+(p-56320),h++),d<128?u[m++]=d:(d<2048?u[m++]=192|d>>>6:(d<65536?u[m++]=224|d>>>12:(u[m++]=240|d>>>18,u[m++]=128|d>>>12&63),u[m++]=128|d>>>6&63),u[m++]=128|63&d);return u},t.buf2binstring=function(l){return c(l,l.length)},t.binstring2buf=function(l){for(var u=new r.Buf8(l.length),d=0,p=u.length;d<p;d++)u[d]=l.charCodeAt(d);return u},t.buf2string=function(l,u){var d,p,h,m,g=u||l.length,y=new Array(2*g);for(d=p=0;d<g;)if((h=l[d++])<128)y[p++]=h;else if(4<(m=s[h]))y[p++]=65533,d+=m-1;else{for(h&=m===2?31:m===3?15:7;1<m&&d<g;)h=h<<6|63&l[d++],m--;1<m?y[p++]=65533:h<65536?y[p++]=h:(h-=65536,y[p++]=55296|h>>10&1023,y[p++]=56320|1023&h)}return c(y,p)},t.utf8border=function(l,u){var d;for((u=u||l.length)>l.length&&(u=l.length),d=u-1;0<=d&&(192&l[d])==128;)d--;return d<0||d===0?u:d+s[l[d]]>u?d:u}},{"./common":41}],43:[function(n,e,t){"use strict";e.exports=function(r,o,i,s){for(var a=65535&r|0,c=r>>>16&65535|0,l=0;i!==0;){for(i-=l=2e3<i?2e3:i;c=c+(a=a+o[s++]|0)|0,--l;);a%=65521,c%=65521}return a|c<<16|0}},{}],44:[function(n,e,t){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,e,t){"use strict";var r=function(){for(var o,i=[],s=0;s<256;s++){o=s;for(var a=0;a<8;a++)o=1&o?3988292384^o>>>1:o>>>1;i[s]=o}return i}();e.exports=function(o,i,s,a){var c=r,l=a+s;o^=-1;for(var u=a;u<l;u++)o=o>>>8^c[255&(o^i[u])];return-1^o}},{}],46:[function(n,e,t){"use strict";var r,o=n("../utils/common"),i=n("./trees"),s=n("./adler32"),a=n("./crc32"),c=n("./messages"),l=0,u=4,d=0,p=-2,h=-1,m=4,g=2,y=8,w=9,S=286,b=30,F=19,N=2*S+1,V=15,O=3,W=258,fe=W+O+1,I=42,U=113,v=1,z=2,Ie=3,q=4;function ke(f,B){return f.msg=c[B],B}function K(f){return(f<<1)-(4<f?9:0)}function ye(f){for(var B=f.length;0<=--B;)f[B]=0}function x(f){var B=f.state,P=B.pending;P>f.avail_out&&(P=f.avail_out),P!==0&&(o.arraySet(f.output,B.pending_buf,B.pending_out,P,f.next_out),f.next_out+=P,B.pending_out+=P,f.total_out+=P,f.avail_out-=P,B.pending-=P,B.pending===0&&(B.pending_out=0))}function k(f,B){i._tr_flush_block(f,0<=f.block_start?f.block_start:-1,f.strstart-f.block_start,B),f.block_start=f.strstart,x(f.strm)}function pe(f,B){f.pending_buf[f.pending++]=B}function ae(f,B){f.pending_buf[f.pending++]=B>>>8&255,f.pending_buf[f.pending++]=255&B}function ee(f,B){var P,_,E=f.max_chain_length,A=f.strstart,$=f.prev_length,G=f.nice_match,M=f.strstart>f.w_size-fe?f.strstart-(f.w_size-fe):0,Y=f.window,ce=f.w_mask,Z=f.prev,he=f.strstart+W,Ze=Y[A+$-1],Ue=Y[A+$];f.prev_length>=f.good_match&&(E>>=2),G>f.lookahead&&(G=f.lookahead);do if(Y[(P=B)+$]===Ue&&Y[P+$-1]===Ze&&Y[P]===Y[A]&&Y[++P]===Y[A+1]){A+=2,P++;do;while(Y[++A]===Y[++P]&&Y[++A]===Y[++P]&&Y[++A]===Y[++P]&&Y[++A]===Y[++P]&&Y[++A]===Y[++P]&&Y[++A]===Y[++P]&&Y[++A]===Y[++P]&&Y[++A]===Y[++P]&&A<he);if(_=W-(he-A),A=he-W,$<_){if(f.match_start=B,G<=($=_))break;Ze=Y[A+$-1],Ue=Y[A+$]}}while((B=Z[B&ce])>M&&--E!=0);return $<=f.lookahead?$:f.lookahead}function ut(f){var B,P,_,E,A,$,G,M,Y,ce,Z=f.w_size;do{if(E=f.window_size-f.lookahead-f.strstart,f.strstart>=Z+(Z-fe)){for(o.arraySet(f.window,f.window,Z,Z,0),f.match_start-=Z,f.strstart-=Z,f.block_start-=Z,B=P=f.hash_size;_=f.head[--B],f.head[B]=Z<=_?_-Z:0,--P;);for(B=P=Z;_=f.prev[--B],f.prev[B]=Z<=_?_-Z:0,--P;);E+=Z}if(f.strm.avail_in===0)break;if($=f.strm,G=f.window,M=f.strstart+f.lookahead,Y=E,ce=void 0,ce=$.avail_in,Y<ce&&(ce=Y),P=ce===0?0:($.avail_in-=ce,o.arraySet(G,$.input,$.next_in,ce,M),$.state.wrap===1?$.adler=s($.adler,G,ce,M):$.state.wrap===2&&($.adler=a($.adler,G,ce,M)),$.next_in+=ce,$.total_in+=ce,ce),f.lookahead+=P,f.lookahead+f.insert>=O)for(A=f.strstart-f.insert,f.ins_h=f.window[A],f.ins_h=(f.ins_h<<f.hash_shift^f.window[A+1])&f.hash_mask;f.insert&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[A+O-1])&f.hash_mask,f.prev[A&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=A,A++,f.insert--,!(f.lookahead+f.insert<O)););}while(f.lookahead<fe&&f.strm.avail_in!==0)}function jt(f,B){for(var P,_;;){if(f.lookahead<fe){if(ut(f),f.lookahead<fe&&B===l)return v;if(f.lookahead===0)break}if(P=0,f.lookahead>=O&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+O-1])&f.hash_mask,P=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart),P!==0&&f.strstart-P<=f.w_size-fe&&(f.match_length=ee(f,P)),f.match_length>=O)if(_=i._tr_tally(f,f.strstart-f.match_start,f.match_length-O),f.lookahead-=f.match_length,f.match_length<=f.max_lazy_match&&f.lookahead>=O){for(f.match_length--;f.strstart++,f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+O-1])&f.hash_mask,P=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart,--f.match_length!=0;);f.strstart++}else f.strstart+=f.match_length,f.match_length=0,f.ins_h=f.window[f.strstart],f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+1])&f.hash_mask;else _=i._tr_tally(f,0,f.window[f.strstart]),f.lookahead--,f.strstart++;if(_&&(k(f,!1),f.strm.avail_out===0))return v}return f.insert=f.strstart<O-1?f.strstart:O-1,B===u?(k(f,!0),f.strm.avail_out===0?Ie:q):f.last_lit&&(k(f,!1),f.strm.avail_out===0)?v:z}function Le(f,B){for(var P,_,E;;){if(f.lookahead<fe){if(ut(f),f.lookahead<fe&&B===l)return v;if(f.lookahead===0)break}if(P=0,f.lookahead>=O&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+O-1])&f.hash_mask,P=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart),f.prev_length=f.match_length,f.prev_match=f.match_start,f.match_length=O-1,P!==0&&f.prev_length<f.max_lazy_match&&f.strstart-P<=f.w_size-fe&&(f.match_length=ee(f,P),f.match_length<=5&&(f.strategy===1||f.match_length===O&&4096<f.strstart-f.match_start)&&(f.match_length=O-1)),f.prev_length>=O&&f.match_length<=f.prev_length){for(E=f.strstart+f.lookahead-O,_=i._tr_tally(f,f.strstart-1-f.prev_match,f.prev_length-O),f.lookahead-=f.prev_length-1,f.prev_length-=2;++f.strstart<=E&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+O-1])&f.hash_mask,P=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart),--f.prev_length!=0;);if(f.match_available=0,f.match_length=O-1,f.strstart++,_&&(k(f,!1),f.strm.avail_out===0))return v}else if(f.match_available){if((_=i._tr_tally(f,0,f.window[f.strstart-1]))&&k(f,!1),f.strstart++,f.lookahead--,f.strm.avail_out===0)return v}else f.match_available=1,f.strstart++,f.lookahead--}return f.match_available&&(_=i._tr_tally(f,0,f.window[f.strstart-1]),f.match_available=0),f.insert=f.strstart<O-1?f.strstart:O-1,B===u?(k(f,!0),f.strm.avail_out===0?Ie:q):f.last_lit&&(k(f,!1),f.strm.avail_out===0)?v:z}function Ge(f,B,P,_,E){this.good_length=f,this.max_lazy=B,this.nice_length=P,this.max_chain=_,this.func=E}function xt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*N),this.dyn_dtree=new o.Buf16(2*(2*b+1)),this.bl_tree=new o.Buf16(2*(2*F+1)),ye(this.dyn_ltree),ye(this.dyn_dtree),ye(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(V+1),this.heap=new o.Buf16(2*S+1),ye(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*S+1),ye(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function dt(f){var B;return f&&f.state?(f.total_in=f.total_out=0,f.data_type=g,(B=f.state).pending=0,B.pending_out=0,B.wrap<0&&(B.wrap=-B.wrap),B.status=B.wrap?I:U,f.adler=B.wrap===2?0:1,B.last_flush=l,i._tr_init(B),d):ke(f,p)}function ir(f){var B=dt(f);return B===d&&function(P){P.window_size=2*P.w_size,ye(P.head),P.max_lazy_match=r[P.level].max_lazy,P.good_match=r[P.level].good_length,P.nice_match=r[P.level].nice_length,P.max_chain_length=r[P.level].max_chain,P.strstart=0,P.block_start=0,P.lookahead=0,P.insert=0,P.match_length=P.prev_length=O-1,P.match_available=0,P.ins_h=0}(f.state),B}function zn(f,B,P,_,E,A){if(!f)return p;var $=1;if(B===h&&(B=6),_<0?($=0,_=-_):15<_&&($=2,_-=16),E<1||w<E||P!==y||_<8||15<_||B<0||9<B||A<0||m<A)return ke(f,p);_===8&&(_=9);var G=new xt;return(f.state=G).strm=f,G.wrap=$,G.gzhead=null,G.w_bits=_,G.w_size=1<<G.w_bits,G.w_mask=G.w_size-1,G.hash_bits=E+7,G.hash_size=1<<G.hash_bits,G.hash_mask=G.hash_size-1,G.hash_shift=~~((G.hash_bits+O-1)/O),G.window=new o.Buf8(2*G.w_size),G.head=new o.Buf16(G.hash_size),G.prev=new o.Buf16(G.w_size),G.lit_bufsize=1<<E+6,G.pending_buf_size=4*G.lit_bufsize,G.pending_buf=new o.Buf8(G.pending_buf_size),G.d_buf=1*G.lit_bufsize,G.l_buf=3*G.lit_bufsize,G.level=B,G.strategy=A,G.method=P,ir(f)}r=[new Ge(0,0,0,0,function(f,B){var P=65535;for(P>f.pending_buf_size-5&&(P=f.pending_buf_size-5);;){if(f.lookahead<=1){if(ut(f),f.lookahead===0&&B===l)return v;if(f.lookahead===0)break}f.strstart+=f.lookahead,f.lookahead=0;var _=f.block_start+P;if((f.strstart===0||f.strstart>=_)&&(f.lookahead=f.strstart-_,f.strstart=_,k(f,!1),f.strm.avail_out===0)||f.strstart-f.block_start>=f.w_size-fe&&(k(f,!1),f.strm.avail_out===0))return v}return f.insert=0,B===u?(k(f,!0),f.strm.avail_out===0?Ie:q):(f.strstart>f.block_start&&(k(f,!1),f.strm.avail_out),v)}),new Ge(4,4,8,4,jt),new Ge(4,5,16,8,jt),new Ge(4,6,32,32,jt),new Ge(4,4,16,16,Le),new Ge(8,16,32,32,Le),new Ge(8,16,128,128,Le),new Ge(8,32,128,256,Le),new Ge(32,128,258,1024,Le),new Ge(32,258,258,4096,Le)],t.deflateInit=function(f,B){return zn(f,B,y,15,8,0)},t.deflateInit2=zn,t.deflateReset=ir,t.deflateResetKeep=dt,t.deflateSetHeader=function(f,B){return f&&f.state?f.state.wrap!==2?p:(f.state.gzhead=B,d):p},t.deflate=function(f,B){var P,_,E,A;if(!f||!f.state||5<B||B<0)return f?ke(f,p):p;if(_=f.state,!f.output||!f.input&&f.avail_in!==0||_.status===666&&B!==u)return ke(f,f.avail_out===0?-5:p);if(_.strm=f,P=_.last_flush,_.last_flush=B,_.status===I)if(_.wrap===2)f.adler=0,pe(_,31),pe(_,139),pe(_,8),_.gzhead?(pe(_,(_.gzhead.text?1:0)+(_.gzhead.hcrc?2:0)+(_.gzhead.extra?4:0)+(_.gzhead.name?8:0)+(_.gzhead.comment?16:0)),pe(_,255&_.gzhead.time),pe(_,_.gzhead.time>>8&255),pe(_,_.gzhead.time>>16&255),pe(_,_.gzhead.time>>24&255),pe(_,_.level===9?2:2<=_.strategy||_.level<2?4:0),pe(_,255&_.gzhead.os),_.gzhead.extra&&_.gzhead.extra.length&&(pe(_,255&_.gzhead.extra.length),pe(_,_.gzhead.extra.length>>8&255)),_.gzhead.hcrc&&(f.adler=a(f.adler,_.pending_buf,_.pending,0)),_.gzindex=0,_.status=69):(pe(_,0),pe(_,0),pe(_,0),pe(_,0),pe(_,0),pe(_,_.level===9?2:2<=_.strategy||_.level<2?4:0),pe(_,3),_.status=U);else{var $=y+(_.w_bits-8<<4)<<8;$|=(2<=_.strategy||_.level<2?0:_.level<6?1:_.level===6?2:3)<<6,_.strstart!==0&&($|=32),$+=31-$%31,_.status=U,ae(_,$),_.strstart!==0&&(ae(_,f.adler>>>16),ae(_,65535&f.adler)),f.adler=1}if(_.status===69)if(_.gzhead.extra){for(E=_.pending;_.gzindex<(65535&_.gzhead.extra.length)&&(_.pending!==_.pending_buf_size||(_.gzhead.hcrc&&_.pending>E&&(f.adler=a(f.adler,_.pending_buf,_.pending-E,E)),x(f),E=_.pending,_.pending!==_.pending_buf_size));)pe(_,255&_.gzhead.extra[_.gzindex]),_.gzindex++;_.gzhead.hcrc&&_.pending>E&&(f.adler=a(f.adler,_.pending_buf,_.pending-E,E)),_.gzindex===_.gzhead.extra.length&&(_.gzindex=0,_.status=73)}else _.status=73;if(_.status===73)if(_.gzhead.name){E=_.pending;do{if(_.pending===_.pending_buf_size&&(_.gzhead.hcrc&&_.pending>E&&(f.adler=a(f.adler,_.pending_buf,_.pending-E,E)),x(f),E=_.pending,_.pending===_.pending_buf_size)){A=1;break}A=_.gzindex<_.gzhead.name.length?255&_.gzhead.name.charCodeAt(_.gzindex++):0,pe(_,A)}while(A!==0);_.gzhead.hcrc&&_.pending>E&&(f.adler=a(f.adler,_.pending_buf,_.pending-E,E)),A===0&&(_.gzindex=0,_.status=91)}else _.status=91;if(_.status===91)if(_.gzhead.comment){E=_.pending;do{if(_.pending===_.pending_buf_size&&(_.gzhead.hcrc&&_.pending>E&&(f.adler=a(f.adler,_.pending_buf,_.pending-E,E)),x(f),E=_.pending,_.pending===_.pending_buf_size)){A=1;break}A=_.gzindex<_.gzhead.comment.length?255&_.gzhead.comment.charCodeAt(_.gzindex++):0,pe(_,A)}while(A!==0);_.gzhead.hcrc&&_.pending>E&&(f.adler=a(f.adler,_.pending_buf,_.pending-E,E)),A===0&&(_.status=103)}else _.status=103;if(_.status===103&&(_.gzhead.hcrc?(_.pending+2>_.pending_buf_size&&x(f),_.pending+2<=_.pending_buf_size&&(pe(_,255&f.adler),pe(_,f.adler>>8&255),f.adler=0,_.status=U)):_.status=U),_.pending!==0){if(x(f),f.avail_out===0)return _.last_flush=-1,d}else if(f.avail_in===0&&K(B)<=K(P)&&B!==u)return ke(f,-5);if(_.status===666&&f.avail_in!==0)return ke(f,-5);if(f.avail_in!==0||_.lookahead!==0||B!==l&&_.status!==666){var G=_.strategy===2?function(M,Y){for(var ce;;){if(M.lookahead===0&&(ut(M),M.lookahead===0)){if(Y===l)return v;break}if(M.match_length=0,ce=i._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++,ce&&(k(M,!1),M.strm.avail_out===0))return v}return M.insert=0,Y===u?(k(M,!0),M.strm.avail_out===0?Ie:q):M.last_lit&&(k(M,!1),M.strm.avail_out===0)?v:z}(_,B):_.strategy===3?function(M,Y){for(var ce,Z,he,Ze,Ue=M.window;;){if(M.lookahead<=W){if(ut(M),M.lookahead<=W&&Y===l)return v;if(M.lookahead===0)break}if(M.match_length=0,M.lookahead>=O&&0<M.strstart&&(Z=Ue[he=M.strstart-1])===Ue[++he]&&Z===Ue[++he]&&Z===Ue[++he]){Ze=M.strstart+W;do;while(Z===Ue[++he]&&Z===Ue[++he]&&Z===Ue[++he]&&Z===Ue[++he]&&Z===Ue[++he]&&Z===Ue[++he]&&Z===Ue[++he]&&Z===Ue[++he]&&he<Ze);M.match_length=W-(Ze-he),M.match_length>M.lookahead&&(M.match_length=M.lookahead)}if(M.match_length>=O?(ce=i._tr_tally(M,1,M.match_length-O),M.lookahead-=M.match_length,M.strstart+=M.match_length,M.match_length=0):(ce=i._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++),ce&&(k(M,!1),M.strm.avail_out===0))return v}return M.insert=0,Y===u?(k(M,!0),M.strm.avail_out===0?Ie:q):M.last_lit&&(k(M,!1),M.strm.avail_out===0)?v:z}(_,B):r[_.level].func(_,B);if(G!==Ie&&G!==q||(_.status=666),G===v||G===Ie)return f.avail_out===0&&(_.last_flush=-1),d;if(G===z&&(B===1?i._tr_align(_):B!==5&&(i._tr_stored_block(_,0,0,!1),B===3&&(ye(_.head),_.lookahead===0&&(_.strstart=0,_.block_start=0,_.insert=0))),x(f),f.avail_out===0))return _.last_flush=-1,d}return B!==u?d:_.wrap<=0?1:(_.wrap===2?(pe(_,255&f.adler),pe(_,f.adler>>8&255),pe(_,f.adler>>16&255),pe(_,f.adler>>24&255),pe(_,255&f.total_in),pe(_,f.total_in>>8&255),pe(_,f.total_in>>16&255),pe(_,f.total_in>>24&255)):(ae(_,f.adler>>>16),ae(_,65535&f.adler)),x(f),0<_.wrap&&(_.wrap=-_.wrap),_.pending!==0?d:1)},t.deflateEnd=function(f){var B;return f&&f.state?(B=f.state.status)!==I&&B!==69&&B!==73&&B!==91&&B!==103&&B!==U&&B!==666?ke(f,p):(f.state=null,B===U?ke(f,-3):d):p},t.deflateSetDictionary=function(f,B){var P,_,E,A,$,G,M,Y,ce=B.length;if(!f||!f.state||(A=(P=f.state).wrap)===2||A===1&&P.status!==I||P.lookahead)return p;for(A===1&&(f.adler=s(f.adler,B,ce,0)),P.wrap=0,ce>=P.w_size&&(A===0&&(ye(P.head),P.strstart=0,P.block_start=0,P.insert=0),Y=new o.Buf8(P.w_size),o.arraySet(Y,B,ce-P.w_size,P.w_size,0),B=Y,ce=P.w_size),$=f.avail_in,G=f.next_in,M=f.input,f.avail_in=ce,f.next_in=0,f.input=B,ut(P);P.lookahead>=O;){for(_=P.strstart,E=P.lookahead-(O-1);P.ins_h=(P.ins_h<<P.hash_shift^P.window[_+O-1])&P.hash_mask,P.prev[_&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=_,_++,--E;);P.strstart=_,P.lookahead=O-1,ut(P)}return P.strstart+=P.lookahead,P.block_start=P.strstart,P.insert=P.lookahead,P.lookahead=0,P.match_length=P.prev_length=O-1,P.match_available=0,f.next_in=G,f.input=M,f.avail_in=$,P.wrap=A,d},t.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,e,t){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,e,t){"use strict";e.exports=function(r,o){var i,s,a,c,l,u,d,p,h,m,g,y,w,S,b,F,N,V,O,W,fe,I,U,v,z;i=r.state,s=r.next_in,v=r.input,a=s+(r.avail_in-5),c=r.next_out,z=r.output,l=c-(o-r.avail_out),u=c+(r.avail_out-257),d=i.dmax,p=i.wsize,h=i.whave,m=i.wnext,g=i.window,y=i.hold,w=i.bits,S=i.lencode,b=i.distcode,F=(1<<i.lenbits)-1,N=(1<<i.distbits)-1;e:do{w<15&&(y+=v[s++]<<w,w+=8,y+=v[s++]<<w,w+=8),V=S[y&F];t:for(;;){if(y>>>=O=V>>>24,w-=O,(O=V>>>16&255)===0)z[c++]=65535&V;else{if(!(16&O)){if(!(64&O)){V=S[(65535&V)+(y&(1<<O)-1)];continue t}if(32&O){i.mode=12;break e}r.msg="invalid literal/length code",i.mode=30;break e}W=65535&V,(O&=15)&&(w<O&&(y+=v[s++]<<w,w+=8),W+=y&(1<<O)-1,y>>>=O,w-=O),w<15&&(y+=v[s++]<<w,w+=8,y+=v[s++]<<w,w+=8),V=b[y&N];n:for(;;){if(y>>>=O=V>>>24,w-=O,!(16&(O=V>>>16&255))){if(!(64&O)){V=b[(65535&V)+(y&(1<<O)-1)];continue n}r.msg="invalid distance code",i.mode=30;break e}if(fe=65535&V,w<(O&=15)&&(y+=v[s++]<<w,(w+=8)<O&&(y+=v[s++]<<w,w+=8)),d<(fe+=y&(1<<O)-1)){r.msg="invalid distance too far back",i.mode=30;break e}if(y>>>=O,w-=O,(O=c-l)<fe){if(h<(O=fe-O)&&i.sane){r.msg="invalid distance too far back",i.mode=30;break e}if(U=g,(I=0)===m){if(I+=p-O,O<W){for(W-=O;z[c++]=g[I++],--O;);I=c-fe,U=z}}else if(m<O){if(I+=p+m-O,(O-=m)<W){for(W-=O;z[c++]=g[I++],--O;);if(I=0,m<W){for(W-=O=m;z[c++]=g[I++],--O;);I=c-fe,U=z}}}else if(I+=m-O,O<W){for(W-=O;z[c++]=g[I++],--O;);I=c-fe,U=z}for(;2<W;)z[c++]=U[I++],z[c++]=U[I++],z[c++]=U[I++],W-=3;W&&(z[c++]=U[I++],1<W&&(z[c++]=U[I++]))}else{for(I=c-fe;z[c++]=z[I++],z[c++]=z[I++],z[c++]=z[I++],2<(W-=3););W&&(z[c++]=z[I++],1<W&&(z[c++]=z[I++]))}break}}break}}while(s<a&&c<u);s-=W=w>>3,y&=(1<<(w-=W<<3))-1,r.next_in=s,r.next_out=c,r.avail_in=s<a?a-s+5:5-(s-a),r.avail_out=c<u?u-c+257:257-(c-u),i.hold=y,i.bits=w}},{}],49:[function(n,e,t){"use strict";var r=n("../utils/common"),o=n("./adler32"),i=n("./crc32"),s=n("./inffast"),a=n("./inftrees"),c=1,l=2,u=0,d=-2,p=1,h=852,m=592;function g(I){return(I>>>24&255)+(I>>>8&65280)+((65280&I)<<8)+((255&I)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(I){var U;return I&&I.state?(U=I.state,I.total_in=I.total_out=U.total=0,I.msg="",U.wrap&&(I.adler=1&U.wrap),U.mode=p,U.last=0,U.havedict=0,U.dmax=32768,U.head=null,U.hold=0,U.bits=0,U.lencode=U.lendyn=new r.Buf32(h),U.distcode=U.distdyn=new r.Buf32(m),U.sane=1,U.back=-1,u):d}function S(I){var U;return I&&I.state?((U=I.state).wsize=0,U.whave=0,U.wnext=0,w(I)):d}function b(I,U){var v,z;return I&&I.state?(z=I.state,U<0?(v=0,U=-U):(v=1+(U>>4),U<48&&(U&=15)),U&&(U<8||15<U)?d:(z.window!==null&&z.wbits!==U&&(z.window=null),z.wrap=v,z.wbits=U,S(I))):d}function F(I,U){var v,z;return I?(z=new y,(I.state=z).window=null,(v=b(I,U))!==u&&(I.state=null),v):d}var N,V,O=!0;function W(I){if(O){var U;for(N=new r.Buf32(512),V=new r.Buf32(32),U=0;U<144;)I.lens[U++]=8;for(;U<256;)I.lens[U++]=9;for(;U<280;)I.lens[U++]=7;for(;U<288;)I.lens[U++]=8;for(a(c,I.lens,0,288,N,0,I.work,{bits:9}),U=0;U<32;)I.lens[U++]=5;a(l,I.lens,0,32,V,0,I.work,{bits:5}),O=!1}I.lencode=N,I.lenbits=9,I.distcode=V,I.distbits=5}function fe(I,U,v,z){var Ie,q=I.state;return q.window===null&&(q.wsize=1<<q.wbits,q.wnext=0,q.whave=0,q.window=new r.Buf8(q.wsize)),z>=q.wsize?(r.arraySet(q.window,U,v-q.wsize,q.wsize,0),q.wnext=0,q.whave=q.wsize):(z<(Ie=q.wsize-q.wnext)&&(Ie=z),r.arraySet(q.window,U,v-z,Ie,q.wnext),(z-=Ie)?(r.arraySet(q.window,U,v-z,z,0),q.wnext=z,q.whave=q.wsize):(q.wnext+=Ie,q.wnext===q.wsize&&(q.wnext=0),q.whave<q.wsize&&(q.whave+=Ie))),0}t.inflateReset=S,t.inflateReset2=b,t.inflateResetKeep=w,t.inflateInit=function(I){return F(I,15)},t.inflateInit2=F,t.inflate=function(I,U){var v,z,Ie,q,ke,K,ye,x,k,pe,ae,ee,ut,jt,Le,Ge,xt,dt,ir,zn,f,B,P,_,E=0,A=new r.Buf8(4),$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!I||!I.state||!I.output||!I.input&&I.avail_in!==0)return d;(v=I.state).mode===12&&(v.mode=13),ke=I.next_out,Ie=I.output,ye=I.avail_out,q=I.next_in,z=I.input,K=I.avail_in,x=v.hold,k=v.bits,pe=K,ae=ye,B=u;e:for(;;)switch(v.mode){case p:if(v.wrap===0){v.mode=13;break}for(;k<16;){if(K===0)break e;K--,x+=z[q++]<<k,k+=8}if(2&v.wrap&&x===35615){A[v.check=0]=255&x,A[1]=x>>>8&255,v.check=i(v.check,A,2,0),k=x=0,v.mode=2;break}if(v.flags=0,v.head&&(v.head.done=!1),!(1&v.wrap)||(((255&x)<<8)+(x>>8))%31){I.msg="incorrect header check",v.mode=30;break}if((15&x)!=8){I.msg="unknown compression method",v.mode=30;break}if(k-=4,f=8+(15&(x>>>=4)),v.wbits===0)v.wbits=f;else if(f>v.wbits){I.msg="invalid window size",v.mode=30;break}v.dmax=1<<f,I.adler=v.check=1,v.mode=512&x?10:12,k=x=0;break;case 2:for(;k<16;){if(K===0)break e;K--,x+=z[q++]<<k,k+=8}if(v.flags=x,(255&v.flags)!=8){I.msg="unknown compression method",v.mode=30;break}if(57344&v.flags){I.msg="unknown header flags set",v.mode=30;break}v.head&&(v.head.text=x>>8&1),512&v.flags&&(A[0]=255&x,A[1]=x>>>8&255,v.check=i(v.check,A,2,0)),k=x=0,v.mode=3;case 3:for(;k<32;){if(K===0)break e;K--,x+=z[q++]<<k,k+=8}v.head&&(v.head.time=x),512&v.flags&&(A[0]=255&x,A[1]=x>>>8&255,A[2]=x>>>16&255,A[3]=x>>>24&255,v.check=i(v.check,A,4,0)),k=x=0,v.mode=4;case 4:for(;k<16;){if(K===0)break e;K--,x+=z[q++]<<k,k+=8}v.head&&(v.head.xflags=255&x,v.head.os=x>>8),512&v.flags&&(A[0]=255&x,A[1]=x>>>8&255,v.check=i(v.check,A,2,0)),k=x=0,v.mode=5;case 5:if(1024&v.flags){for(;k<16;){if(K===0)break e;K--,x+=z[q++]<<k,k+=8}v.length=x,v.head&&(v.head.extra_len=x),512&v.flags&&(A[0]=255&x,A[1]=x>>>8&255,v.check=i(v.check,A,2,0)),k=x=0}else v.head&&(v.head.extra=null);v.mode=6;case 6:if(1024&v.flags&&(K<(ee=v.length)&&(ee=K),ee&&(v.head&&(f=v.head.extra_len-v.length,v.head.extra||(v.head.extra=new Array(v.head.extra_len)),r.arraySet(v.head.extra,z,q,ee,f)),512&v.flags&&(v.check=i(v.check,z,ee,q)),K-=ee,q+=ee,v.length-=ee),v.length))break e;v.length=0,v.mode=7;case 7:if(2048&v.flags){if(K===0)break e;for(ee=0;f=z[q+ee++],v.head&&f&&v.length<65536&&(v.head.name+=String.fromCharCode(f)),f&&ee<K;);if(512&v.flags&&(v.check=i(v.check,z,ee,q)),K-=ee,q+=ee,f)break e}else v.head&&(v.head.name=null);v.length=0,v.mode=8;case 8:if(4096&v.flags){if(K===0)break e;for(ee=0;f=z[q+ee++],v.head&&f&&v.length<65536&&(v.head.comment+=String.fromCharCode(f)),f&&ee<K;);if(512&v.flags&&(v.check=i(v.check,z,ee,q)),K-=ee,q+=ee,f)break e}else v.head&&(v.head.comment=null);v.mode=9;case 9:if(512&v.flags){for(;k<16;){if(K===0)break e;K--,x+=z[q++]<<k,k+=8}if(x!==(65535&v.check)){I.msg="header crc mismatch",v.mode=30;break}k=x=0}v.head&&(v.head.hcrc=v.flags>>9&1,v.head.done=!0),I.adler=v.check=0,v.mode=12;break;case 10:for(;k<32;){if(K===0)break e;K--,x+=z[q++]<<k,k+=8}I.adler=v.check=g(x),k=x=0,v.mode=11;case 11:if(v.havedict===0)return I.next_out=ke,I.avail_out=ye,I.next_in=q,I.avail_in=K,v.hold=x,v.bits=k,2;I.adler=v.check=1,v.mode=12;case 12:if(U===5||U===6)break e;case 13:if(v.last){x>>>=7&k,k-=7&k,v.mode=27;break}for(;k<3;){if(K===0)break e;K--,x+=z[q++]<<k,k+=8}switch(v.last=1&x,k-=1,3&(x>>>=1)){case 0:v.mode=14;break;case 1:if(W(v),v.mode=20,U!==6)break;x>>>=2,k-=2;break e;case 2:v.mode=17;break;case 3:I.msg="invalid block type",v.mode=30}x>>>=2,k-=2;break;case 14:for(x>>>=7&k,k-=7&k;k<32;){if(K===0)break e;K--,x+=z[q++]<<k,k+=8}if((65535&x)!=(x>>>16^65535)){I.msg="invalid stored block lengths",v.mode=30;break}if(v.length=65535&x,k=x=0,v.mode=15,U===6)break e;case 15:v.mode=16;case 16:if(ee=v.length){if(K<ee&&(ee=K),ye<ee&&(ee=ye),ee===0)break e;r.arraySet(Ie,z,q,ee,ke),K-=ee,q+=ee,ye-=ee,ke+=ee,v.length-=ee;break}v.mode=12;break;case 17:for(;k<14;){if(K===0)break e;K--,x+=z[q++]<<k,k+=8}if(v.nlen=257+(31&x),x>>>=5,k-=5,v.ndist=1+(31&x),x>>>=5,k-=5,v.ncode=4+(15&x),x>>>=4,k-=4,286<v.nlen||30<v.ndist){I.msg="too many length or distance symbols",v.mode=30;break}v.have=0,v.mode=18;case 18:for(;v.have<v.ncode;){for(;k<3;){if(K===0)break e;K--,x+=z[q++]<<k,k+=8}v.lens[$[v.have++]]=7&x,x>>>=3,k-=3}for(;v.have<19;)v.lens[$[v.have++]]=0;if(v.lencode=v.lendyn,v.lenbits=7,P={bits:v.lenbits},B=a(0,v.lens,0,19,v.lencode,0,v.work,P),v.lenbits=P.bits,B){I.msg="invalid code lengths set",v.mode=30;break}v.have=0,v.mode=19;case 19:for(;v.have<v.nlen+v.ndist;){for(;Ge=(E=v.lencode[x&(1<<v.lenbits)-1])>>>16&255,xt=65535&E,!((Le=E>>>24)<=k);){if(K===0)break e;K--,x+=z[q++]<<k,k+=8}if(xt<16)x>>>=Le,k-=Le,v.lens[v.have++]=xt;else{if(xt===16){for(_=Le+2;k<_;){if(K===0)break e;K--,x+=z[q++]<<k,k+=8}if(x>>>=Le,k-=Le,v.have===0){I.msg="invalid bit length repeat",v.mode=30;break}f=v.lens[v.have-1],ee=3+(3&x),x>>>=2,k-=2}else if(xt===17){for(_=Le+3;k<_;){if(K===0)break e;K--,x+=z[q++]<<k,k+=8}k-=Le,f=0,ee=3+(7&(x>>>=Le)),x>>>=3,k-=3}else{for(_=Le+7;k<_;){if(K===0)break e;K--,x+=z[q++]<<k,k+=8}k-=Le,f=0,ee=11+(127&(x>>>=Le)),x>>>=7,k-=7}if(v.have+ee>v.nlen+v.ndist){I.msg="invalid bit length repeat",v.mode=30;break}for(;ee--;)v.lens[v.have++]=f}}if(v.mode===30)break;if(v.lens[256]===0){I.msg="invalid code -- missing end-of-block",v.mode=30;break}if(v.lenbits=9,P={bits:v.lenbits},B=a(c,v.lens,0,v.nlen,v.lencode,0,v.work,P),v.lenbits=P.bits,B){I.msg="invalid literal/lengths set",v.mode=30;break}if(v.distbits=6,v.distcode=v.distdyn,P={bits:v.distbits},B=a(l,v.lens,v.nlen,v.ndist,v.distcode,0,v.work,P),v.distbits=P.bits,B){I.msg="invalid distances set",v.mode=30;break}if(v.mode=20,U===6)break e;case 20:v.mode=21;case 21:if(6<=K&&258<=ye){I.next_out=ke,I.avail_out=ye,I.next_in=q,I.avail_in=K,v.hold=x,v.bits=k,s(I,ae),ke=I.next_out,Ie=I.output,ye=I.avail_out,q=I.next_in,z=I.input,K=I.avail_in,x=v.hold,k=v.bits,v.mode===12&&(v.back=-1);break}for(v.back=0;Ge=(E=v.lencode[x&(1<<v.lenbits)-1])>>>16&255,xt=65535&E,!((Le=E>>>24)<=k);){if(K===0)break e;K--,x+=z[q++]<<k,k+=8}if(Ge&&!(240&Ge)){for(dt=Le,ir=Ge,zn=xt;Ge=(E=v.lencode[zn+((x&(1<<dt+ir)-1)>>dt)])>>>16&255,xt=65535&E,!(dt+(Le=E>>>24)<=k);){if(K===0)break e;K--,x+=z[q++]<<k,k+=8}x>>>=dt,k-=dt,v.back+=dt}if(x>>>=Le,k-=Le,v.back+=Le,v.length=xt,Ge===0){v.mode=26;break}if(32&Ge){v.back=-1,v.mode=12;break}if(64&Ge){I.msg="invalid literal/length code",v.mode=30;break}v.extra=15&Ge,v.mode=22;case 22:if(v.extra){for(_=v.extra;k<_;){if(K===0)break e;K--,x+=z[q++]<<k,k+=8}v.length+=x&(1<<v.extra)-1,x>>>=v.extra,k-=v.extra,v.back+=v.extra}v.was=v.length,v.mode=23;case 23:for(;Ge=(E=v.distcode[x&(1<<v.distbits)-1])>>>16&255,xt=65535&E,!((Le=E>>>24)<=k);){if(K===0)break e;K--,x+=z[q++]<<k,k+=8}if(!(240&Ge)){for(dt=Le,ir=Ge,zn=xt;Ge=(E=v.distcode[zn+((x&(1<<dt+ir)-1)>>dt)])>>>16&255,xt=65535&E,!(dt+(Le=E>>>24)<=k);){if(K===0)break e;K--,x+=z[q++]<<k,k+=8}x>>>=dt,k-=dt,v.back+=dt}if(x>>>=Le,k-=Le,v.back+=Le,64&Ge){I.msg="invalid distance code",v.mode=30;break}v.offset=xt,v.extra=15&Ge,v.mode=24;case 24:if(v.extra){for(_=v.extra;k<_;){if(K===0)break e;K--,x+=z[q++]<<k,k+=8}v.offset+=x&(1<<v.extra)-1,x>>>=v.extra,k-=v.extra,v.back+=v.extra}if(v.offset>v.dmax){I.msg="invalid distance too far back",v.mode=30;break}v.mode=25;case 25:if(ye===0)break e;if(ee=ae-ye,v.offset>ee){if((ee=v.offset-ee)>v.whave&&v.sane){I.msg="invalid distance too far back",v.mode=30;break}ut=ee>v.wnext?(ee-=v.wnext,v.wsize-ee):v.wnext-ee,ee>v.length&&(ee=v.length),jt=v.window}else jt=Ie,ut=ke-v.offset,ee=v.length;for(ye<ee&&(ee=ye),ye-=ee,v.length-=ee;Ie[ke++]=jt[ut++],--ee;);v.length===0&&(v.mode=21);break;case 26:if(ye===0)break e;Ie[ke++]=v.length,ye--,v.mode=21;break;case 27:if(v.wrap){for(;k<32;){if(K===0)break e;K--,x|=z[q++]<<k,k+=8}if(ae-=ye,I.total_out+=ae,v.total+=ae,ae&&(I.adler=v.check=v.flags?i(v.check,Ie,ae,ke-ae):o(v.check,Ie,ae,ke-ae)),ae=ye,(v.flags?x:g(x))!==v.check){I.msg="incorrect data check",v.mode=30;break}k=x=0}v.mode=28;case 28:if(v.wrap&&v.flags){for(;k<32;){if(K===0)break e;K--,x+=z[q++]<<k,k+=8}if(x!==(4294967295&v.total)){I.msg="incorrect length check",v.mode=30;break}k=x=0}v.mode=29;case 29:B=1;break e;case 30:B=-3;break e;case 31:return-4;case 32:default:return d}return I.next_out=ke,I.avail_out=ye,I.next_in=q,I.avail_in=K,v.hold=x,v.bits=k,(v.wsize||ae!==I.avail_out&&v.mode<30&&(v.mode<27||U!==4))&&fe(I,I.output,I.next_out,ae-I.avail_out)?(v.mode=31,-4):(pe-=I.avail_in,ae-=I.avail_out,I.total_in+=pe,I.total_out+=ae,v.total+=ae,v.wrap&&ae&&(I.adler=v.check=v.flags?i(v.check,Ie,ae,I.next_out-ae):o(v.check,Ie,ae,I.next_out-ae)),I.data_type=v.bits+(v.last?64:0)+(v.mode===12?128:0)+(v.mode===20||v.mode===15?256:0),(pe==0&&ae===0||U===4)&&B===u&&(B=-5),B)},t.inflateEnd=function(I){if(!I||!I.state)return d;var U=I.state;return U.window&&(U.window=null),I.state=null,u},t.inflateGetHeader=function(I,U){var v;return I&&I.state&&2&(v=I.state).wrap?((v.head=U).done=!1,u):d},t.inflateSetDictionary=function(I,U){var v,z=U.length;return I&&I.state?(v=I.state).wrap!==0&&v.mode!==11?d:v.mode===11&&o(1,U,z,0)!==v.check?-3:fe(I,U,z,z)?(v.mode=31,-4):(v.havedict=1,u):d},t.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,e,t){"use strict";var r=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(c,l,u,d,p,h,m,g){var y,w,S,b,F,N,V,O,W,fe=g.bits,I=0,U=0,v=0,z=0,Ie=0,q=0,ke=0,K=0,ye=0,x=0,k=null,pe=0,ae=new r.Buf16(16),ee=new r.Buf16(16),ut=null,jt=0;for(I=0;I<=15;I++)ae[I]=0;for(U=0;U<d;U++)ae[l[u+U]]++;for(Ie=fe,z=15;1<=z&&ae[z]===0;z--);if(z<Ie&&(Ie=z),z===0)return p[h++]=20971520,p[h++]=20971520,g.bits=1,0;for(v=1;v<z&&ae[v]===0;v++);for(Ie<v&&(Ie=v),I=K=1;I<=15;I++)if(K<<=1,(K-=ae[I])<0)return-1;if(0<K&&(c===0||z!==1))return-1;for(ee[1]=0,I=1;I<15;I++)ee[I+1]=ee[I]+ae[I];for(U=0;U<d;U++)l[u+U]!==0&&(m[ee[l[u+U]]++]=U);if(N=c===0?(k=ut=m,19):c===1?(k=o,pe-=257,ut=i,jt-=257,256):(k=s,ut=a,-1),I=v,F=h,ke=U=x=0,S=-1,b=(ye=1<<(q=Ie))-1,c===1&&852<ye||c===2&&592<ye)return 1;for(;;){for(V=I-ke,W=m[U]<N?(O=0,m[U]):m[U]>N?(O=ut[jt+m[U]],k[pe+m[U]]):(O=96,0),y=1<<I-ke,v=w=1<<q;p[F+(x>>ke)+(w-=y)]=V<<24|O<<16|W|0,w!==0;);for(y=1<<I-1;x&y;)y>>=1;if(y!==0?(x&=y-1,x+=y):x=0,U++,--ae[I]==0){if(I===z)break;I=l[u+m[U]]}if(Ie<I&&(x&b)!==S){for(ke===0&&(ke=Ie),F+=v,K=1<<(q=I-ke);q+ke<z&&!((K-=ae[q+ke])<=0);)q++,K<<=1;if(ye+=1<<q,c===1&&852<ye||c===2&&592<ye)return 1;p[S=x&b]=Ie<<24|q<<16|F-h|0}}return x!==0&&(p[F+x]=I-ke<<24|64<<16|0),g.bits=Ie,0}},{"../utils/common":41}],51:[function(n,e,t){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,e,t){"use strict";var r=n("../utils/common"),o=0,i=1;function s(E){for(var A=E.length;0<=--A;)E[A]=0}var a=0,c=29,l=256,u=l+1+c,d=30,p=19,h=2*u+1,m=15,g=16,y=7,w=256,S=16,b=17,F=18,N=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],V=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],fe=new Array(2*(u+2));s(fe);var I=new Array(2*d);s(I);var U=new Array(512);s(U);var v=new Array(256);s(v);var z=new Array(c);s(z);var Ie,q,ke,K=new Array(d);function ye(E,A,$,G,M){this.static_tree=E,this.extra_bits=A,this.extra_base=$,this.elems=G,this.max_length=M,this.has_stree=E&&E.length}function x(E,A){this.dyn_tree=E,this.max_code=0,this.stat_desc=A}function k(E){return E<256?U[E]:U[256+(E>>>7)]}function pe(E,A){E.pending_buf[E.pending++]=255&A,E.pending_buf[E.pending++]=A>>>8&255}function ae(E,A,$){E.bi_valid>g-$?(E.bi_buf|=A<<E.bi_valid&65535,pe(E,E.bi_buf),E.bi_buf=A>>g-E.bi_valid,E.bi_valid+=$-g):(E.bi_buf|=A<<E.bi_valid&65535,E.bi_valid+=$)}function ee(E,A,$){ae(E,$[2*A],$[2*A+1])}function ut(E,A){for(var $=0;$|=1&E,E>>>=1,$<<=1,0<--A;);return $>>>1}function jt(E,A,$){var G,M,Y=new Array(m+1),ce=0;for(G=1;G<=m;G++)Y[G]=ce=ce+$[G-1]<<1;for(M=0;M<=A;M++){var Z=E[2*M+1];Z!==0&&(E[2*M]=ut(Y[Z]++,Z))}}function Le(E){var A;for(A=0;A<u;A++)E.dyn_ltree[2*A]=0;for(A=0;A<d;A++)E.dyn_dtree[2*A]=0;for(A=0;A<p;A++)E.bl_tree[2*A]=0;E.dyn_ltree[2*w]=1,E.opt_len=E.static_len=0,E.last_lit=E.matches=0}function Ge(E){8<E.bi_valid?pe(E,E.bi_buf):0<E.bi_valid&&(E.pending_buf[E.pending++]=E.bi_buf),E.bi_buf=0,E.bi_valid=0}function xt(E,A,$,G){var M=2*A,Y=2*$;return E[M]<E[Y]||E[M]===E[Y]&&G[A]<=G[$]}function dt(E,A,$){for(var G=E.heap[$],M=$<<1;M<=E.heap_len&&(M<E.heap_len&&xt(A,E.heap[M+1],E.heap[M],E.depth)&&M++,!xt(A,G,E.heap[M],E.depth));)E.heap[$]=E.heap[M],$=M,M<<=1;E.heap[$]=G}function ir(E,A,$){var G,M,Y,ce,Z=0;if(E.last_lit!==0)for(;G=E.pending_buf[E.d_buf+2*Z]<<8|E.pending_buf[E.d_buf+2*Z+1],M=E.pending_buf[E.l_buf+Z],Z++,G===0?ee(E,M,A):(ee(E,(Y=v[M])+l+1,A),(ce=N[Y])!==0&&ae(E,M-=z[Y],ce),ee(E,Y=k(--G),$),(ce=V[Y])!==0&&ae(E,G-=K[Y],ce)),Z<E.last_lit;);ee(E,w,A)}function zn(E,A){var $,G,M,Y=A.dyn_tree,ce=A.stat_desc.static_tree,Z=A.stat_desc.has_stree,he=A.stat_desc.elems,Ze=-1;for(E.heap_len=0,E.heap_max=h,$=0;$<he;$++)Y[2*$]!==0?(E.heap[++E.heap_len]=Ze=$,E.depth[$]=0):Y[2*$+1]=0;for(;E.heap_len<2;)Y[2*(M=E.heap[++E.heap_len]=Ze<2?++Ze:0)]=1,E.depth[M]=0,E.opt_len--,Z&&(E.static_len-=ce[2*M+1]);for(A.max_code=Ze,$=E.heap_len>>1;1<=$;$--)dt(E,Y,$);for(M=he;$=E.heap[1],E.heap[1]=E.heap[E.heap_len--],dt(E,Y,1),G=E.heap[1],E.heap[--E.heap_max]=$,E.heap[--E.heap_max]=G,Y[2*M]=Y[2*$]+Y[2*G],E.depth[M]=(E.depth[$]>=E.depth[G]?E.depth[$]:E.depth[G])+1,Y[2*$+1]=Y[2*G+1]=M,E.heap[1]=M++,dt(E,Y,1),2<=E.heap_len;);E.heap[--E.heap_max]=E.heap[1],function(Ue,An){var fc,sr,pc,ht,Du,Rp,kr=An.dyn_tree,xC=An.max_code,DA=An.stat_desc.static_tree,MA=An.stat_desc.has_stree,RA=An.stat_desc.extra_bits,OC=An.stat_desc.extra_base,gc=An.stat_desc.max_length,Mu=0;for(ht=0;ht<=m;ht++)Ue.bl_count[ht]=0;for(kr[2*Ue.heap[Ue.heap_max]+1]=0,fc=Ue.heap_max+1;fc<h;fc++)gc<(ht=kr[2*kr[2*(sr=Ue.heap[fc])+1]+1]+1)&&(ht=gc,Mu++),kr[2*sr+1]=ht,xC<sr||(Ue.bl_count[ht]++,Du=0,OC<=sr&&(Du=RA[sr-OC]),Rp=kr[2*sr],Ue.opt_len+=Rp*(ht+Du),MA&&(Ue.static_len+=Rp*(DA[2*sr+1]+Du)));if(Mu!==0){do{for(ht=gc-1;Ue.bl_count[ht]===0;)ht--;Ue.bl_count[ht]--,Ue.bl_count[ht+1]+=2,Ue.bl_count[gc]--,Mu-=2}while(0<Mu);for(ht=gc;ht!==0;ht--)for(sr=Ue.bl_count[ht];sr!==0;)xC<(pc=Ue.heap[--fc])||(kr[2*pc+1]!==ht&&(Ue.opt_len+=(ht-kr[2*pc+1])*kr[2*pc],kr[2*pc+1]=ht),sr--)}}(E,A),jt(Y,Ze,E.bl_count)}function f(E,A,$){var G,M,Y=-1,ce=A[1],Z=0,he=7,Ze=4;for(ce===0&&(he=138,Ze=3),A[2*($+1)+1]=65535,G=0;G<=$;G++)M=ce,ce=A[2*(G+1)+1],++Z<he&&M===ce||(Z<Ze?E.bl_tree[2*M]+=Z:M!==0?(M!==Y&&E.bl_tree[2*M]++,E.bl_tree[2*S]++):Z<=10?E.bl_tree[2*b]++:E.bl_tree[2*F]++,Y=M,Ze=(Z=0)===ce?(he=138,3):M===ce?(he=6,3):(he=7,4))}function B(E,A,$){var G,M,Y=-1,ce=A[1],Z=0,he=7,Ze=4;for(ce===0&&(he=138,Ze=3),G=0;G<=$;G++)if(M=ce,ce=A[2*(G+1)+1],!(++Z<he&&M===ce)){if(Z<Ze)for(;ee(E,M,E.bl_tree),--Z!=0;);else M!==0?(M!==Y&&(ee(E,M,E.bl_tree),Z--),ee(E,S,E.bl_tree),ae(E,Z-3,2)):Z<=10?(ee(E,b,E.bl_tree),ae(E,Z-3,3)):(ee(E,F,E.bl_tree),ae(E,Z-11,7));Y=M,Ze=(Z=0)===ce?(he=138,3):M===ce?(he=6,3):(he=7,4)}}s(K);var P=!1;function _(E,A,$,G){ae(E,(a<<1)+(G?1:0),3),function(M,Y,ce,Z){Ge(M),Z&&(pe(M,ce),pe(M,~ce)),r.arraySet(M.pending_buf,M.window,Y,ce,M.pending),M.pending+=ce}(E,A,$,!0)}t._tr_init=function(E){P||(function(){var A,$,G,M,Y,ce=new Array(m+1);for(M=G=0;M<c-1;M++)for(z[M]=G,A=0;A<1<<N[M];A++)v[G++]=M;for(v[G-1]=M,M=Y=0;M<16;M++)for(K[M]=Y,A=0;A<1<<V[M];A++)U[Y++]=M;for(Y>>=7;M<d;M++)for(K[M]=Y<<7,A=0;A<1<<V[M]-7;A++)U[256+Y++]=M;for($=0;$<=m;$++)ce[$]=0;for(A=0;A<=143;)fe[2*A+1]=8,A++,ce[8]++;for(;A<=255;)fe[2*A+1]=9,A++,ce[9]++;for(;A<=279;)fe[2*A+1]=7,A++,ce[7]++;for(;A<=287;)fe[2*A+1]=8,A++,ce[8]++;for(jt(fe,u+1,ce),A=0;A<d;A++)I[2*A+1]=5,I[2*A]=ut(A,5);Ie=new ye(fe,N,l+1,u,m),q=new ye(I,V,0,d,m),ke=new ye(new Array(0),O,0,p,y)}(),P=!0),E.l_desc=new x(E.dyn_ltree,Ie),E.d_desc=new x(E.dyn_dtree,q),E.bl_desc=new x(E.bl_tree,ke),E.bi_buf=0,E.bi_valid=0,Le(E)},t._tr_stored_block=_,t._tr_flush_block=function(E,A,$,G){var M,Y,ce=0;0<E.level?(E.strm.data_type===2&&(E.strm.data_type=function(Z){var he,Ze=4093624447;for(he=0;he<=31;he++,Ze>>>=1)if(1&Ze&&Z.dyn_ltree[2*he]!==0)return o;if(Z.dyn_ltree[18]!==0||Z.dyn_ltree[20]!==0||Z.dyn_ltree[26]!==0)return i;for(he=32;he<l;he++)if(Z.dyn_ltree[2*he]!==0)return i;return o}(E)),zn(E,E.l_desc),zn(E,E.d_desc),ce=function(Z){var he;for(f(Z,Z.dyn_ltree,Z.l_desc.max_code),f(Z,Z.dyn_dtree,Z.d_desc.max_code),zn(Z,Z.bl_desc),he=p-1;3<=he&&Z.bl_tree[2*W[he]+1]===0;he--);return Z.opt_len+=3*(he+1)+5+5+4,he}(E),M=E.opt_len+3+7>>>3,(Y=E.static_len+3+7>>>3)<=M&&(M=Y)):M=Y=$+5,$+4<=M&&A!==-1?_(E,A,$,G):E.strategy===4||Y===M?(ae(E,2+(G?1:0),3),ir(E,fe,I)):(ae(E,4+(G?1:0),3),function(Z,he,Ze,Ue){var An;for(ae(Z,he-257,5),ae(Z,Ze-1,5),ae(Z,Ue-4,4),An=0;An<Ue;An++)ae(Z,Z.bl_tree[2*W[An]+1],3);B(Z,Z.dyn_ltree,he-1),B(Z,Z.dyn_dtree,Ze-1)}(E,E.l_desc.max_code+1,E.d_desc.max_code+1,ce+1),ir(E,E.dyn_ltree,E.dyn_dtree)),Le(E),G&&Ge(E)},t._tr_tally=function(E,A,$){return E.pending_buf[E.d_buf+2*E.last_lit]=A>>>8&255,E.pending_buf[E.d_buf+2*E.last_lit+1]=255&A,E.pending_buf[E.l_buf+E.last_lit]=255&$,E.last_lit++,A===0?E.dyn_ltree[2*$]++:(E.matches++,A--,E.dyn_ltree[2*(v[$]+l+1)]++,E.dyn_dtree[2*k(A)]++),E.last_lit===E.lit_bufsize-1},t._tr_align=function(E){ae(E,2,3),ee(E,w,fe),function(A){A.bi_valid===16?(pe(A,A.bi_buf),A.bi_buf=0,A.bi_valid=0):8<=A.bi_valid&&(A.pending_buf[A.pending++]=255&A.bi_buf,A.bi_buf>>=8,A.bi_valid-=8)}(E)}},{"../utils/common":41}],53:[function(n,e,t){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,e,t){(function(r){(function(o,i){"use strict";if(!o.setImmediate){var s,a,c,l,u=1,d={},p=!1,h=o.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(o);m=m&&m.setTimeout?m:o,s={}.toString.call(o.process)==="[object process]"?function(S){process.nextTick(function(){y(S)})}:function(){if(o.postMessage&&!o.importScripts){var S=!0,b=o.onmessage;return o.onmessage=function(){S=!1},o.postMessage("","*"),o.onmessage=b,S}}()?(l="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",w,!1):o.attachEvent("onmessage",w),function(S){o.postMessage(l+S,"*")}):o.MessageChannel?((c=new MessageChannel).port1.onmessage=function(S){y(S.data)},function(S){c.port2.postMessage(S)}):h&&"onreadystatechange"in h.createElement("script")?(a=h.documentElement,function(S){var b=h.createElement("script");b.onreadystatechange=function(){y(S),b.onreadystatechange=null,a.removeChild(b),b=null},a.appendChild(b)}):function(S){setTimeout(y,0,S)},m.setImmediate=function(S){typeof S!="function"&&(S=new Function(""+S));for(var b=new Array(arguments.length-1),F=0;F<b.length;F++)b[F]=arguments[F+1];var N={callback:S,args:b};return d[u]=N,s(u),u++},m.clearImmediate=g}function g(S){delete d[S]}function y(S){if(p)setTimeout(y,0,S);else{var b=d[S];if(b){p=!0;try{(function(F){var N=F.callback,V=F.args;switch(V.length){case 0:N();break;case 1:N(V[0]);break;case 2:N(V[0],V[1]);break;case 3:N(V[0],V[1],V[2]);break;default:N.apply(i,V)}})(b)}finally{g(S),p=!1}}}}function w(S){S.source===o&&typeof S.data=="string"&&S.data.indexOf(l)===0&&y(+S.data.slice(l.length))}})(typeof self>"u"?r===void 0?this:r:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})});function BC(n,e){return Object.is(n,e)}var It=null,Ru=!1,ku=1,Nr=Symbol("SIGNAL");function je(n){let e=It;return It=n,e}function VC(){return It}var Cc={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function xp(n){if(Ru)throw new Error("");if(It===null)return;It.consumerOnSignalRead(n);let e=It.nextProducerIndex++;if(Pu(It),e<It.producerNode.length&&It.producerNode[e]!==n&&yc(It)){let t=It.producerNode[e];Ou(t,It.producerIndexOfThis[e])}It.producerNode[e]!==n&&(It.producerNode[e]=n,It.producerIndexOfThis[e]=yc(It)?$C(n,It,e):0),It.producerLastReadVersion[e]=n.version}function kA(){ku++}function HC(n){if(!(yc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===ku)){if(!n.producerMustRecompute(n)&&!Pp(n)){n.dirty=!1,n.lastCleanEpoch=ku;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=ku}}function jC(n){if(n.liveConsumerNode===void 0)return;let e=Ru;Ru=!0;try{for(let t of n.liveConsumerNode)t.dirty||NA(t)}finally{Ru=e}}function zC(){return It?.consumerAllowSignalWrites!==!1}function NA(n){n.dirty=!0,jC(n),n.consumerMarkedDirty?.(n)}function xu(n){return n&&(n.nextProducerIndex=0),je(n)}function Op(n,e){if(je(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(yc(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Ou(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Pp(n){Pu(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(HC(t),r!==t.version))return!0}return!1}function Fp(n){if(Pu(n),yc(n))for(let e=0;e<n.producerNode.length;e++)Ou(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function $C(n,e,t){if(GC(n),n.liveConsumerNode.length===0&&qC(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=$C(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Ou(n,e){if(GC(n),n.liveConsumerNode.length===1&&qC(n))for(let r=0;r<n.producerNode.length;r++)Ou(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],o=n.liveConsumerNode[e];Pu(o),o.producerIndexOfThis[r]=e}}function yc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Pu(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function GC(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function qC(n){return n.producerNode!==void 0}function KC(n){let e=Object.create(xA);e.computation=n;let t=()=>{if(HC(e),xp(e),e.value===Nu)throw e.error;return e.value};return t[Nr]=e,t}var kp=Symbol("UNSET"),Np=Symbol("COMPUTING"),Nu=Symbol("ERRORED"),xA=J(D({},Cc),{value:kp,dirty:!0,error:null,equal:BC,producerMustRecompute(n){return n.value===kp||n.value===Np},producerRecomputeValue(n){if(n.value===Np)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Np;let t=xu(n),r;try{r=n.computation()}catch(o){r=Nu,n.error=o}finally{Op(n,t)}if(e!==kp&&e!==Nu&&r!==Nu&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function OA(){throw new Error}var WC=OA;function YC(){WC()}function QC(n){WC=n}var PA=null;function ZC(n){let e=Object.create(XC);e.value=n;let t=()=>(xp(e),e.value);return t[Nr]=e,t}function Lp(n,e){zC()||YC(),n.equal(n.value,e)||(n.value=e,FA(n))}function JC(n,e){zC()||YC(),Lp(n,e(n.value))}var XC=J(D({},Cc),{equal:BC,value:void 0});function FA(n){n.version++,kA(),jC(n),PA?.()}function be(n){return typeof n=="function"}function ys(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Fu=ys(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ec(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var yt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let i of t)i.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(be(r))try{r()}catch(i){e=i instanceof Fu?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{eE(i)}catch(s){e=e??[],s instanceof Fu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Fu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)eE(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ec(t,e)}remove(e){let{_finalizers:t}=this;t&&Ec(t,e),e instanceof n&&e._removeParent(this)}};yt.EMPTY=(()=>{let n=new yt;return n.closed=!0,n})();var Up=yt.EMPTY;function Lu(n){return n instanceof yt||n&&"closed"in n&&be(n.remove)&&be(n.add)&&be(n.unsubscribe)}function eE(n){be(n)?n():n.unsubscribe()}var Gn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Cs={setTimeout(n,e,...t){let{delegate:r}=Cs;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Cs;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Uu(n){Cs.setTimeout(()=>{let{onUnhandledError:e}=Gn;if(e)e(n);else throw n})}function wc(){}var tE=Bp("C",void 0,void 0);function nE(n){return Bp("E",void 0,n)}function rE(n){return Bp("N",n,void 0)}function Bp(n,e,t){return{kind:n,value:e,error:t}}var ui=null;function Es(n){if(Gn.useDeprecatedSynchronousErrorHandling){let e=!ui;if(e&&(ui={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ui;if(ui=null,t)throw r}}else n()}function oE(n){Gn.useDeprecatedSynchronousErrorHandling&&ui&&(ui.errorThrown=!0,ui.error=n)}var di=class extends yt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Lu(e)&&e.add(this)):this.destination=BA}static create(e,t,r){return new ws(e,t,r)}next(e){this.isStopped?Hp(rE(e),this):this._next(e)}error(e){this.isStopped?Hp(nE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Hp(tE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},LA=Function.prototype.bind;function Vp(n,e){return LA.call(n,e)}var jp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Bu(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Bu(r)}else Bu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Bu(t)}}},ws=class extends di{constructor(e,t,r){super();let o;if(be(e)||!e)o={next:e??void 0,error:t??void 0,complete:r??void 0};else{let i;this&&Gn.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&Vp(e.next,i),error:e.error&&Vp(e.error,i),complete:e.complete&&Vp(e.complete,i)}):o=e}this.destination=new jp(o)}};function Bu(n){Gn.useDeprecatedSynchronousErrorHandling?oE(n):Uu(n)}function UA(n){throw n}function Hp(n,e){let{onStoppedNotification:t}=Gn;t&&Cs.setTimeout(()=>t(n,e))}var BA={closed:!0,next:wc,error:UA,complete:wc};var _s=typeof Symbol=="function"&&Symbol.observable||"@@observable";function gn(n){return n}function zp(...n){return $p(n)}function $p(n){return n.length===0?gn:n.length===1?n[0]:function(t){return n.reduce((r,o)=>o(r),t)}}var Oe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,o){let i=HA(t)?t:new ws(t,r,o);return Es(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=iE(r),new r((o,i)=>{let s=new ws({next:a=>{try{t(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[_s](){return this}pipe(...t){return $p(t)(this)}toPromise(t){return t=iE(t),new t((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return n.create=e=>new n(e),n})();function iE(n){var e;return(e=n??Gn.Promise)!==null&&e!==void 0?e:Promise}function VA(n){return n&&be(n.next)&&be(n.error)&&be(n.complete)}function HA(n){return n&&n instanceof di||VA(n)&&Lu(n)}function Gp(n){return be(n?.lift)}function Be(n){return e=>{if(Gp(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Fe(n,e,t,r,o){return new qp(n,e,t,r,o)}var qp=class extends di{constructor(e,t,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Is(){return Be((n,e)=>{let t=null;n._refCount++;let r=Fe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let o=n._connection,i=t;t=null,o&&(!i||o===i)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var bs=class extends Oe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Gp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new yt;let t=this.getSubject();e.add(this.source.subscribe(Fe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=yt.EMPTY)}return e}refCount(){return Is()(this)}};var sE=ys(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ft=(()=>{class n extends Oe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Vu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new sE}next(t){Es(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Es(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Es(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:o,observers:i}=this;return r||o?Up:(this.currentObservers=null,i.push(t),new yt(()=>{this.currentObservers=null,Ec(i,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:o,isStopped:i}=this;r?t.error(o):i&&t.complete()}asObservable(){let t=new Oe;return t.source=this,t}}return n.create=(e,t)=>new Vu(e,t),n})(),Vu=class extends ft{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Up}};var pt=class extends ft{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Kp={now(){return(Kp.delegate||Date).now()},delegate:void 0};var _c=class extends ft{constructor(e=1/0,t=1/0,r=Kp){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:i,_windowTime:s}=this;t||(r.push(e),!o&&r.push(i.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,i=o.slice();for(let s=0;s<i.length&&!e.closed;s+=r?1:2)e.next(i[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,i=(o?1:2)*e;if(e<1/0&&i<r.length&&r.splice(0,r.length-i),!o){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var sn=new Oe(n=>n.complete());function aE(n){return n&&be(n.schedule)}function cE(n){return n[n.length-1]}function Hu(n){return be(cE(n))?n.pop():void 0}function yo(n){return aE(cE(n))?n.pop():void 0}function uE(n,e,t,r){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?i(u.value):o(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function lE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function hi(n){return this instanceof hi?(this.v=n,this):new hi(n)}function dE(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(h){return function(m){return Promise.resolve(m).then(h,d)}}function a(h,m){r[h]&&(o[h]=function(g){return new Promise(function(y,w){i.push([h,g,y,w])>1||c(h,g)})},m&&(o[h]=m(o[h])))}function c(h,m){try{l(r[h](m))}catch(g){p(i[0][3],g)}}function l(h){h.value instanceof hi?Promise.resolve(h.value.v).then(u,d):p(i[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function p(h,m){h(m),i.shift(),i.length&&c(i[0][0],i[0][1])}}function hE(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof lE=="function"?lE(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(s){return new Promise(function(a,c){s=n[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},s)}}var ju=n=>n&&typeof n.length=="number"&&typeof n!="function";function zu(n){return be(n?.then)}function $u(n){return be(n[_s])}function Gu(n){return Symbol.asyncIterator&&be(n?.[Symbol.asyncIterator])}function qu(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function jA(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ku=jA();function Wu(n){return be(n?.[Ku])}function Yu(n){return dE(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:o}=yield hi(t.read());if(o)return yield hi(void 0);yield yield hi(r)}}finally{t.releaseLock()}})}function Qu(n){return be(n?.getReader)}function Ct(n){if(n instanceof Oe)return n;if(n!=null){if($u(n))return zA(n);if(ju(n))return $A(n);if(zu(n))return GA(n);if(Gu(n))return fE(n);if(Wu(n))return qA(n);if(Qu(n))return KA(n)}throw qu(n)}function zA(n){return new Oe(e=>{let t=n[_s]();if(be(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function $A(n){return new Oe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function GA(n){return new Oe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Uu)})}function qA(n){return new Oe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function fE(n){return new Oe(e=>{WA(n,e).catch(t=>e.error(t))})}function KA(n){return fE(Yu(n))}function WA(n,e){var t,r,o,i;return uE(this,void 0,void 0,function*(){try{for(t=hE(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=t.return)&&(yield i.call(t))}finally{if(o)throw o.error}}e.complete()})}function an(n,e,t,r=0,o=!1){let i=e.schedule(function(){t(),o?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(i),!o)return i}function Zu(n,e=0){return Be((t,r)=>{t.subscribe(Fe(r,o=>an(r,n,()=>r.next(o),e),()=>an(r,n,()=>r.complete(),e),o=>an(r,n,()=>r.error(o),e)))})}function Ju(n,e=0){return Be((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function pE(n,e){return Ct(n).pipe(Ju(e),Zu(e))}function gE(n,e){return Ct(n).pipe(Ju(e),Zu(e))}function mE(n,e){return new Oe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function vE(n,e){return new Oe(t=>{let r;return an(t,e,()=>{r=n[Ku](),an(t,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){t.error(s);return}i?t.complete():t.next(o)},0,!0)}),()=>be(r?.return)&&r.return()})}function Xu(n,e){if(!n)throw new Error("Iterable cannot be null");return new Oe(t=>{an(t,e,()=>{let r=n[Symbol.asyncIterator]();an(t,e,()=>{r.next().then(o=>{o.done?t.complete():t.next(o.value)})},0,!0)})})}function yE(n,e){return Xu(Yu(n),e)}function CE(n,e){if(n!=null){if($u(n))return pE(n,e);if(ju(n))return mE(n,e);if(zu(n))return gE(n,e);if(Gu(n))return Xu(n,e);if(Wu(n))return vE(n,e);if(Qu(n))return yE(n,e)}throw qu(n)}function De(n,e){return e?CE(n,e):Ct(n)}function le(...n){let e=yo(n);return De(n,e)}function cr(n,e){let t=be(n)?n:()=>n,r=o=>o.error(t());return new Oe(e?o=>e.schedule(r,0,o):r)}function Wp(n){return!!n&&(n instanceof Oe||be(n.lift)&&be(n.subscribe))}var xr=ys(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function me(n,e){return Be((t,r)=>{let o=0;t.subscribe(Fe(r,i=>{r.next(n.call(e,i,o++))}))})}var{isArray:YA}=Array;function QA(n,e){return YA(e)?n(...e):n(e)}function ed(n){return me(e=>QA(n,e))}var{isArray:ZA}=Array,{getPrototypeOf:JA,prototype:XA,keys:eD}=Object;function td(n){if(n.length===1){let e=n[0];if(ZA(e))return{args:e,keys:null};if(tD(e)){let t=eD(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function tD(n){return n&&typeof n=="object"&&JA(n)===XA}function nd(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}function Ic(...n){let e=yo(n),t=Hu(n),{args:r,keys:o}=td(n);if(r.length===0)return De([],e);let i=new Oe(nD(r,e,o?s=>nd(o,s):gn));return t?i.pipe(ed(t)):i}function nD(n,e,t=gn){return r=>{EE(e,()=>{let{length:o}=n,i=new Array(o),s=o,a=o;for(let c=0;c<o;c++)EE(e,()=>{let l=De(n[c],e),u=!1;l.subscribe(Fe(r,d=>{i[c]=d,u||(u=!0,a--),a||r.next(t(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}function EE(n,e,t){n?an(t,n,e):e()}function wE(n,e,t,r,o,i,s,a){let c=[],l=0,u=0,d=!1,p=()=>{d&&!c.length&&!l&&e.complete()},h=g=>l<r?m(g):c.push(g),m=g=>{i&&e.next(g),l++;let y=!1;Ct(t(g,u++)).subscribe(Fe(e,w=>{o?.(w),i?h(w):e.next(w)},()=>{y=!0},void 0,()=>{if(y)try{for(l--;c.length&&l<r;){let w=c.shift();s?an(e,s,()=>m(w)):m(w)}p()}catch(w){e.error(w)}}))};return n.subscribe(Fe(e,h,()=>{d=!0,p()})),()=>{a?.()}}function Et(n,e,t=1/0){return be(e)?Et((r,o)=>me((i,s)=>e(r,i,o,s))(Ct(n(r,o))),t):(typeof e=="number"&&(t=e),Be((r,o)=>wE(r,o,n,t)))}function Ts(n=1/0){return Et(gn,n)}function _E(){return Ts(1)}function Ss(...n){return _E()(De(n,yo(n)))}function rd(n){return new Oe(e=>{Ct(n()).subscribe(e)})}function Yp(...n){let e=Hu(n),{args:t,keys:r}=td(n),o=new Oe(i=>{let{length:s}=t;if(!s){i.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;Ct(t[u]).subscribe(Fe(i,p=>{d||(d=!0,l--),a[u]=p},()=>c--,void 0,()=>{(!c||!d)&&(l||i.next(r?nd(r,a):a),i.complete())}))}});return e?o.pipe(ed(e)):o}function Gt(n,e){return Be((t,r)=>{let o=0;t.subscribe(Fe(r,i=>n.call(e,i,o++)&&r.next(i)))})}function Ut(n){return Be((e,t)=>{let r=null,o=!1,i;r=e.subscribe(Fe(t,void 0,void 0,s=>{i=Ct(n(s,Ut(n)(e))),r?(r.unsubscribe(),r=null,i.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(t))})}function IE(n,e,t,r,o){return(i,s)=>{let a=t,c=e,l=0;i.subscribe(Fe(s,u=>{let d=l++;c=a?n(c,u,d):(a=!0,u),r&&s.next(c)},o&&(()=>{a&&s.next(c),s.complete()})))}}function Dn(n,e){return be(e)?Et(n,e,1):Et(n,1)}function Co(n){return Be((e,t)=>{let r=!1;e.subscribe(Fe(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function lr(n){return n<=0?()=>sn:Be((e,t)=>{let r=0;e.subscribe(Fe(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Qp(n){return me(()=>n)}function od(n=rD){return Be((e,t)=>{let r=!1;e.subscribe(Fe(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function rD(){return new xr}function Eo(n){return Be((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function qn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Gt((o,i)=>n(o,i,r)):gn,lr(1),t?Co(e):od(()=>new xr))}function As(n){return n<=0?()=>sn:Be((e,t)=>{let r=[];e.subscribe(Fe(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(let o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Zp(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Gt((o,i)=>n(o,i,r)):gn,As(1),t?Co(e):od(()=>new xr))}function Jp(n,e){return Be(IE(n,e,arguments.length>=2,!0))}function Xp(...n){let e=yo(n);return Be((t,r)=>{(e?Ss(n,t,e):Ss(n,t)).subscribe(r)})}function qt(n,e){return Be((t,r)=>{let o=null,i=0,s=!1,a=()=>s&&!o&&r.complete();t.subscribe(Fe(r,c=>{o?.unsubscribe();let l=0,u=i++;Ct(n(c,u)).subscribe(o=Fe(r,d=>r.next(e?e(c,d,u,l++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function eg(n){return Be((e,t)=>{Ct(n).subscribe(Fe(t,()=>t.complete(),wc)),!t.closed&&e.subscribe(t)})}function bt(n,e,t){let r=be(n)||e||t?{next:n,error:e,complete:t}:n;return r?Be((o,i)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;o.subscribe(Fe(i,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),i.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),i.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),i.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):gn}var oD="https://g.co/ng/security#xss",ue=class extends Error{constructor(e,t){super(Hd(e,t)),this.code=e}};function Hd(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Oc(n){return{toString:n}.toString()}var id="__parameters__";function iD(n){return function(...t){if(n){let r=n(...t);for(let o in r)this[o]=r[o]}}}function aw(n,e,t){return Oc(()=>{let r=iD(e);function o(...i){if(this instanceof o)return r.apply(this,i),this;let s=new o(...i);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(id)?c[id]:Object.defineProperty(c,id,{value:[]})[id];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return t&&(o.prototype=Object.create(t.prototype)),o.prototype.ngMetadataName=n,o.annotationCls=o,o})}function We(n){for(let e in n)if(n[e]===We)return e;throw Error("Could not find renamed property on target object.")}function sD(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Wt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Wt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function bE(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var aD=We({__forward_ref__:We});function wi(n){return n.__forward_ref__=wi,n.toString=function(){return Wt(this())},n}function Kt(n){return cw(n)?n():n}function cw(n){return typeof n=="function"&&n.hasOwnProperty(aD)&&n.__forward_ref__===wi}function ne(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Qt(n){return{providers:n.providers||[],imports:n.imports||[]}}function jd(n){return TE(n,uw)||TE(n,dw)}function lw(n){return jd(n)!==null}function TE(n,e){return n.hasOwnProperty(e)?n[e]:null}function cD(n){let e=n&&(n[uw]||n[dw]);return e||null}function SE(n){return n&&(n.hasOwnProperty(AE)||n.hasOwnProperty(lD))?n[AE]:null}var uw=We({\u0275prov:We}),AE=We({\u0275inj:We}),dw=We({ngInjectableDef:We}),lD=We({ngInjectorDef:We}),oe=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ne({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function hw(n){return n&&!!n.\u0275providers}var uD=We({\u0275cmp:We}),dD=We({\u0275dir:We}),hD=We({\u0275pipe:We}),fD=We({\u0275mod:We}),md=We({\u0275fac:We}),Sc=We({__NG_ELEMENT_ID__:We}),DE=We({__NG_ENV_ID__:We});function fw(n){return typeof n=="string"?n:n==null?"":String(n)}function pD(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():fw(n)}function gD(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ue(-200,n)}function rm(n,e){throw new ue(-201,!1)}var Me=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Me||{}),mg;function pw(){return mg}function Mn(n){let e=mg;return mg=n,e}function gw(n,e,t){let r=jd(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Me.Optional)return null;if(e!==void 0)return e;rm(n,"Injector")}var mD={},Ac=mD,vg="__NG_DI_FLAG__",vd="ngTempTokenPath",vD="ngTokenPath",yD=/\n/gm,CD="\u0275",ME="__source",Ns;function ED(){return Ns}function wo(n){let e=Ns;return Ns=n,e}function wD(n,e=Me.Default){if(Ns===void 0)throw new ue(-203,!1);return Ns===null?gw(n,void 0,e):Ns.get(n,e&Me.Optional?null:void 0,e)}function X(n,e=Me.Default){return(pw()||wD)(Kt(n),e)}function H(n,e=Me.Default){return X(n,zd(e))}function zd(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function yg(n){let e=[];for(let t=0;t<n.length;t++){let r=Kt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ue(900,!1);let o,i=Me.Default;for(let s=0;s<r.length;s++){let a=r[s],c=_D(a);typeof c=="number"?c===-1?o=a.token:i|=c:o=a}e.push(X(o,i))}else e.push(X(r))}return e}function mw(n,e){return n[vg]=e,n.prototype[vg]=e,n}function _D(n){return n[vg]}function ID(n,e,t,r){let o=n[vd];throw e[ME]&&o.unshift(e[ME]),n.message=bD(`
`+n.message,o,t,r),n[vD]=o,n[vd]=null,n}function bD(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==CD?n.slice(2):n;let o=Wt(e);if(Array.isArray(e))o=e.map(Wt).join(" -> ");else if(typeof e=="object"){let i=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];i.push(s+":"+(typeof a=="string"?JSON.stringify(a):Wt(a)))}o=`{${i.join(", ")}}`}return`${t}${r?"("+r+")":""}[${o}]: ${n.replace(yD,`
  `)}`}var om=mw(aw("Optional"),8);var vw=mw(aw("SkipSelf"),4);function Os(n,e){let t=n.hasOwnProperty(md);return t?n[md]:null}function im(n,e){n.forEach(t=>Array.isArray(t)?im(t,e):e(t))}function yw(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function yd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function TD(n,e,t,r){let o=n.length;if(o==e)n.push(t,r);else if(o===1)n.push(r,n[0]),n[0]=t;else{for(o--,n.push(n[o-1],n[o]);o>e;){let i=o-2;n[o]=n[i],o--}n[e]=t,n[e+1]=r}}function SD(n,e,t){let r=Pc(n,e);return r>=0?n[r|1]=t:(r=~r,TD(n,r,e,t)),r}function tg(n,e){let t=Pc(n,e);if(t>=0)return n[t|1]}function Pc(n,e){return AD(n,e,1)}function AD(n,e,t){let r=0,o=n.length>>t;for(;o!==r;){let i=r+(o-r>>1),s=n[i<<t];if(e===s)return i<<t;s>e?o=i:r=i+1}return~(o<<t)}var Ps={},mn=[],pi=new oe(""),Cw=new oe("",-1),Ew=new oe(""),Cd=class{get(e,t=Ac){if(t===Ac){let r=new Error(`NullInjectorError: No provider for ${Wt(e)}!`);throw r.name="NullInjectorError",r}return t}},ww=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(ww||{}),hr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(hr||{}),Io=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Io||{});function DD(n,e,t){let r=n.length;for(;;){let o=n.indexOf(e,t);if(o===-1)return o;if(o===0||n.charCodeAt(o-1)<=32){let i=e.length;if(o+i===r||n.charCodeAt(o+i)<=32)return o}t=o+1}}function Cg(n,e,t){let r=0;for(;r<t.length;){let o=t[r];if(typeof o=="number"){if(o!==0)break;r++;let i=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,i)}else{let i=o,s=t[++r];RD(i)?n.setProperty(e,i,s):n.setAttribute(e,i,s),r++}}return r}function MD(n){return n===3||n===4||n===6}function RD(n){return n.charCodeAt(0)===64}function Dc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let o=e[r];typeof o=="number"?t=o:t===0||(t===-1||t===2?RE(n,t,o,null,e[++r]):RE(n,t,o,null,null))}}return n}function RE(n,e,t,r,o){let i=0,s=n.length;if(e===-1)s=-1;else for(;i<n.length;){let a=n[i++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=i-1;break}}}for(;i<n.length;){let a=n[i];if(typeof a=="number")break;if(a===t){if(r===null){o!==null&&(n[i+1]=o);return}else if(r===n[i+1]){n[i+2]=o;return}}i++,r!==null&&i++,o!==null&&i++}s!==-1&&(n.splice(s,0,e),i=s+1),n.splice(i++,0,t),r!==null&&n.splice(i++,0,r),o!==null&&n.splice(i++,0,o)}var _w="ng-template";function kD(n,e,t,r){let o=0;if(r){for(;o<e.length&&typeof e[o]=="string";o+=2)if(e[o]==="class"&&DD(e[o+1].toLowerCase(),t,0)!==-1)return!0}else if(sm(n))return!1;if(o=e.indexOf(1,o),o>-1){let i;for(;++o<e.length&&typeof(i=e[o])=="string";)if(i.toLowerCase()===t)return!0}return!1}function sm(n){return n.type===4&&n.value!==_w}function ND(n,e,t){let r=n.type===4&&!t?_w:n.value;return e===r}function xD(n,e,t){let r=4,o=n.attrs,i=o!==null?FD(o):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Kn(r)&&!Kn(c))return!1;if(s&&Kn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!ND(n,c,t)||c===""&&e.length===1){if(Kn(r))return!1;s=!0}}else if(r&8){if(o===null||!kD(n,o,c,t)){if(Kn(r))return!1;s=!0}}else{let l=e[++a],u=OD(c,o,sm(n),t);if(u===-1){if(Kn(r))return!1;s=!0;continue}if(l!==""){let d;if(u>i?d="":d=o[u+1].toLowerCase(),r&2&&l!==d){if(Kn(r))return!1;s=!0}}}}return Kn(r)||s}function Kn(n){return(n&1)===0}function OD(n,e,t,r){if(e===null)return-1;let o=0;if(r||!t){let i=!1;for(;o<e.length;){let s=e[o];if(s===n)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=e[++o];for(;typeof a=="string";)a=e[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return LD(e,n)}function PD(n,e,t=!1){for(let r=0;r<e.length;r++)if(xD(n,e[r],t))return!0;return!1}function FD(n){for(let e=0;e<n.length;e++){let t=n[e];if(MD(t))return e}return n.length}function LD(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function kE(n,e){return n?":not("+e.trim()+")":e}function UD(n){let e=n[0],t=1,r=2,o="",i=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!Kn(s)&&(e+=kE(i,o),o=""),r=s,i=i||!Kn(r);t++}return o!==""&&(e+=kE(i,o)),e}function BD(n){return n.map(UD).join(",")}function VD(n){let e=[],t=[],r=1,o=2;for(;r<n.length;){let i=n[r];if(typeof i=="string")o===2?i!==""&&e.push(i,n[++r]):o===8&&t.push(i);else{if(!Kn(o))break;o=i}r++}return{attrs:e,classes:t}}function Tt(n){return Oc(()=>{let e=Aw(n),t=J(D({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ww.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||hr.Emulated,styles:n.styles||mn,_:null,schemas:n.schemas||null,tView:null,id:""});Dw(t);let r=n.dependencies;return t.directiveDefs=xE(r,!1),t.pipeDefs=xE(r,!0),t.id=zD(t),t})}function HD(n){return bo(n)||Iw(n)}function jD(n){return n!==null}function Zt(n){return Oc(()=>({type:n.type,bootstrap:n.bootstrap||mn,declarations:n.declarations||mn,imports:n.imports||mn,exports:n.exports||mn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function NE(n,e){if(n==null)return Ps;let t={};for(let r in n)if(n.hasOwnProperty(r)){let o=n[r],i,s,a=Io.None;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i):(i=o,s=o),e?(t[i]=a!==Io.None?[r,a]:r,e[i]=s):t[i]=r}return t}function ln(n){return Oc(()=>{let e=Aw(n);return Dw(e),e})}function bo(n){return n[uD]||null}function Iw(n){return n[dD]||null}function bw(n){return n[hD]||null}function Tw(n){let e=bo(n)||Iw(n)||bw(n);return e!==null?e.standalone:!1}function Sw(n,e){let t=n[fD]||null;if(!t&&e===!0)throw new Error(`Type ${Wt(n)} does not have '\u0275mod' property.`);return t}function Aw(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ps,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||mn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:NE(n.inputs,e),outputs:NE(n.outputs),debugInfo:null}}function Dw(n){n.features?.forEach(e=>e(n))}function xE(n,e){if(!n)return null;let t=e?bw:HD;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(jD)}function zD(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let o of t)e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ao(n){return{\u0275providers:n}}function $d(...n){return{\u0275providers:Mw(!0,n),\u0275fromNgModule:!0}}function Mw(n,...e){let t=[],r=new Set,o,i=s=>{t.push(s)};return im(e,s=>{let a=s;Eg(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&Rw(o,i),t}function Rw(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:o}=n[t];am(o,i=>{e(i,r)})}}function Eg(n,e,t,r){if(n=Kt(n),!n)return!1;let o=null,i=SE(n),s=!i&&bo(n);if(!i&&!s){let c=n.ngModule;if(i=SE(c),i)o=c;else return!1}else{if(s&&!s.standalone)return!1;o=n}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Eg(l,e,t,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let l;try{im(i.imports,u=>{Eg(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&Rw(l,e)}if(!a){let l=Os(o)||(()=>new o);e({provide:o,useFactory:l,deps:mn},o),e({provide:Ew,useValue:o,multi:!0},o),e({provide:pi,useValue:()=>X(o),multi:!0},o)}let c=i.providers;if(c!=null&&!a){let l=n;am(c,u=>{e(u,l)})}}else return!1;return o!==n&&n.providers!==void 0}function am(n,e){for(let t of n)hw(t)&&(t=t.\u0275providers),Array.isArray(t)?am(t,e):e(t)}var $D=We({provide:String,useValue:We});function kw(n){return n!==null&&typeof n=="object"&&$D in n}function GD(n){return!!(n&&n.useExisting)}function qD(n){return!!(n&&n.useFactory)}function Fs(n){return typeof n=="function"}function KD(n){return!!n.useClass}var Gd=new oe(""),dd={},WD={},ng;function cm(){return ng===void 0&&(ng=new Cd),ng}var Yt=class{},Mc=class extends Yt{get destroyed(){return this._destroyed}constructor(e,t,r,o){super(),this.parent=t,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_g(e,s=>this.processProvider(s)),this.records.set(Cw,Ds(void 0,this)),o.has("environment")&&this.records.set(Yt,Ds(void 0,this));let i=this.records.get(Gd);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(Ew,mn,Me.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=je(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),je(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=wo(this),r=Mn(void 0),o;try{return e()}finally{wo(t),Mn(r)}}get(e,t=Ac,r=Me.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(DE))return e[DE](this);r=zd(r);let o,i=wo(this),s=Mn(void 0);try{if(!(r&Me.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=XD(e)&&jd(e);l&&this.injectableDefInScope(l)?c=Ds(wg(e),dd):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&Me.Self?cm():this.parent;return t=r&Me.Optional&&t===Ac?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[vd]=a[vd]||[]).unshift(Wt(e)),i)throw a;return ID(a,e,"R3InjectorError",this.source)}else throw a}finally{Mn(s),wo(i)}}resolveInjectorInitializers(){let e=je(null),t=wo(this),r=Mn(void 0),o;try{let i=this.get(pi,mn,Me.Self);for(let s of i)s()}finally{wo(t),Mn(r),je(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Wt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ue(205,!1)}processProvider(e){e=Kt(e);let t=Fs(e)?e:Kt(e&&e.provide),r=QD(e);if(!Fs(e)&&e.multi===!0){let o=this.records.get(t);o||(o=Ds(void 0,dd,!0),o.factory=()=>yg(o.multi),this.records.set(t,o)),t=e,o.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=je(null);try{return t.value===dd&&(t.value=WD,t.value=t.factory()),typeof t.value=="object"&&t.value&&JD(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{je(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Kt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function wg(n){let e=jd(n),t=e!==null?e.factory:Os(n);if(t!==null)return t;if(n instanceof oe)throw new ue(204,!1);if(n instanceof Function)return YD(n);throw new ue(204,!1)}function YD(n){if(n.length>0)throw new ue(204,!1);let t=cD(n);return t!==null?()=>t.factory(n):()=>new n}function QD(n){if(kw(n))return Ds(void 0,n.useValue);{let e=Nw(n);return Ds(e,dd)}}function Nw(n,e,t){let r;if(Fs(n)){let o=Kt(n);return Os(o)||wg(o)}else if(kw(n))r=()=>Kt(n.useValue);else if(qD(n))r=()=>n.useFactory(...yg(n.deps||[]));else if(GD(n))r=()=>X(Kt(n.useExisting));else{let o=Kt(n&&(n.useClass||n.provide));if(ZD(n))r=()=>new o(...yg(n.deps));else return Os(o)||wg(o)}return r}function Ds(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function ZD(n){return!!n.deps}function JD(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function XD(n){return typeof n=="function"||typeof n=="object"&&n instanceof oe}function _g(n,e){for(let t of n)Array.isArray(t)?_g(t,e):t&&hw(t)?_g(t.\u0275providers,e):e(t)}function xn(n,e){n instanceof Mc&&n.assertNotDestroyed();let t,r=wo(n),o=Mn(void 0);try{return e()}finally{wo(r),Mn(o)}}function xw(){return pw()!==void 0||ED()!=null}function e0(n){if(!xw())throw new ue(-203,!1)}function t0(n){return typeof n=="function"}var yn=0,Ne=1,Ce=2,zt=3,Wn=4,Jn=5,fr=6,Ed=7,Qn=8,Ls=9,Or=10,rt=11,Rc=12,OE=13,qs=14,kn=15,Us=16,Ms=17,Bs=18,qd=19,Ow=20,_o=21,rg=22,Rn=23,cn=25,Pw=1,kc=6,Pr=7,wd=8,_d=9,vn=10,Id=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Id||{});function Yn(n){return Array.isArray(n)&&typeof n[Pw]=="object"}function pr(n){return Array.isArray(n)&&n[Pw]===!0}function Fw(n){return(n.flags&4)!==0}function Fc(n){return n.componentOffset>-1}function lm(n){return(n.flags&1)===1}function To(n){return!!n.template}function bd(n){return(n[Ce]&512)!==0}var Ig=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Lw(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function _i(){return Uw}function Uw(n){return n.type.prototype.ngOnChanges&&(n.setInput=r0),n0}_i.ngInherit=!0;function n0(){let n=Vw(this),e=n?.current;if(e){let t=n.previous;if(t===Ps)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function r0(n,e,t,r,o){let i=this.declaredInputs[r],s=Vw(n)||o0(n,{previous:Ps,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[i];a[i]=new Ig(l&&l.currentValue,t,c===Ps),Lw(n,e,o,t)}var Bw="__ngSimpleChanges__";function Vw(n){return n[Bw]||null}function o0(n,e){return n[Bw]=e}var PE=null;var ur=function(n,e,t){PE?.(n,e,t)},i0="svg",s0="math";function Zn(n){for(;Array.isArray(n);)n=n[yn];return n}function Hw(n,e){return Zn(e[n])}function On(n,e){return Zn(e[n.index])}function jw(n,e){return n.data[e]}function Do(n,e){let t=e[n];return Yn(t)?t:t[yn]}function um(n){return(n[Ce]&128)===128}function a0(n){return pr(n[zt])}function Td(n,e){return e==null?null:n[e]}function zw(n){n[Ms]=0}function $w(n){n[Ce]&1024||(n[Ce]|=1024,um(n)&&Wd(n))}function c0(n,e){for(;n>0;)e=e[qs],n--;return e}function Kd(n){return!!(n[Ce]&9216||n[Rn]?.dirty)}function bg(n){n[Or].changeDetectionScheduler?.notify(8),n[Ce]&64&&(n[Ce]|=1024),Kd(n)&&Wd(n)}function Wd(n){n[Or].changeDetectionScheduler?.notify(0);let e=gi(n);for(;e!==null&&!(e[Ce]&8192||(e[Ce]|=8192,!um(e)));)e=gi(e)}function Gw(n,e){if((n[Ce]&256)===256)throw new ue(911,!1);n[_o]===null&&(n[_o]=[]),n[_o].push(e)}function l0(n,e){if(n[_o]===null)return;let t=n[_o].indexOf(e);t!==-1&&n[_o].splice(t,1)}function gi(n){let e=n[zt];return pr(e)?e[zt]:e}var Pe={lFrame:e_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var qw=!1;function u0(){return Pe.lFrame.elementDepthCount}function d0(){Pe.lFrame.elementDepthCount++}function h0(){Pe.lFrame.elementDepthCount--}function Kw(){return Pe.bindingsEnabled}function Lc(){return Pe.skipHydrationRootTNode!==null}function f0(n){return Pe.skipHydrationRootTNode===n}function p0(n){Pe.skipHydrationRootTNode=n}function g0(){Pe.skipHydrationRootTNode=null}function ot(){return Pe.lFrame.lView}function Pn(){return Pe.lFrame.tView}function St(n){return Pe.lFrame.contextLView=n,n[Qn]}function At(n){return Pe.lFrame.contextLView=null,n}function un(){let n=Ww();for(;n!==null&&n.type===64;)n=n.parent;return n}function Ww(){return Pe.lFrame.currentTNode}function m0(){let n=Pe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Uc(n,e){let t=Pe.lFrame;t.currentTNode=n,t.isParent=e}function Yw(){return Pe.lFrame.isParent}function v0(){Pe.lFrame.isParent=!1}function Qw(){return qw}function FE(n){qw=n}function y0(n){return Pe.lFrame.bindingIndex=n}function dm(){return Pe.lFrame.bindingIndex++}function C0(n){let e=Pe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function E0(){return Pe.lFrame.inI18n}function w0(n,e){let t=Pe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Tg(e)}function _0(){return Pe.lFrame.currentDirectiveIndex}function Tg(n){Pe.lFrame.currentDirectiveIndex=n}function I0(n){let e=Pe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Zw(n){Pe.lFrame.currentQueryIndex=n}function b0(n){let e=n[Ne];return e.type===2?e.declTNode:e.type===1?n[Jn]:null}function Jw(n,e,t){if(t&Me.SkipSelf){let o=e,i=n;for(;o=o.parent,o===null&&!(t&Me.Host);)if(o=b0(i),o===null||(i=i[qs],o.type&10))break;if(o===null)return!1;e=o,n=i}let r=Pe.lFrame=Xw();return r.currentTNode=e,r.lView=n,!0}function hm(n){let e=Xw(),t=n[Ne];Pe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Xw(){let n=Pe.lFrame,e=n===null?null:n.child;return e===null?e_(n):e}function e_(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function t_(){let n=Pe.lFrame;return Pe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var n_=t_;function fm(){let n=t_();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function T0(n){return(Pe.lFrame.contextLView=c0(n,Pe.lFrame.contextLView))[Qn]}function Ks(){return Pe.lFrame.selectedIndex}function mi(n){Pe.lFrame.selectedIndex=n}function r_(){let n=Pe.lFrame;return jw(n.tView,n.selectedIndex)}function o_(){return Pe.lFrame.currentNamespace}var i_=!0;function pm(){return i_}function Mo(n){i_=n}function S0(n,e,t){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){let s=Uw(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}o&&(t.preOrderHooks??=[]).push(0-n,o),i&&((t.preOrderHooks??=[]).push(n,i),(t.preOrderCheckHooks??=[]).push(n,i))}function gm(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let i=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=i;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function hd(n,e,t){s_(n,e,3,t)}function fd(n,e,t,r){(n[Ce]&3)===t&&s_(n,e,t,r)}function og(n,e){let t=n[Ce];(t&3)===e&&(t&=16383,t+=1,n[Ce]=t)}function s_(n,e,t,r){let o=r!==void 0?n[Ms]&65535:0,i=r??-1,s=e.length-1,a=0;for(let c=o;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Ms]+=65536),(a<i||i==-1)&&(A0(n,t,e,c),n[Ms]=(n[Ms]&4294901760)+c+2),c++}function LE(n,e){ur(4,n,e);let t=je(null);try{e.call(n)}finally{je(t),ur(5,n,e)}}function A0(n,e,t,r){let o=t[r]<0,i=t[r+1],s=o?-t[r]:t[r],a=n[s];o?n[Ce]>>14<n[Ms]>>16&&(n[Ce]&3)===e&&(n[Ce]+=16384,LE(a,i)):LE(a,i)}var xs=-1,vi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function D0(n){return n instanceof vi}function M0(n){return(n.flags&8)!==0}function R0(n){return(n.flags&16)!==0}var ig={},Sg=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=zd(r);let o=this.injector.get(e,ig,r);return o!==ig||t===ig?o:this.parentInjector.get(e,t,r)}};function a_(n){return n!==xs}function Sd(n){return n&32767}function k0(n){return n>>16}function Ad(n,e){let t=k0(n),r=e;for(;t>0;)r=r[qs],t--;return r}var Ag=!0;function UE(n){let e=Ag;return Ag=n,e}var N0=256,c_=N0-1,l_=5,x0=0,dr={};function O0(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Sc)&&(r=t[Sc]),r==null&&(r=t[Sc]=x0++);let o=r&c_,i=1<<o;e.data[n+(o>>l_)]|=i}function Dd(n,e){let t=u_(n,e);if(t!==-1)return t;let r=e[Ne];r.firstCreatePass&&(n.injectorIndex=e.length,sg(r.data,n),sg(e,null),sg(r.blueprint,null));let o=mm(n,e),i=n.injectorIndex;if(a_(o)){let s=Sd(o),a=Ad(o,e),c=a[Ne].data;for(let l=0;l<8;l++)e[i+l]=a[s+l]|c[s+l]}return e[i+8]=o,i}function sg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function u_(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function mm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,o=e;for(;o!==null;){if(r=g_(o),r===null)return xs;if(t++,o=o[qs],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return xs}function Dg(n,e,t){O0(n,e,t)}function d_(n,e,t){if(t&Me.Optional||n!==void 0)return n;rm(e,"NodeInjector")}function h_(n,e,t,r){if(t&Me.Optional&&r===void 0&&(r=null),!(t&(Me.Self|Me.Host))){let o=n[Ls],i=Mn(void 0);try{return o?o.get(e,r,t&Me.Optional):gw(e,r,t&Me.Optional)}finally{Mn(i)}}return d_(r,e,t)}function f_(n,e,t,r=Me.Default,o){if(n!==null){if(e[Ce]&2048&&!(r&Me.Self)){let s=B0(n,e,t,r,dr);if(s!==dr)return s}let i=p_(n,e,t,r,dr);if(i!==dr)return i}return h_(e,t,r,o)}function p_(n,e,t,r,o){let i=L0(t);if(typeof i=="function"){if(!Jw(e,n,r))return r&Me.Host?d_(o,t,r):h_(e,t,r,o);try{let s;if(s=i(r),s==null&&!(r&Me.Optional))rm(t);else return s}finally{n_()}}else if(typeof i=="number"){let s=null,a=u_(n,e),c=xs,l=r&Me.Host?e[kn][Jn]:null;for((a===-1||r&Me.SkipSelf)&&(c=a===-1?mm(n,e):e[a+8],c===xs||!VE(r,!1)?a=-1:(s=e[Ne],a=Sd(c),e=Ad(c,e)));a!==-1;){let u=e[Ne];if(BE(i,a,u.data)){let d=P0(a,e,t,s,r,l);if(d!==dr)return d}c=e[a+8],c!==xs&&VE(r,e[Ne].data[a+8]===l)&&BE(i,a,e)?(s=u,a=Sd(c),e=Ad(c,e)):a=-1}}return o}function P0(n,e,t,r,o,i){let s=e[Ne],a=s.data[n+8],c=r==null?Fc(a)&&Ag:r!=s&&(a.type&3)!==0,l=o&Me.Host&&i===a,u=F0(a,s,t,c,l);return u!==null?Vs(e,s,u,a):dr}function F0(n,e,t,r,o){let i=n.providerIndexes,s=e.data,a=i&1048575,c=n.directiveStart,l=n.directiveEnd,u=i>>20,d=r?a:a+u,p=o?a+u:l;for(let h=d;h<p;h++){let m=s[h];if(h<c&&t===m||h>=c&&m.type===t)return h}if(o){let h=s[c];if(h&&To(h)&&h.type===t)return c}return null}function Vs(n,e,t,r){let o=n[t],i=e.data;if(D0(o)){let s=o;s.resolving&&gD(pD(i[t]));let a=UE(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Mn(s.injectImpl):null,u=Jw(n,r,Me.Default);try{o=n[t]=s.factory(void 0,i,n,r),e.firstCreatePass&&t>=r.directiveStart&&S0(t,i[t],e)}finally{l!==null&&Mn(l),UE(a),s.resolving=!1,n_()}}return o}function L0(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Sc)?n[Sc]:void 0;return typeof e=="number"?e>=0?e&c_:U0:e}function BE(n,e,t){let r=1<<n;return!!(t[e+(n>>l_)]&r)}function VE(n,e){return!(n&Me.Self)&&!(n&Me.Host&&e)}var fi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return f_(this._tNode,this._lView,e,zd(r),t)}};function U0(){return new fi(un(),ot())}function Ws(n){return Oc(()=>{let e=n.prototype.constructor,t=e[md]||Mg(e),r=Object.prototype,o=Object.getPrototypeOf(n.prototype).constructor;for(;o&&o!==r;){let i=o[md]||Mg(o);if(i&&i!==t)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Mg(n){return cw(n)?()=>{let e=Mg(Kt(n));return e&&e()}:Os(n)}function B0(n,e,t,r,o){let i=n,s=e;for(;i!==null&&s!==null&&s[Ce]&2048&&!(s[Ce]&512);){let a=p_(i,s,t,r|Me.Self,dr);if(a!==dr)return a;let c=i.parent;if(!c){let l=s[Ow];if(l){let u=l.get(t,dr,r);if(u!==dr)return u}c=g_(s),s=s[qs]}i=c}return o}function g_(n){let e=n[Ne],t=e.type;return t===2?e.declTNode:t===1?n[Jn]:null}function HE(n,e=null,t=null,r){let o=m_(n,e,t,r);return o.resolveInjectorInitializers(),o}function m_(n,e=null,t=null,r,o=new Set){let i=[t||mn,$d(n)];return r=r||(typeof n=="object"?void 0:Wt(n)),new Mc(i,e||cm(),r||null,o)}var Nn=class n{static{this.THROW_IF_NOT_FOUND=Ac}static{this.NULL=new Cd}static create(e,t){if(Array.isArray(e))return HE({name:""},t,e,"");{let r=e.name??"";return HE({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=ne({token:n,providedIn:"any",factory:()=>X(Cw)})}static{this.__NG_ELEMENT_ID__=-1}};var V0=new oe("");V0.__NG_ELEMENT_ID__=n=>{let e=un();if(e===null)throw new ue(204,!1);if(e.type&2)return e.value;if(n&Me.Optional)return null;throw new ue(204,!1)};var H0="ngOriginalError";function ag(n){return n[H0]}var v_=!0,vm=(()=>{class n{static{this.__NG_ELEMENT_ID__=j0}static{this.__NG_ENV_ID__=t=>t}}return n})(),Rg=class extends vm{constructor(e){super(),this._lView=e}onDestroy(e){return Gw(this._lView,e),()=>l0(this._lView,e)}};function j0(){return new Rg(ot())}var Ur=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new pt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=ne({token:n,providedIn:"root",factory:()=>new n})}}return n})();var kg=class extends ft{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,xw()&&(this.destroyRef=H(vm,{optional:!0})??void 0,this.pendingTasks=H(Ur,{optional:!0})??void 0)}emit(e){let t=je(null);try{super.next(e)}finally{je(t)}}subscribe(e,t,r){let o=e,i=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;o=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:i,complete:s});return e instanceof yt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},wt=kg;function Md(...n){}function y_(n){let e,t;function r(){n=Md;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function jE(n){return queueMicrotask(()=>n()),()=>{n=Md}}var ym="isAngularZone",Rd=ym+"_ID",z0=0,nt=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new wt(!1),this.onMicrotaskEmpty=new wt(!1),this.onStable=new wt(!1),this.onError=new wt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:i=v_}=e;if(typeof Zone>"u")throw new ue(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&r,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=i,q0(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ym)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ue(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ue(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,$0,Md,Md);try{return i.runTask(s,t,r)}finally{i.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},$0={};function Cm(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function G0(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){y_(()=>{n.callbackScheduled=!1,Ng(n),n.isCheckStableRunning=!0,Cm(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Ng(n)}function q0(n){let e=()=>{G0(n)},t=z0++;n._inner=n._inner.fork({name:"angular",properties:{[ym]:!0,[Rd]:t,[Rd+t]:!0},onInvokeTask:(r,o,i,s,a,c)=>{if(K0(c))return r.invokeTask(i,s,a,c);try{return zE(n),r.invokeTask(i,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),$E(n)}},onInvoke:(r,o,i,s,a,c,l)=>{try{return zE(n),r.invoke(i,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!W0(c)&&e(),$E(n)}},onHasTask:(r,o,i,s)=>{r.hasTask(i,s),o===i&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Ng(n),Cm(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,o,i,s)=>(r.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Ng(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function zE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function $E(n){n._nesting--,Cm(n)}var xg=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new wt,this.onMicrotaskEmpty=new wt,this.onStable=new wt,this.onError=new wt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,o){return e.apply(t,r)}};function K0(n){return C_(n,"__ignore_ng_zone__")}function W0(n){return C_(n,"__scheduler_tick__")}function C_(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Fr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&ag(e);for(;t&&ag(t);)t=ag(t);return t||null}},Y0=new oe("",{providedIn:"root",factory:()=>{let n=H(nt),e=H(Fr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function Q0(){return Yd(un(),ot())}function Yd(n,e){return new Ii(On(n,e))}var Ii=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=Q0}}return n})();var Z0="ngSkipHydration",J0="ngskiphydration";function E_(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===J0)return!0}return!1}function w_(n){return n.hasAttribute(Z0)}function kd(n){return(n.flags&128)===128}function X0(n){if(kd(n))return!0;let e=n.parent;for(;e;){if(kd(n)||E_(e))return!0;e=e.parent}return!1}var __=new Map,eM=0;function tM(){return eM++}function nM(n){__.set(n[qd],n)}function Og(n){__.delete(n[qd])}var GE="__ngContext__";function yi(n,e){Yn(e)?(n[GE]=e[qd],nM(e)):n[GE]=e}function I_(n){return T_(n[Rc])}function b_(n){return T_(n[Wn])}function T_(n){for(;n!==null&&!pr(n);)n=n[Wn];return n}var Pg;function S_(n){Pg=n}function Qd(){if(Pg!==void 0)return Pg;if(typeof document<"u")return document;throw new ue(210,!1)}var Zd=new oe("",{providedIn:"root",factory:()=>rM}),rM="ng",Em=new oe(""),Fn=new oe("",{providedIn:"platform",factory:()=>"unknown"});var wm=new oe("",{providedIn:"root",factory:()=>Qd().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function oM(){let n=new Ys;return H(Fn)==="browser"&&(n.store=iM(Qd(),H(Zd))),n}var Ys=(()=>{class n{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=ne({token:n,providedIn:"root",factory:oM})}get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function iM(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var A_="h",D_="b",Fg=function(n){return n.FirstChild="f",n.NextSibling="n",n}(Fg||{}),sM="e",aM="t",_m="c",M_="x",Nd="r",cM="i",lM="n",R_="d";var uM="__nghData__",k_=uM,cg="ngh",dM="nghm",N_=()=>null;function hM(n,e,t=!1){let r=n.getAttribute(cg);if(r==null)return null;let[o,i]=r.split("|");if(r=t?i:o,!r)return null;let s=i?`|${i}`:"",a=t?o:s,c={};if(r!==""){let u=e.get(Ys,null,{optional:!0});u!==null&&(c=u.get(k_,[])[Number(r)])}let l={data:c,firstChild:n.firstChild??null};return t&&(l.firstChild=n,Jd(l,0,n.nextSibling)),a?n.setAttribute(cg,a):n.removeAttribute(cg),l}function fM(){N_=hM}function Im(n,e,t=!1){return N_(n,e,t)}function pM(n){let e=n._lView;return e[Ne].type===2?null:(bd(e)&&(e=e[cn]),e)}function gM(n){return n.textContent?.replace(/\s/gm,"")}function mM(n){let e=Qd(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(i){let s=gM(i);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,o=[];for(;r=t.nextNode();)o.push(r);for(let i of o)i.textContent==="ngetn"?i.replaceWith(e.createTextNode("")):i.remove()}function Jd(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function Lg(n,e){return n.segmentHeads?.[e]??null}function vM(n,e){let t=n.data,r=t[sM]?.[e]??null;return r===null&&t[_m]?.[e]&&(r=bm(n,e)),r}function x_(n,e){return n.data[_m]?.[e]??null}function bm(n,e){let t=x_(n,e)??[],r=0;for(let o of t)r+=o[Nd]*(o[M_]??1);return r}function yM(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[R_];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function Bc(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[R_];n.disconnectedNodes=t?new Set(t):null}return!!yM(n)?.has(e)}var sd=new oe(""),O_=!1,P_=new oe("",{providedIn:"root",factory:()=>O_});var Ug=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${oD})`}};function Tm(n){return n instanceof Ug?n.changingThisBreaksApplicationSecurity:n}var CM=/^>|^->|<!--|-->|--!>|<!-$/g,EM=/(<|>)/g,wM="\u200B$1\u200B";function _M(n){return n.replace(CM,e=>e.replace(EM,wM))}function IM(n){return n.ownerDocument.body}function F_(n){return n instanceof Function?n():n}function bc(n){return(n??H(Nn)).get(Fn)==="browser"}var Lr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Lr||{}),bM;function Sm(n,e){return bM(n,e)}function Rs(n,e,t,r,o){if(r!=null){let i,s=!1;pr(r)?i=r:Yn(r)&&(s=!0,r=r[yn]);let a=Zn(r);n===0&&t!==null?o==null?j_(e,t,a):xd(e,t,a,o||null,!0):n===1&&t!==null?xd(e,t,a,o||null,!0):n===2?Rm(e,a,s):n===3&&e.destroyNode(a),i!=null&&BM(e,n,i,t,o)}}function L_(n,e){return n.createText(e)}function TM(n,e,t){n.setValue(e,t)}function U_(n,e){return n.createComment(_M(e))}function Am(n,e,t){return n.createElement(e,t)}function SM(n,e){B_(n,e),e[yn]=null,e[Jn]=null}function AM(n,e,t,r,o,i){r[yn]=o,r[Jn]=e,Xd(n,r,t,1,o,i)}function B_(n,e){e[Or].changeDetectionScheduler?.notify(9),Xd(n,e,e[rt],2,null,null)}function DM(n){let e=n[Rc];if(!e)return lg(n[Ne],n);for(;e;){let t=null;if(Yn(e))t=e[Rc];else{let r=e[vn];r&&(t=r)}if(!t){for(;e&&!e[Wn]&&e!==n;)Yn(e)&&lg(e[Ne],e),e=e[zt];e===null&&(e=n),Yn(e)&&lg(e[Ne],e),t=e&&e[Wn]}e=t}}function MM(n,e,t,r){let o=vn+r,i=t.length;r>0&&(t[o-1][Wn]=e),r<i-vn?(e[Wn]=t[o],yw(t,vn+r,e)):(t.push(e),e[Wn]=null),e[zt]=t;let s=e[Us];s!==null&&t!==s&&V_(s,e);let a=e[Bs];a!==null&&a.insertView(n),bg(e),e[Ce]|=128}function V_(n,e){let t=n[_d],r=e[zt];if(Yn(r))n[Ce]|=Id.HasTransplantedViews;else{let o=r[zt][kn];e[kn]!==o&&(n[Ce]|=Id.HasTransplantedViews)}t===null?n[_d]=[e]:t.push(e)}function Dm(n,e){let t=n[_d],r=t.indexOf(e);t.splice(r,1)}function Bg(n,e){if(n.length<=vn)return;let t=vn+e,r=n[t];if(r){let o=r[Us];o!==null&&o!==n&&Dm(o,r),e>0&&(n[t-1][Wn]=r[Wn]);let i=yd(n,vn+e);SM(r[Ne],r);let s=i[Bs];s!==null&&s.detachView(i[Ne]),r[zt]=null,r[Wn]=null,r[Ce]&=-129}return r}function H_(n,e){if(!(e[Ce]&256)){let t=e[rt];t.destroyNode&&Xd(n,e,t,3,null,null),DM(e)}}function lg(n,e){if(e[Ce]&256)return;let t=je(null);try{e[Ce]&=-129,e[Ce]|=256,e[Rn]&&Fp(e[Rn]),kM(n,e),RM(n,e),e[Ne].type===1&&e[rt].destroy();let r=e[Us];if(r!==null&&pr(e[zt])){r!==e[zt]&&Dm(r,e);let o=e[Bs];o!==null&&o.detachView(n)}Og(e)}finally{je(t)}}function RM(n,e){let t=n.cleanup,r=e[Ed];if(t!==null)for(let i=0;i<t.length-1;i+=2)if(typeof t[i]=="string"){let s=t[i+3];s>=0?r[s]():r[-s].unsubscribe(),i+=2}else{let s=r[t[i+1]];t[i].call(s)}r!==null&&(e[Ed]=null);let o=e[_o];if(o!==null){e[_o]=null;for(let i=0;i<o.length;i++){let s=o[i];s()}}}function kM(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let o=e[t[r]];if(!(o instanceof vi)){let i=t[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],c=i[s+1];ur(4,a,c);try{c.call(a)}finally{ur(5,a,c)}}else{ur(4,o,i);try{i.call(o)}finally{ur(5,o,i)}}}}}function NM(n,e,t){return xM(n,e.parent,t)}function xM(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[yn];{let{componentOffset:o}=r;if(o>-1){let{encapsulation:i}=n.data[r.directiveStart+o];if(i===hr.None||i===hr.Emulated)return null}return On(r,t)}}function xd(n,e,t,r,o){n.insertBefore(e,t,r,o)}function j_(n,e,t){n.appendChild(e,t)}function qE(n,e,t,r,o){r!==null?xd(n,e,t,r,o):j_(n,e,t)}function z_(n,e){return n.parentNode(e)}function OM(n,e){return n.nextSibling(e)}function PM(n,e,t){return LM(n,e,t)}function FM(n,e,t){return n.type&40?On(n,t):null}var LM=FM,KE;function Mm(n,e,t,r){let o=NM(n,r,e),i=e[rt],s=r.parent||e[Jn],a=PM(s,r,e);if(o!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)qE(i,o,t[c],a,!1);else qE(i,o,t,a,!1);KE!==void 0&&KE(i,r,e,t,o)}function Tc(n,e){if(e!==null){let t=e.type;if(t&3)return On(e,n);if(t&4)return Vg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Tc(n,r);{let o=n[e.index];return pr(o)?Vg(-1,o):Zn(o)}}else{if(t&128)return Tc(n,e.next);if(t&32)return Sm(e,n)()||Zn(n[e.index]);{let r=$_(n,e);if(r!==null){if(Array.isArray(r))return r[0];let o=gi(n[kn]);return Tc(o,r)}else return Tc(n,e.next)}}}return null}function $_(n,e){if(e!==null){let r=n[kn][Jn],o=e.projection;return r.projection[o]}return null}function Vg(n,e){let t=vn+n+1;if(t<e.length){let r=e[t],o=r[Ne].firstChild;if(o!==null)return Tc(r,o)}return e[Pr]}function Rm(n,e,t){n.removeChild(null,e,t)}function G_(n){n.textContent=""}function km(n,e,t,r,o,i,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&yi(Zn(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)km(n,e,t.child,r,o,i,!1),Rs(e,n,o,a,i);else if(c&32){let l=Sm(t,r),u;for(;u=l();)Rs(e,n,o,u,i);Rs(e,n,o,a,i)}else c&16?UM(n,e,r,t,o,i):Rs(e,n,o,a,i);t=s?t.projectionNext:t.next}}function Xd(n,e,t,r,o,i){km(t,r,n.firstChild,e,o,i,!1)}function UM(n,e,t,r,o,i){let s=t[kn],c=s[Jn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Rs(e,n,o,u,i)}else{let l=c,u=s[zt];kd(r)&&(l.flags|=128),km(n,e,l,u,o,i,!0)}}function BM(n,e,t,r,o){let i=t[Pr],s=Zn(t);i!==s&&Rs(e,n,r,i,o);for(let a=vn;a<t.length;a++){let c=t[a];Xd(c[Ne],c,n,e,r,i)}}function VM(n,e,t,r,o){if(e)o?n.addClass(t,r):n.removeClass(t,r);else{let i=r.indexOf("-")===-1?void 0:Lr.DashCase;o==null?n.removeStyle(t,r,i):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=Lr.Important),n.setStyle(t,r,o,i))}}function HM(n,e,t){n.setAttribute(e,"style",t)}function q_(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function K_(n,e,t){let{mergedAttrs:r,classes:o,styles:i}=t;r!==null&&Cg(n,e,r),o!==null&&q_(n,e,o),i!==null&&HM(n,e,i)}var Qs={};function ze(n=1){W_(Pn(),ot(),Ks()+n,!1)}function W_(n,e,t,r){if(!r)if((e[Ce]&3)===3){let i=n.preOrderCheckHooks;i!==null&&hd(e,i,t)}else{let i=n.preOrderHooks;i!==null&&fd(e,i,0,t)}mi(t)}function Te(n,e=Me.Default){let t=ot();if(t===null)return X(n,e);let r=un();return f_(r,t,Kt(n),e)}function Y_(){let n="invalid";throw new Error(n)}function Q_(n,e,t,r,o,i){let s=je(null);try{let a=null;o&Io.SignalBased&&(a=e[r][Nr]),a!==null&&a.transformFn!==void 0&&(i=a.transformFn(i)),o&Io.HasDecoratorInputTransform&&(i=n.inputTransforms[r].call(e,i)),n.setInput!==null?n.setInput(e,a,i,t,r):Lw(e,a,r,i)}finally{je(s)}}function jM(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let o=t[r];if(o<0)mi(~o);else{let i=o,s=t[++r],a=t[++r];w0(s,i);let c=e[i];a(2,c)}}}finally{mi(-1)}}function eh(n,e,t,r,o,i,s,a,c,l,u){let d=e.blueprint.slice();return d[yn]=o,d[Ce]=r|4|128|8|64,(l!==null||n&&n[Ce]&2048)&&(d[Ce]|=2048),zw(d),d[zt]=d[qs]=n,d[Qn]=t,d[Or]=s||n&&n[Or],d[rt]=a||n&&n[rt],d[Ls]=c||n&&n[Ls]||null,d[Jn]=i,d[qd]=tM(),d[fr]=u,d[Ow]=l,d[kn]=e.type==2?n[kn]:d,d}function th(n,e,t,r,o){let i=n.data[e];if(i===null)i=zM(n,e,t,r,o),E0()&&(i.flags|=32);else if(i.type&64){i.type=t,i.value=r,i.attrs=o;let s=m0();i.injectorIndex=s===null?-1:s.injectorIndex}return Uc(i,!0),i}function zM(n,e,t,r,o){let i=Ww(),s=Yw(),a=s?i:i&&i.parent,c=n.data[e]=YM(n,a,t,e,r,o);return n.firstChild===null&&(n.firstChild=c),i!==null&&(s?i.child==null&&c.parent!==null&&(i.child=c):i.next===null&&(i.next=c,c.prev=i)),c}function Z_(n,e,t,r){if(t===0)return-1;let o=e.length;for(let i=0;i<t;i++)e.push(r),n.blueprint.push(r),n.data.push(null);return o}function J_(n,e,t,r,o){let i=Ks(),s=r&2;try{mi(-1),s&&e.length>cn&&W_(n,e,cn,!1),ur(s?2:0,o),t(r,o)}finally{mi(i),ur(s?3:1,o)}}function X_(n,e,t){if(Fw(e)){let r=je(null);try{let o=e.directiveStart,i=e.directiveEnd;for(let s=o;s<i;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{je(r)}}}function eI(n,e,t){Kw()&&(tR(n,e,t,On(t,e)),(t.flags&64)===64&&aI(n,e,t))}function tI(n,e,t=On){let r=e.localNames;if(r!==null){let o=e.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?t(e,n):n[s];n[o++]=a}}}function nI(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Nm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Nm(n,e,t,r,o,i,s,a,c,l,u){let d=cn+r,p=d+o,h=$M(d,p),m=typeof l=="function"?l():l;return h[Ne]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:u}}function $M(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Qs);return t}function GM(n,e,t,r){let i=r.get(P_,O_)||t===hr.ShadowDom,s=n.selectRootElement(e,i);return qM(s),s}function qM(n){rI(n)}var rI=()=>null;function KM(n){w_(n)?G_(n):mM(n)}function WM(){rI=KM}function YM(n,e,t,r,o,i){let s=e?e.injectorIndex:-1,a=0;return Lc()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function WE(n,e,t,r,o){for(let i in e){if(!e.hasOwnProperty(i))continue;let s=e[i];if(s===void 0)continue;r??={};let a,c=Io.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=i;if(o!==null){if(!o.hasOwnProperty(i))continue;l=o[i]}n===0?YE(r,t,l,a,c):YE(r,t,l,a)}return r}function YE(n,e,t,r,o){let i;n.hasOwnProperty(t)?(i=n[t]).push(e,r):i=n[t]=[e,r],o!==void 0&&i.push(o)}function QM(n,e,t){let r=e.directiveStart,o=e.directiveEnd,i=n.data,s=e.attrs,a=[],c=null,l=null;for(let u=r;u<o;u++){let d=i[u],p=t?t.get(d):null,h=p?p.inputs:null,m=p?p.outputs:null;c=WE(0,d.inputs,u,c,h),l=WE(1,d.outputs,u,l,m);let g=c!==null&&s!==null&&!sm(e)?uR(c,u,s):null;a.push(g)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function ZM(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function oI(n,e,t,r,o,i,s,a){let c=On(e,t),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(xm(n,t,u,r,o),Fc(e)&&JM(t,e.index)):e.type&3?(r=ZM(r),o=s!=null?s(o,e.value||"",r):o,i.setProperty(c,r,o)):e.type&12}function JM(n,e){let t=Do(e,n);t[Ce]&16||(t[Ce]|=64)}function iI(n,e,t,r){if(Kw()){let o=r===null?null:{"":-1},i=rR(n,t),s,a;i===null?s=a=null:[s,a]=i,s!==null&&sI(n,e,t,s,o,a),o&&oR(t,r,o)}t.mergedAttrs=Dc(t.mergedAttrs,t.attrs)}function sI(n,e,t,r,o,i){for(let l=0;l<r.length;l++)Dg(Dd(t,e),n,r[l].type);sR(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=Z_(n,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];t.mergedAttrs=Dc(t.mergedAttrs,u.hostAttrs),aR(n,t,e,c,u),iR(c,u,o),u.contentQueries!==null&&(t.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(t.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}QM(n,t,i)}function XM(n,e,t,r,o){let i=o.hostBindings;if(i){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;eR(s)!=a&&s.push(a),s.push(t,r,i)}}function eR(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function tR(n,e,t,r){let o=t.directiveStart,i=t.directiveEnd;Fc(t)&&cR(e,t,n.data[o+t.componentOffset]),n.firstCreatePass||Dd(t,e),yi(r,e);let s=t.initialInputs;for(let a=o;a<i;a++){let c=n.data[a],l=Vs(e,n,a,t);if(yi(l,e),s!==null&&lR(e,a-o,l,c,t,s),To(c)){let u=Do(t.index,e);u[Qn]=Vs(e,n,a,t)}}}function aI(n,e,t){let r=t.directiveStart,o=t.directiveEnd,i=t.index,s=_0();try{mi(i);for(let a=r;a<o;a++){let c=n.data[a],l=e[a];Tg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&nR(c,l)}}finally{mi(-1),Tg(s)}}function nR(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function rR(n,e){let t=n.directiveRegistry,r=null,o=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];if(PD(e,s.selectors,!1))if(r||(r=[]),To(s))if(s.findHostDirectiveDefs!==null){let a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s);let c=a.length;Hg(n,e,c)}else r.unshift(s),Hg(n,e,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return r===null?null:[r,o]}function Hg(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function oR(n,e,t){if(e){let r=n.localNames=[];for(let o=0;o<e.length;o+=2){let i=t[e[o+1]];if(i==null)throw new ue(-301,!1);r.push(e[o],i)}}}function iR(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;To(e)&&(t[""]=n)}}function sR(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function aR(n,e,t,r,o){n.data[r]=o;let i=o.factory||(o.factory=Os(o.type,!0)),s=new vi(i,To(o),Te);n.blueprint[r]=s,t[r]=s,XM(n,e,r,Z_(n,t,o.hostVars,Qs),o)}function cR(n,e,t){let r=On(e,n),o=nI(t),i=n[Or].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=nh(n,eh(n,o,null,s,r,e,null,i.createRenderer(r,t),null,null,null));n[e.index]=a}function lR(n,e,t,r,o,i){let s=i[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++],d=s[a++];Q_(r,t,c,l,u,d)}}function uR(n,e,t){let r=null,o=0;for(;o<t.length;){let i=t[o];if(i===0){o+=4;continue}else if(i===5){o+=2;continue}if(typeof i=="number")break;if(n.hasOwnProperty(i)){r===null&&(r=[]);let s=n[i];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(i,s[a+1],s[a+2],t[o+1]);break}}o+=2}return r}function cI(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function lI(n,e){let t=n.contentQueries;if(t!==null){let r=je(null);try{for(let o=0;o<t.length;o+=2){let i=t[o],s=t[o+1];if(s!==-1){let a=n.data[s];Zw(i),a.contentQueries(2,e[s],s)}}}finally{je(r)}}}function nh(n,e){return n[Rc]?n[OE][Wn]=e:n[Rc]=e,n[OE]=e,e}function jg(n,e,t){Zw(0);let r=je(null);try{e(n,t)}finally{je(r)}}function dR(n){return n[Ed]??=[]}function hR(n){return n.cleanup??=[]}function uI(n,e){let t=n[Ls],r=t?t.get(Fr,null):null;r&&r.handleError(e)}function xm(n,e,t,r,o){for(let i=0;i<t.length;){let s=t[i++],a=t[i++],c=t[i++],l=e[s],u=n.data[s];Q_(u,l,r,a,c,o)}}function fR(n,e,t){let r=Hw(e,n);TM(n[rt],r,t)}function pR(n,e){let t=Do(e,n),r=t[Ne];gR(r,t);let o=t[yn];o!==null&&t[fr]===null&&(t[fr]=Im(o,t[Ls])),Om(r,t,t[Qn])}function gR(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Om(n,e,t){hm(e);try{let r=n.viewQuery;r!==null&&jg(1,r,t);let o=n.template;o!==null&&J_(n,e,o,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Bs]?.finishViewCreation(n),n.staticContentQueries&&lI(n,e),n.staticViewQueries&&jg(2,n.viewQuery,t);let i=n.components;i!==null&&mR(e,i)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Ce]&=-5,fm()}}function mR(n,e){for(let t=0;t<e.length;t++)pR(n,e[t])}function vR(n,e,t,r){let o=je(null);try{let i=e.tView,a=n[Ce]&4096?4096:16,c=eh(n,i,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Us]=l;let u=n[Bs];return u!==null&&(c[Bs]=u.createEmbeddedView(i)),Om(i,c,t),c}finally{je(o)}}function QE(n,e){return!e||e.firstChild===null||kd(n)}function yR(n,e,t,r=!0){let o=e[Ne];if(MM(o,e,n,t),r){let s=Vg(t,n),a=e[rt],c=z_(a,n[Pr]);c!==null&&AM(o,n[Jn],a,e,c,s)}let i=e[fr];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function Od(n,e,t,r,o=!1){for(;t!==null;){if(t.type===128){t=o?t.projectionNext:t.next;continue}let i=e[t.index];i!==null&&r.push(Zn(i)),pr(i)&&CR(i,r);let s=t.type;if(s&8)Od(n,e,t.child,r);else if(s&32){let a=Sm(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=$_(e,t);if(Array.isArray(a))r.push(...a);else{let c=gi(e[kn]);Od(c[Ne],c,a,r,!0)}}t=o?t.projectionNext:t.next}return r}function CR(n,e){for(let t=vn;t<n.length;t++){let r=n[t],o=r[Ne].firstChild;o!==null&&Od(r[Ne],r,o,e)}n[Pr]!==n[yn]&&e.push(n[Pr])}var dI=[];function ER(n){return n[Rn]??wR(n)}function wR(n){let e=dI.pop()??Object.create(IR);return e.lView=n,e}function _R(n){n.lView[Rn]!==n&&(n.lView=null,dI.push(n))}var IR=J(D({},Cc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Wd(n.lView)},consumerOnSignalRead(){this.lView[Rn]=this}});function bR(n){let e=n[Rn]??Object.create(TR);return e.lView=n,e}var TR=J(D({},Cc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=gi(n.lView);for(;e&&!hI(e[Ne]);)e=gi(e);e&&$w(e)},consumerOnSignalRead(){this.lView[Rn]=this}});function hI(n){return n.type!==2}var SR=100;function fI(n,e=!0,t=0){let r=n[Or],o=r.rendererFactory,i=!1;i||o.begin?.();try{AR(n,t)}catch(s){throw e&&uI(n,s),s}finally{i||(o.end?.(),r.inlineEffectRunner?.flush())}}function AR(n,e){let t=Qw();try{FE(!0),zg(n,e);let r=0;for(;Kd(n);){if(r===SR)throw new ue(103,!1);r++,zg(n,1)}}finally{FE(t)}}function DR(n,e,t,r){let o=e[Ce];if((o&256)===256)return;let i=!1,s=!1;!i&&e[Or].inlineEffectRunner?.flush(),hm(e);let a=!0,c=null,l=null;i||(hI(n)?(l=ER(e),c=xu(l)):VC()===null?(a=!1,l=bR(e),c=xu(l)):e[Rn]&&(Fp(e[Rn]),e[Rn]=null));try{zw(e),y0(n.bindingStartIndex),t!==null&&J_(n,e,t,2,r);let u=(o&3)===3;if(!i)if(u){let h=n.preOrderCheckHooks;h!==null&&hd(e,h,null)}else{let h=n.preOrderHooks;h!==null&&fd(e,h,0,null),og(e,0)}if(s||MR(e),pI(e,0),n.contentQueries!==null&&lI(n,e),!i)if(u){let h=n.contentCheckHooks;h!==null&&hd(e,h)}else{let h=n.contentHooks;h!==null&&fd(e,h,1),og(e,1)}jM(n,e);let d=n.components;d!==null&&mI(e,d,0);let p=n.viewQuery;if(p!==null&&jg(2,p,r),!i)if(u){let h=n.viewCheckHooks;h!==null&&hd(e,h)}else{let h=n.viewHooks;h!==null&&fd(e,h,2),og(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[rg]){for(let h of e[rg])h();e[rg]=null}i||(e[Ce]&=-73)}catch(u){throw i||Wd(e),u}finally{l!==null&&(Op(l,c),a&&_R(l)),fm()}}function pI(n,e){for(let t=I_(n);t!==null;t=b_(t))for(let r=vn;r<t.length;r++){let o=t[r];gI(o,e)}}function MR(n){for(let e=I_(n);e!==null;e=b_(e)){if(!(e[Ce]&Id.HasTransplantedViews))continue;let t=e[_d];for(let r=0;r<t.length;r++){let o=t[r];$w(o)}}}function RR(n,e,t){let r=Do(e,n);gI(r,t)}function gI(n,e){um(n)&&zg(n,e)}function zg(n,e){let r=n[Ne],o=n[Ce],i=n[Rn],s=!!(e===0&&o&16);if(s||=!!(o&64&&e===0),s||=!!(o&1024),s||=!!(i?.dirty&&Pp(i)),s||=!1,i&&(i.dirty=!1),n[Ce]&=-9217,s)DR(r,n,r.template,n[Qn]);else if(o&8192){pI(n,1);let a=r.components;a!==null&&mI(n,a,1)}}function mI(n,e,t){for(let r=0;r<e.length;r++)RR(n,e[r],t)}function Pm(n,e){let t=Qw()?64:1088;for(n[Or].changeDetectionScheduler?.notify(e);n;){n[Ce]|=t;let r=gi(n);if(bd(n)&&!r)return n;n=r}return null}var Ci=class{get rootNodes(){let e=this._lView,t=e[Ne];return Od(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Qn]}set context(e){this._lView[Qn]=e}get destroyed(){return(this._lView[Ce]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[zt];if(pr(e)){let t=e[wd],r=t?t.indexOf(this):-1;r>-1&&(Bg(e,r),yd(t,r))}this._attachedToViewContainer=!1}H_(this._lView[Ne],this._lView)}onDestroy(e){Gw(this._lView,e)}markForCheck(){Pm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ce]&=-129}reattach(){bg(this._lView),this._lView[Ce]|=128}detectChanges(){this._lView[Ce]|=1024,fI(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ue(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=bd(this._lView),t=this._lView[Us];t!==null&&!e&&Dm(t,this._lView),B_(this._lView[Ne],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ue(902,!1);this._appRef=e;let t=bd(this._lView),r=this._lView[Us];r!==null&&!t&&V_(r,this._lView),bg(this._lView)}},Fm=(()=>{class n{static{this.__NG_ELEMENT_ID__=xR}}return n})(),kR=Fm,NR=class extends kR{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let o=vR(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Ci(o)}};function xR(){return OR(un(),ot())}function OR(n,e){return n.type&4?new NR(e,n,Yd(n,e)):null}var PR=new RegExp(`^(\\d+)*(${D_}|${A_})*(.*)`);function FR(n){let e=n.match(PR),[t,r,o,i]=e,s=r?parseInt(r,10):o,a=[];for(let[c,l,u]of i.matchAll(/(f|n)(\d*)/g)){let d=parseInt(u,10)||1;a.push(l,d)}return[s,...a]}function LR(n){return!n.prev&&n.parent?.type===8}function ug(n){return n.index-cn}function UR(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function rh(n,e,t,r){let o=ug(r),i=UR(n,o);if(i===void 0){let s=n.data[lM];if(s?.[o])i=VR(s[o],t);else if(e.firstChild===r)i=n.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(LR(r)){let l=ug(r.parent);i=Lg(n,l)}else{let l=On(c,t);if(a)i=l.firstChild;else{let u=ug(c),d=Lg(n,u);if(c.type===2&&d){let h=bm(n,u)+1;i=oh(h,d)}else i=l.nextSibling}}}}return i}function oh(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function BR(n,e){let t=n;for(let r=0;r<e.length;r+=2){let o=e[r],i=e[r+1];for(let s=0;s<i;s++)switch(o){case Fg.FirstChild:t=t.firstChild;break;case Fg.NextSibling:t=t.nextSibling;break}}return t}function VR(n,e){let[t,...r]=FR(n),o;if(t===A_)o=e[kn][yn];else if(t===D_)o=IM(e[kn][yn]);else{let i=Number(t);o=Zn(e[i+cn])}return BR(o,r)}var HR=!1;function jR(n){HR=n}function zR(n){let e=n[fr];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let o=n[rt];for(let i of r.values())$R(o,t,i)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function $R(n,e,t){for(let r of t.node.cases[t.case]){let o=e.get(r.index-cn);o&&Rm(n,o,!1)}}function vI(n){let e=n[kc]??[],r=n[zt][rt];for(let o of e)GR(o,r);n[kc]=mn}function GR(n,e){let t=0,r=n.firstChild;if(r){let o=n.data[Nd];for(;t<o;){let i=r.nextSibling;Rm(e,r,!1),r=i,t++}}}function yI(n){vI(n);let e=n[yn];Yn(e)&&Pd(e);for(let t=vn;t<n.length;t++)Pd(n[t])}function Pd(n){zR(n);let e=n[Ne];for(let t=cn;t<e.bindingStartIndex;t++)if(pr(n[t])){let r=n[t];yI(r)}else Yn(n[t])&&Pd(n[t])}function qR(n){let e=n._views;for(let t of e){let r=pM(t);r!==null&&r[yn]!==null&&(Yn(r)?Pd(r):yI(r))}}function KR(n,e){let t=[];for(let r of e)for(let o=0;o<(r[M_]??1);o++){let i={data:r,firstChild:null};r[Nd]>0&&(i.firstChild=n,n=oh(r[Nd],n)),t.push(i)}return[n,t]}var CI=()=>null;function WR(n,e){let t=n[kc];return!e||t===null||t.length===0?null:t[0].data[cM]===e?t.shift():(vI(n),null)}function YR(){CI=WR}function ZE(n,e){return CI(n,e)}var Hs=class{},Lm=new oe("",{providedIn:"root",factory:()=>!1});var EI=new oe(""),wI=new oe(""),$g=class{},Fd=class{};function QR(n){let e=Error(`No component factory found for ${Wt(n)}.`);return e[ZR]=n,e}var ZR="ngComponent";var Gg=class{resolveComponentFactory(e){throw QR(e)}},js=class{static{this.NULL=new Gg}},zs=class{},Zs=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>JR()}}return n})();function JR(){let n=ot(),e=un(),t=Do(e.index,n);return(Yn(t)?t:n)[rt]}var XR=(()=>{class n{static{this.\u0275prov=ne({token:n,providedIn:"root",factory:()=>null})}}return n})();function qg(n,e,t){let r=t?n.styles:null,o=t?n.classes:null,i=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")i=a;else if(i==1)o=bE(o,a);else if(i==2){let c=a,l=e[++s];r=bE(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=o:n.classesWithoutHost=o}var Ld=class extends js{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=bo(e);return new $s(t,this.ngModule)}};function JE(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let o=n[r];if(o===void 0)continue;let i=Array.isArray(o),s=i?o[0]:o,a=i?o[1]:Io.None;e?t.push({propName:s,templateName:r,isSignal:(a&Io.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function ek(n){let e=n.toLowerCase();return e==="svg"?i0:e==="math"?s0:null}var $s=class extends Fd{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=JE(e.inputs,!0);if(t!==null)for(let o of r)t.hasOwnProperty(o.propName)&&(o.transform=t[o.propName]);return r}get outputs(){return JE(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=BD(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,o){let i=je(null);try{o=o||this.ngModule;let s=o instanceof Yt?o:o?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Sg(e,s):e,c=a.get(zs,null);if(c===null)throw new ue(407,!1);let l=a.get(XR,null),u=a.get(Hs,null),d={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:u},p=c.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",m=r?GM(p,r,this.componentDef.encapsulation,a):Am(p,h,ek(h)),g=512;this.componentDef.signals?g|=4096:this.componentDef.onPush||(g|=16);let y=null;m!==null&&(y=Im(m,a,!0));let w=Nm(0,null,null,1,0,null,null,null,null,null,null),S=eh(null,w,null,g,null,null,d,p,a,null,y);hm(S);let b,F,N=null;try{let V=this.componentDef,O,W=null;V.findHostDirectiveDefs?(O=[],W=new Map,V.findHostDirectiveDefs(V,O,W),O.push(V)):O=[V];let fe=tk(S,m);N=nk(fe,m,V,O,S,d,p),F=jw(w,cn),m&&ik(p,V,m,r),t!==void 0&&sk(F,this.ngContentSelectors,t),b=ok(N,V,O,W,S,[ak]),Om(w,S,null)}catch(V){throw N!==null&&Og(N),Og(S),V}finally{fm()}return new Kg(this.componentType,b,Yd(F,S),S,F)}finally{je(i)}}},Kg=class extends $g{constructor(e,t,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Ci(o,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,o;if(r!==null&&(o=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView;xm(i[Ne],i,o,e,t),this.previousInputValues.set(e,t);let s=Do(this._tNode.index,i);Pm(s,1)}}get injector(){return new fi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function tk(n,e){let t=n[Ne],r=cn;return n[r]=e,th(t,r,2,"#host",null)}function nk(n,e,t,r,o,i,s){let a=o[Ne];rk(r,n,e,s);let c=null;e!==null&&(c=Im(e,o[Ls]));let l=i.rendererFactory.createRenderer(e,t),u=16;t.signals?u=4096:t.onPush&&(u=64);let d=eh(o,nI(t),null,u,o[n.index],n,i,l,null,null,c);return a.firstCreatePass&&Hg(a,n,r.length-1),nh(o,d),o[n.index]=d}function rk(n,e,t,r){for(let o of n)e.mergedAttrs=Dc(e.mergedAttrs,o.hostAttrs);e.mergedAttrs!==null&&(qg(e,e.mergedAttrs,!0),t!==null&&K_(r,t,e))}function ok(n,e,t,r,o,i){let s=un(),a=o[Ne],c=On(s,o);sI(a,o,s,t,null,r);for(let u=0;u<t.length;u++){let d=s.directiveStart+u,p=Vs(o,a,d,s);yi(p,o)}aI(a,o,s),c&&yi(c,o);let l=Vs(o,a,s.directiveStart+s.componentOffset,s);if(n[Qn]=o[Qn]=l,i!==null)for(let u of i)u(l,e);return X_(a,s,o),l}function ik(n,e,t,r){if(r)Cg(n,t,["ng-version","18.2.5"]);else{let{attrs:o,classes:i}=VD(e.selectors[0]);o&&Cg(n,t,o),i&&i.length>0&&q_(n,t,i.join(" "))}}function sk(n,e,t){let r=n.projection=[];for(let o=0;o<e.length;o++){let i=t[o];r.push(i!=null?Array.from(i):null)}}function ak(){let n=un();gm(ot()[Ne],n)}var Vc=(()=>{class n{static{this.__NG_ELEMENT_ID__=ck}}return n})();function ck(){let n=un();return uk(n,ot())}var lk=Vc,_I=class extends lk{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Yd(this._hostTNode,this._hostLView)}get injector(){return new fi(this._hostTNode,this._hostLView)}get parentInjector(){let e=mm(this._hostTNode,this._hostLView);if(a_(e)){let t=Ad(e,this._hostLView),r=Sd(e),o=t[Ne].data[r+8];return new fi(o,t)}else return new fi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=XE(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-vn}createEmbeddedView(e,t,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=ZE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},i,s);return this.insertImpl(a,o,QE(this._hostTNode,s)),a}createComponent(e,t,r,o,i){let s=e&&!t0(e),a;if(s)a=t;else{let m=t||{};a=m.index,r=m.injector,o=m.projectableNodes,i=m.environmentInjector||m.ngModuleRef}let c=s?e:new $s(bo(e)),l=r||this.parentInjector;if(!i&&c.ngModule==null){let g=(s?l:this.parentInjector).get(Yt,null);g&&(i=g)}let u=bo(c.componentType??{}),d=ZE(this._lContainer,u?.id??null),p=d?.firstChild??null,h=c.create(l,o,p,i);return this.insertImpl(h.hostView,a,QE(this._hostTNode,d)),h}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let o=e._lView;if(a0(o)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=o[zt],l=new _I(c,c[Jn],c[zt]);l.detach(l.indexOf(e))}}let i=this._adjustIndex(t),s=this._lContainer;return yR(s,o,i,r),e.attachToViewContainerRef(),yw(dg(s),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=XE(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Bg(this._lContainer,t);r&&(yd(dg(this._lContainer),t),H_(r[Ne],r))}detach(e){let t=this._adjustIndex(e,-1),r=Bg(this._lContainer,t);return r&&yd(dg(this._lContainer),t)!=null?new Ci(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function XE(n){return n[wd]}function dg(n){return n[wd]||(n[wd]=[])}function uk(n,e){let t,r=e[n.index];return pr(r)?t=r:(t=cI(r,e,null,n),e[n.index]=t,nh(e,t)),II(t,e,n,r),new _I(t,n,e)}function dk(n,e){let t=n[rt],r=t.createComment(""),o=On(e,n),i=z_(t,o);return xd(t,i,r,OM(t,o),!1),r}var II=bI,Um=()=>!1;function hk(n,e,t){return Um(n,e,t)}function bI(n,e,t,r){if(n[Pr])return;let o;t.type&8?o=Zn(r):o=dk(e,t),n[Pr]=o}function fk(n,e,t){if(n[Pr]&&n[kc])return!0;let r=t[fr],o=e.index-cn;if(!r||X0(e)||Bc(r,o))return!1;let s=Lg(r,o),a=r.data[_m]?.[o],[c,l]=KR(s,a);return n[Pr]=c,n[kc]=l,!0}function pk(n,e,t,r){Um(n,t,e)||bI(n,e,t,r)}function gk(){II=pk,Um=fk}var ew=new Set;function Br(n){ew.has(n)||(ew.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function mk(n){return typeof n=="function"&&n[Nr]!==void 0}function Hc(n,e){Br("NgSignals");let t=ZC(n),r=t[Nr];return e?.equal&&(r.equal=e.equal),t.set=o=>Lp(r,o),t.update=o=>JC(r,o),t.asReadonly=vk.bind(t),t}function vk(){let n=this[Nr];if(n.readonlyFn===void 0){let e=()=>this();e[Nr]=n,n.readonlyFn=e}return n.readonlyFn}function TI(n){return mk(n)&&typeof n.set=="function"}function yk(n){return Object.getPrototypeOf(n.prototype).constructor}function Vr(n){let e=yk(n.type),t=!0,r=[n];for(;e;){let o;if(To(n))o=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ue(903,!1);o=e.\u0275dir}if(o){if(t){r.push(o);let s=n;s.inputs=ad(n.inputs),s.inputTransforms=ad(n.inputTransforms),s.declaredInputs=ad(n.declaredInputs),s.outputs=ad(n.outputs);let a=o.hostBindings;a&&Ik(n,a);let c=o.viewQuery,l=o.contentQueries;if(c&&wk(n,c),l&&_k(n,l),Ck(n,o),sD(n.outputs,o.outputs),To(o)&&o.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(o.data.animation)}}let i=o.features;if(i)for(let s=0;s<i.length;s++){let a=i[s];a&&a.ngInherit&&a(n),a===Vr&&(t=!1)}}e=Object.getPrototypeOf(e)}Ek(r)}function Ck(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let o=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(o))continue;n.inputTransforms??={},n.inputTransforms[o]=e.inputTransforms[o]}}}function Ek(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let o=n[r];o.hostVars=e+=o.hostVars,o.hostAttrs=Dc(o.hostAttrs,t=Dc(t,o.hostAttrs))}}function ad(n){return n===Ps?{}:n===mn?[]:n}function wk(n,e){let t=n.viewQuery;t?n.viewQuery=(r,o)=>{e(r,o),t(r,o)}:n.viewQuery=e}function _k(n,e){let t=n.contentQueries;t?n.contentQueries=(r,o,i)=>{e(r,o,i),t(r,o,i)}:n.contentQueries=e}function Ik(n,e){let t=n.hostBindings;t?n.hostBindings=(r,o)=>{e(r,o),t(r,o)}:n.hostBindings=e}var So=class{},Nc=class{};var Wg=class extends So{constructor(e,t,r,o=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ld(this);let i=Sw(e);this._bootstrapComponents=F_(i.bootstrap),this._r3Injector=m_(e,t,[{provide:So,useValue:this},{provide:js,useValue:this.componentFactoryResolver},...r],Wt(e),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Yg=class extends Nc{constructor(e){super(),this.moduleType=e}create(e){return new Wg(this.moduleType,e,[])}};var Ud=class extends So{constructor(e){super(),this.componentFactoryResolver=new Ld(this),this.instance=null;let t=new Mc([...e.providers,{provide:So,useValue:this},{provide:js,useValue:this.componentFactoryResolver}],e.parent||cm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ih(n,e,t=null){return new Ud({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function sh(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function jc(n){return(n.flags&32)===32}function bk(n,e,t,r,o,i,s,a,c){let l=e.consts,u=th(e,n,4,s||null,a||null);iI(e,t,u,Td(l,c)),gm(e,u);let d=u.tView=Nm(2,u,r,o,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function Tk(n,e,t,r,o,i,s,a,c,l){let u=t+cn,d=e.firstCreatePass?bk(u,e,n,r,o,i,s,a,c):e.data[u];Uc(d,!1);let p=SI(e,n,d,t);pm()&&Mm(e,n,p,d),yi(p,n);let h=cI(p,n,p,d);return n[u]=h,nh(n,h),hk(h,d,n),lm(d)&&eI(e,n,d),c!=null&&tI(n,d,l),d}function Cn(n,e,t,r,o,i,s,a){let c=ot(),l=Pn(),u=Td(l.consts,i);return Tk(c,l,n,e,t,r,o,u,s,a),Cn}var SI=AI;function AI(n,e,t,r){return Mo(!0),e[rt].createComment("")}function Sk(n,e,t,r){let o=e[fr],i=!o||Lc()||jc(t)||Bc(o,r);if(Mo(i),i)return AI(n,e,t,r);let s=o.data[aM]?.[r]??null;s!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=s);let a=rh(o,n,e,t);Jd(o,r,a);let c=bm(o,r);return oh(c,a)}function Ak(){SI=Sk}var ks=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ks||{}),DI=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=ne({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Qg=class n{constructor(){this.ngZone=H(nt),this.scheduler=H(Hs),this.errorHandler=H(Fr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[ks.EarlyRead,ks.Write,ks.MixedReadWrite,ks.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=ne({token:n,providedIn:"root",factory:()=>new n})}},Zg=class{constructor(e,t,r,o){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=o.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy()}};function Bm(n,e){!e?.injector&&e0(Bm);let t=e?.injector??H(Nn);return bc(t)?(Br("NgAfterNextRender"),Mk(n,t,e,!0)):Rk}function Dk(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function Mk(n,e,t,r){let o=e.get(DI);o.impl??=e.get(Qg);let i=t?.phase??ks.MixedReadWrite,s=new Zg(o.impl,Dk(n,i),r,e.get(vm));return o.impl.register(s),s}var Rk={destroy(){}};function kk(n,e,t,r){return sh(n,dm(),t)?e+fw(t)+r:Qs}function cd(n,e){return n<<17|e<<2}function Ei(n){return n>>17&32767}function Nk(n){return(n&2)==2}function xk(n,e){return n&131071|e<<17}function Jg(n){return n|2}function Gs(n){return(n&131068)>>2}function hg(n,e){return n&-131069|e<<2}function Ok(n){return(n&1)===1}function Xg(n){return n|1}function Pk(n,e,t,r,o,i){let s=i?e.classBindings:e.styleBindings,a=Ei(s),c=Gs(s);n[r]=t;let l=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||Pc(d,u)>0)&&(l=!0)}else u=t;if(o)if(c!==0){let p=Ei(n[a+1]);n[r+1]=cd(p,a),p!==0&&(n[p+1]=hg(n[p+1],r)),n[a+1]=xk(n[a+1],r)}else n[r+1]=cd(a,0),a!==0&&(n[a+1]=hg(n[a+1],r)),a=r;else n[r+1]=cd(c,0),a===0?a=r:n[c+1]=hg(n[c+1],r),c=r;l&&(n[r+1]=Jg(n[r+1])),tw(n,u,r,!0),tw(n,u,r,!1),Fk(e,u,n,r,i),s=cd(a,c),i?e.classBindings=s:e.styleBindings=s}function Fk(n,e,t,r,o){let i=o?n.residualClasses:n.residualStyles;i!=null&&typeof e=="string"&&Pc(i,e)>=0&&(t[r+1]=Xg(t[r+1]))}function tw(n,e,t,r){let o=n[t+1],i=e===null,s=r?Ei(o):Gs(o),a=!1;for(;s!==0&&(a===!1||i);){let c=n[s],l=n[s+1];Lk(c,e)&&(a=!0,n[s+1]=r?Xg(l):Jg(l)),s=r?Ei(l):Gs(l)}a&&(n[t+1]=r?Jg(o):Xg(o))}function Lk(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Pc(n,e)>=0:!1}function Ve(n,e,t){let r=ot(),o=dm();if(sh(r,o,e)){let i=Pn(),s=r_();oI(i,s,r,n,e,r[rt],t,!1)}return Ve}function nw(n,e,t,r,o){let i=e.inputs,s=o?"class":"style";xm(n,t,i[s],s,r)}function ah(n,e){return Uk(n,e,null,!0),ah}function Uk(n,e,t,r){let o=ot(),i=Pn(),s=C0(2);if(i.firstUpdatePass&&Vk(i,n,s,r),e!==Qs&&sh(o,s,e)){let a=i.data[Ks()];Gk(i,a,o,o[rt],n,o[s+1]=qk(e,t),r,s)}}function Bk(n,e){return e>=n.expandoStartIndex}function Vk(n,e,t,r){let o=n.data;if(o[t+1]===null){let i=o[Ks()],s=Bk(n,t);Kk(i,r)&&e===null&&!s&&(e=!1),e=Hk(o,i,e,r),Pk(o,i,e,t,s,r)}}function Hk(n,e,t,r){let o=I0(n),i=r?e.residualClasses:e.residualStyles;if(o===null)(r?e.classBindings:e.styleBindings)===0&&(t=fg(null,n,e,t,r),t=xc(t,e.attrs,r),i=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==o)if(t=fg(o,n,e,t,r),i===null){let c=jk(n,e,r);c!==void 0&&Array.isArray(c)&&(c=fg(null,n,e,c[1],r),c=xc(c,e.attrs,r),zk(n,e,r,c))}else i=$k(n,e,r)}return i!==void 0&&(r?e.residualClasses=i:e.residualStyles=i),t}function jk(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Gs(r)!==0)return n[Ei(r)]}function zk(n,e,t,r){let o=t?e.classBindings:e.styleBindings;n[Ei(o)]=r}function $k(n,e,t){let r,o=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<o;i++){let s=n[i].hostAttrs;r=xc(r,s,t)}return xc(r,e.attrs,t)}function fg(n,e,t,r,o){let i=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(i=e[a],r=xc(r,i.hostAttrs,o),i!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function xc(n,e,t){let r=t?1:2,o=-1;if(e!==null)for(let i=0;i<e.length;i++){let s=e[i];typeof s=="number"?o=s:o===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),SD(n,s,t?!0:e[++i]))}return n===void 0?null:n}function Gk(n,e,t,r,o,i,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=Ok(l)?rw(c,e,t,o,Gs(l),s):void 0;if(!Bd(u)){Bd(i)||Nk(l)&&(i=rw(c,null,t,o,a,s));let d=Hw(Ks(),t);VM(r,s,d,o,i)}}function rw(n,e,t,r,o,i){let s=e===null,a;for(;o>0;){let c=n[o],l=Array.isArray(c),u=l?c[1]:c,d=u===null,p=t[o+1];p===Qs&&(p=d?mn:void 0);let h=d?tg(p,r):u===r?p:void 0;if(l&&!Bd(h)&&(h=tg(c,r)),Bd(h)&&(a=h,s))return a;let m=n[o+1];o=s?Ei(m):Gs(m)}if(e!==null){let c=i?e.residualClasses:e.residualStyles;c!=null&&(a=tg(c,r))}return a}function Bd(n){return n!==void 0}function qk(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Wt(Tm(n)))),n}function Kk(n,e){return(n.flags&(e?8:16))!==0}function Wk(n,e,t,r,o,i){let s=e.consts,a=Td(s,o),c=th(e,n,2,r,a);return iI(e,t,c,Td(s,i)),c.attrs!==null&&qg(c,c.attrs,!1),c.mergedAttrs!==null&&qg(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function ie(n,e,t,r){let o=ot(),i=Pn(),s=cn+n,a=o[rt],c=i.firstCreatePass?Wk(s,i,o,e,t,r):i.data[s],l=MI(i,o,c,a,e,n);o[s]=l;let u=lm(c);return Uc(c,!0),K_(a,l,c),!jc(c)&&pm()&&Mm(i,o,l,c),u0()===0&&yi(l,o),d0(),u&&(eI(i,o,c),X_(i,c,o)),r!==null&&tI(o,c),ie}function te(){let n=un();Yw()?v0():(n=n.parent,Uc(n,!1));let e=n;f0(e)&&g0(),h0();let t=Pn();return t.firstCreatePass&&(gm(t,n),Fw(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&M0(e)&&nw(t,e,ot(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&R0(e)&&nw(t,e,ot(),e.stylesWithoutHost,!1),te}function Ye(n,e,t,r){return ie(n,e,t,r),te(),Ye}var MI=(n,e,t,r,o,i)=>(Mo(!0),Am(r,o,o_()));function Yk(n,e,t,r,o,i){let s=e[fr],a=!s||Lc()||jc(t)||Bc(s,i);if(Mo(a),a)return Am(r,o,o_());let c=rh(s,n,e,t);return x_(s,i)&&Jd(s,i,c.nextSibling),s&&(E_(t)||w_(c))&&Fc(t)&&(p0(t),G_(c)),c}function Qk(){MI=Yk}var Zk=(n,e,t,r)=>(Mo(!0),U_(e[rt],""));function Jk(n,e,t,r){let o,i=e[fr],s=!i||Lc()||Bc(i,r)||jc(t);if(Mo(s),s)return U_(e[rt],"");let a=rh(i,n,e,t),c=vM(i,r);return Jd(i,r,a),o=oh(c,a),o}function Xk(){Zk=Jk}function bi(){return ot()}var Vd="en-US";var eN=Vd;function tN(n){typeof n=="string"&&(eN=n.toLowerCase().replace(/_/g,"-"))}var nN=(n,e,t)=>{};function it(n,e,t,r){let o=ot(),i=Pn(),s=un();return RI(i,o,o[rt],s,n,e,r),it}function rN(n,e,t,r){let o=n.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===t&&o[i+1]===r){let a=e[Ed],c=o[i+2];return a.length>c?a[c]:null}typeof s=="string"&&(i+=2)}return null}function RI(n,e,t,r,o,i,s){let a=lm(r),l=n.firstCreatePass&&hR(n),u=e[Qn],d=dR(e),p=!0;if(r.type&3||s){let g=On(r,e),y=s?s(g):g,w=d.length,S=s?F=>s(Zn(F[r.index])):r.index,b=null;if(!s&&a&&(b=rN(n,e,o,r.index)),b!==null){let F=b.__ngLastListenerFn__||b;F.__ngNextListenerFn__=i,b.__ngLastListenerFn__=i,p=!1}else{i=iw(r,e,u,i),nN(g,o,i);let F=t.listen(y,o,i);d.push(i,F),l&&l.push(o,S,w,w+1)}}else i=iw(r,e,u,i);let h=r.outputs,m;if(p&&h!==null&&(m=h[o])){let g=m.length;if(g)for(let y=0;y<g;y+=2){let w=m[y],S=m[y+1],N=e[w][S].subscribe(i),V=d.length;d.push(i,N),l&&l.push(o,r.index,V,-(V+1))}}}function ow(n,e,t,r){let o=je(null);try{return ur(6,e,t),t(r)!==!1}catch(i){return uI(n,i),!1}finally{ur(7,e,t),je(o)}}function iw(n,e,t,r){return function o(i){if(i===Function)return r;let s=n.componentOffset>-1?Do(n.index,e):e;Pm(s,5);let a=ow(e,t,r,i),c=o.__ngNextListenerFn__;for(;c;)a=ow(e,t,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function Je(n=1){return T0(n)}function ge(n,e=""){let t=ot(),r=Pn(),o=n+cn,i=r.firstCreatePass?th(r,o,1,e,null):r.data[o],s=kI(r,t,i,e,n);t[o]=s,pm()&&Mm(r,t,s,i),Uc(i,!1)}var kI=(n,e,t,r,o)=>(Mo(!0),L_(e[rt],r));function oN(n,e,t,r,o){let i=e[fr],s=!i||Lc()||jc(t)||Bc(i,o);return Mo(s),s?L_(e[rt],r):rh(i,n,e,t)}function iN(){kI=oN}function Vm(n){return NI("",n,""),Vm}function NI(n,e,t){let r=ot(),o=kk(r,n,e,t);return o!==Qs&&fR(r,Ks(),o),NI}function Hr(n,e,t){TI(e)&&(e=e());let r=ot(),o=dm();if(sh(r,o,e)){let i=Pn(),s=r_();oI(i,s,r,n,e,r[rt],t,!1)}return Hr}function Ro(n,e){let t=TI(n);return t&&n.set(e),t}function jr(n,e){let t=ot(),r=Pn(),o=un();return RI(r,t,t[rt],o,n,e),jr}function sN(n,e,t){let r=Pn();if(r.firstCreatePass){let o=To(n);em(t,r.data,r.blueprint,o,!0),em(e,r.data,r.blueprint,o,!1)}}function em(n,e,t,r,o){if(n=Kt(n),Array.isArray(n))for(let i=0;i<n.length;i++)em(n[i],e,t,r,o);else{let i=Pn(),s=ot(),a=un(),c=Fs(n)?n:Kt(n.provide),l=Nw(n),u=a.providerIndexes&1048575,d=a.directiveStart,p=a.providerIndexes>>20;if(Fs(n)||!n.multi){let h=new vi(l,o,Te),m=gg(c,e,o?u:u+p,d);m===-1?(Dg(Dd(a,s),i,c),pg(i,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),t.push(h),s.push(h)):(t[m]=h,s[m]=h)}else{let h=gg(c,e,u+p,d),m=gg(c,e,u,u+p),g=h>=0&&t[h],y=m>=0&&t[m];if(o&&!y||!o&&!g){Dg(Dd(a,s),i,c);let w=lN(o?cN:aN,t.length,o,r,l);!o&&y&&(t[m].providerFactory=w),pg(i,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),t.push(w),s.push(w)}else{let w=xI(t[o?m:h],l,!o&&r);pg(i,n,h>-1?h:m,w)}!o&&r&&y&&t[m].componentProviders++}}}function pg(n,e,t,r){let o=Fs(e),i=KD(e);if(o||i){let c=(i?Kt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!o&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[r,c]):l[u+1].push(r,c)}else l.push(t,c)}}}function xI(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function gg(n,e,t,r){for(let o=t;o<r;o++)if(e[o]===n)return o;return-1}function aN(n,e,t,r){return tm(this.multi,[])}function cN(n,e,t,r){let o=this.multi,i;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Vs(t,t[Ne],this.providerFactory.index,r);i=a.slice(0,s),tm(o,i);for(let c=s;c<a.length;c++)i.push(a[c])}else i=[],tm(o,i);return i}function tm(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function lN(n,e,t,r,o){let i=new vi(n,t,Te);return i.multi=[],i.index=e,i.componentProviders=0,xI(i,o,r&&!t),i}function zc(n,e=[]){return t=>{t.providersResolver=(r,o)=>sN(r,o?o(n):n,e)}}var uN=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Mw(!1,t.type),o=r.length>0?ih([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,o)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=ne({token:n,providedIn:"environment",factory:()=>new n(X(Yt))})}}return n})();function Ot(n){Br("NgStandalone"),n.getStandaloneInjector=e=>e.get(uN).getOrCreateStandaloneInjector(n)}var ch=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var OI=new oe("");function Ti(n){return!!n&&typeof n.then=="function"}function PI(n){return!!n&&typeof n.subscribe=="function"}var lh=new oe(""),FI=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=H(lh,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let o of this.appInits){let i=o();if(Ti(i))t.push(i);else if(PI(i)){let s=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(o=>{this.reject(o)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Si=new oe("");function dN(){QC(()=>{throw new ue(600,!1)})}function hN(n){return n.isBoundToModule}var fN=10;function pN(n,e,t){try{let r=t();return Ti(r)?r.catch(o=>{throw e.runOutsideAngular(()=>n.handleError(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var gr=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=H(Y0),this.afterRenderManager=H(DI),this.zonelessEnabled=H(Lm),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ft,this.afterTick=new ft,this.componentTypes=[],this.components=[],this.isStable=H(Ur).hasPendingTasks.pipe(me(t=>!t)),this._injector=H(Yt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let o=t instanceof Fd;if(!this._injector.get(FI).done){let p=!o&&Tw(t),h=!1;throw new ue(405,h)}let s;o?s=t:s=this._injector.get(js).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=hN(s)?void 0:this._injector.get(So),c=r||s.selector,l=s.create(Nn.NULL,[],c,a),u=l.location.nativeElement,d=l.injector.get(OI,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),pd(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new ue(101,!1);let t=je(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,je(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(zs,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<fN;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:o,notifyErrorHandler:i}of this._views)gN(o,i,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Kd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;pd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Si,[]);[...this._bootstrapListeners,...r].forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>pd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ue(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function pd(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var ld;function uh(n){ld??=new WeakMap;let e=ld.get(n);if(e)return e;let t=n.isStable.pipe(qn(r=>r)).toPromise().then(()=>{});return ld.set(n,t),n.onDestroy(()=>ld?.delete(n)),t}function gN(n,e,t,r){if(!t&&!Kd(n))return;fI(n,e,t&&!r?0:1)}var nm=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},dh=(()=>{class n{compileModuleSync(t){return new Yg(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),o=Sw(t),i=F_(o.declarations).reduce((s,a)=>{let c=bo(a);return c&&s.push(new $s(c)),s},[]);return new nm(r,i)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var mN=(()=>{class n{constructor(){this.zone=H(nt),this.changeDetectionScheduler=H(Hs),this.applicationRef=H(gr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),vN=new oe("",{factory:()=>!1});function LI({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new nt(J(D({},UI()),{scheduleInRootZone:t})),[{provide:nt,useFactory:n},{provide:pi,multi:!0,useFactory:()=>{let r=H(mN,{optional:!0});return()=>r.initialize()}},{provide:pi,multi:!0,useFactory:()=>{let r=H(yN);return()=>{r.initialize()}}},e===!0?{provide:EI,useValue:!0}:[],{provide:wI,useValue:t??v_}]}function Hm(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=LI({ngZoneFactory:()=>{let o=UI(n);return o.scheduleInRootZone=t,o.shouldCoalesceEventChangeDetection&&Br("NgZone_CoalesceEvent"),new nt(o)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Ao([{provide:vN,useValue:!0},{provide:Lm,useValue:!1},r])}function UI(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var yN=(()=>{class n{constructor(){this.subscription=new yt,this.initialized=!1,this.zone=H(nt),this.pendingTasks=H(Ur)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{nt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{nt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var CN=(()=>{class n{constructor(){this.appRef=H(gr),this.taskService=H(Ur),this.ngZone=H(nt),this.zonelessEnabled=H(Lm),this.disableScheduling=H(EI,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new yt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Rd):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(H(wI,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof xg||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?jE:y_;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Rd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,jE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function EN(){return typeof $localize<"u"&&$localize.locale||Vd}var jm=new oe("",{providedIn:"root",factory:()=>H(jm,Me.Optional|Me.SkipSelf)||EN()});var BI=new oe("");function ud(n){return!!n.platformInjector}function wN(n){let e=ud(n)?n.r3Injector:n.moduleRef.injector,t=e.get(nt);return t.run(()=>{ud(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Fr,null),o;if(t.runOutsideAngular(()=>{o=t.onError.subscribe({next:i=>{r.handleError(i)}})}),ud(n)){let i=()=>e.destroy(),s=n.platformInjector.get(BI);s.add(i),e.onDestroy(()=>{o.unsubscribe(),s.delete(i)})}else n.moduleRef.onDestroy(()=>{pd(n.allPlatformModules,n.moduleRef),o.unsubscribe()});return pN(r,t,()=>{let i=e.get(FI);return i.runInitializers(),i.donePromise.then(()=>{let s=e.get(jm,Vd);if(tN(s||Vd),ud(n)){let a=e.get(gr);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return _N(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function _N(n,e){let t=n.injector.get(gr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ue(-403,!1);e.push(n)}var gd=null;function IN(n=[],e){return Nn.create({name:e,providers:[{provide:Gd,useValue:"platform"},{provide:BI,useValue:new Set([()=>gd=null])},...n]})}function bN(n=[]){if(gd)return gd;let e=IN(n);return gd=e,dN(),TN(e),e}function TN(n){n.get(Em,null)?.forEach(t=>t())}var Js=(()=>{class n{static{this.__NG_ELEMENT_ID__=SN}}return n})();function SN(n){return AN(un(),ot(),(n&16)===16)}function AN(n,e,t){if(Fc(n)&&!t){let r=Do(n.index,e);return new Ci(r,r)}else if(n.type&175){let r=e[kn];return new Ci(r,e)}return null}function VI(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,o=bN(r),i=[LI({}),{provide:Hs,useExisting:CN},...t||[]],s=new Ud({providers:i,parent:o,debugName:"",runEnvironmentInitializers:!1});return wN({r3Injector:s.injector,platformInjector:o,rootComponent:e})}catch(e){return Promise.reject(e)}}var HI=new oe("");var sw=!1;function DN(){sw||(sw=!0,fM(),Qk(),iN(),Xk(),Ak(),gk(),YR(),WM())}function MN(n,e){return uh(n)}function jI(){return Ao([{provide:sd,useFactory:()=>{let n=!0;return bc()&&(n=!!H(Ys,{optional:!0})?.get(k_,null)),n&&Br("NgHydration"),n}},{provide:pi,useValue:()=>{jR(!1),bc()&&H(sd)&&(RN(),DN())},multi:!0},{provide:P_,useFactory:()=>bc()&&H(sd)},{provide:Si,useFactory:()=>{if(bc()&&H(sd)){let n=H(gr),e=H(Nn);return()=>{MN(n,e).then(()=>{qR(n)})}}return()=>{}},multi:!0}])}function RN(){let n=Qd(),e;for(let t of n.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===dM){e=t;break}if(!e)throw new ue(-507,!1)}function $c(n,e){Br("NgSignals");let t=KC(n);return e?.equal&&(t[Nr].equal=e.equal),t}function zr(n){let e=je(null);try{return n()}finally{je(e)}}function zI(n){let e=bo(n);if(!e)return null;let t=new $s(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var WI=null;function Gr(){return WI}function YI(n){WI??=n}var hh=class{};var Dt=new oe(""),Km=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>H(xN),providedIn:"platform"})}}return n})(),QI=new oe(""),xN=(()=>{class n extends Km{constructor(){super(),this._doc=H(Dt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Gr().getBaseHref(this._doc)}onPopState(t){let r=Gr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Gr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){this._history.pushState(t,r,o)}replaceState(t,r,o){this._history.replaceState(t,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Wm(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function $I(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function $r(n){return n&&n[0]!=="?"?"?"+n:n}var Ai=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>H(Ym),providedIn:"root"})}}return n})(),ZI=new oe(""),Ym=(()=>{class n extends Ai{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??H(Dt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Wm(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+$r(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,i){let s=this.prepareExternalUrl(o+$r(i));this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){let s=this.prepareExternalUrl(o+$r(i));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(X(Km),X(ZI,8))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),JI=(()=>{class n extends Ai{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Wm(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,i){let s=this.prepareExternalUrl(o+$r(i));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){let s=this.prepareExternalUrl(o+$r(i));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(X(Km),X(ZI,8))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),qr=(()=>{class n{constructor(t){this._subject=new wt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=FN($I(GI(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+$r(r))}normalize(t){return n.stripTrailingSlash(PN(this._basePath,GI(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$r(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$r(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}static{this.normalizeQueryParams=$r}static{this.joinWithSlash=Wm}static{this.stripTrailingSlash=$I}static{this.\u0275fac=function(r){return new(r||n)(X(Ai))}}static{this.\u0275prov=ne({token:n,factory:()=>ON(),providedIn:"root"})}}return n})();function ON(){return new qr(X(Ai))}function PN(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function GI(n){return n.replace(/\/index.html$/,"")}function FN(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function fh(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[o,i]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}var ko=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new zm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){qI("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){qI("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Te(Vc),Te(Fm))}}static{this.\u0275dir=ln({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),zm=class{constructor(){this.$implicit=null,this.ngIf=null}};function qI(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Wt(e)}'.`)}var En=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Zt({type:n})}static{this.\u0275inj=Qt({})}}return n})(),Qm="browser",LN="server";function UN(n){return n===Qm}function Gc(n){return n===LN}var XI=(()=>{class n{static{this.\u0275prov=ne({token:n,providedIn:"root",factory:()=>UN(H(Fn))?new $m(H(Dt),window):new Gm})}}return n})(),$m=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=BN(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}};function BN(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),o=r.currentNode;for(;o;){let i=o.shadowRoot;if(i){let s=i.getElementById(e)||i.querySelector(`[name="${e}"]`);if(s)return s}o=r.nextNode()}}return null}var Gm=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Xs=class{};var Kc=class{},mh=class{},vr=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let o=t.slice(0,r),i=o.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(o,i),this.headers.has(i)?this.headers.get(i).push(s):this.headers.set(i,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let o=(e.op==="a"?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":let i=e.value;if(!i)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>i.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(i=>i.toString()),o=e.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(e,o)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Jm=class{encodeKey(e){return eb(e)}encodeValue(e){return eb(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function VN(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{let i=o.indexOf("="),[s,a]=i==-1?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,i)),e.decodeValue(o.slice(i+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var HN=/%(\d[a-f0-9])/gi,jN={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function eb(n){return encodeURIComponent(n).replace(HN,(e,t)=>jN[t]??e)}function ph(n){return`${n}`}var No=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Jm,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=VN(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],o=Array.isArray(r)?r.map(ph):[ph(r)];this.map.set(t,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let o=e[r];Array.isArray(o)?o.forEach(i=>{t.push({param:r,value:i,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(ph(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],o=r.indexOf(ph(e.value));o!==-1&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Xm=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function zN(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function tb(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function nb(n){return typeof Blob<"u"&&n instanceof Blob}function rb(n){return typeof FormData<"u"&&n instanceof FormData}function $N(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var qc=class n{constructor(e,t,r,o){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let i;if(zN(this.method)||o?(this.body=r!==void 0?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),this.transferCache=i.transferCache),this.headers??=new vr,this.context??=new Xm,!this.params)this.params=new No,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||tb(this.body)||nb(this.body)||rb(this.body)||$N(this.body)?this.body:this.body instanceof No?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||rb(this.body)?null:nb(this.body)?this.body.type||null:tb(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof No?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,o=e.responseType||this.responseType,i=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,u=e.params||this.params,d=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((p,h)=>p.set(h,e.setHeaders[h]),l)),e.setParams&&(u=Object.keys(e.setParams).reduce((p,h)=>p.set(h,e.setParams[h]),u)),new n(t,r,s,{params:u,headers:l,context:d,reportProgress:c,responseType:o,withCredentials:a,transferCache:i})}},Kr=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Kr||{}),Wc=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new vr,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},vh=class n extends Wc{constructor(e={}){super(e),this.type=Kr.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},xo=class n extends Wc{constructor(e={}){super(e),this.type=Kr.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},mr=class extends Wc{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},nv=200,GN=204;function Zm(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Di=(()=>{class n{constructor(t){this.handler=t}request(t,r,o={}){let i;if(t instanceof qc)i=t;else{let c;o.headers instanceof vr?c=o.headers:c=new vr(o.headers);let l;o.params&&(o.params instanceof No?l=o.params:l=new No({fromObject:o.params})),i=new qc(t,r,o.body!==void 0?o.body:null,{headers:c,context:o.context,params:l,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let s=le(i).pipe(Dn(c=>this.handler.handle(c)));if(t instanceof qc||o.observe==="events")return s;let a=s.pipe(Gt(c=>c instanceof xo));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(me(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(me(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(me(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(me(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new No().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,Zm(o,r))}post(t,r,o={}){return this.request("POST",t,Zm(o,r))}put(t,r,o={}){return this.request("PUT",t,Zm(o,r))}static{this.\u0275fac=function(r){return new(r||n)(X(Kc))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),qN=/^\)\]\}',?\n/,KN="X-Request-URL";function ob(n){if(n.url)return n.url;let e=KN.toLocaleLowerCase();return n.headers.get(e)}var WN=(()=>{class n{constructor(){this.fetchImpl=H(ev,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=H(nt)}handle(t){return new Oe(r=>{let o=new AbortController;return this.doRequest(t,o.signal,r).then(tv,i=>r.error(new mr({error:i}))),()=>o.abort()})}doRequest(t,r,o){return T(this,null,function*(){let i=this.createRequestInit(t),s;try{let h=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,D({signal:r},i)));YN(h),o.next({type:Kr.Sent}),s=yield h}catch(h){o.error(new mr({error:h,status:h.status??0,statusText:h.statusText,url:t.urlWithParams,headers:h.headers}));return}let a=new vr(s.headers),c=s.statusText,l=ob(s)??t.urlWithParams,u=s.status,d=null;if(t.reportProgress&&o.next(new vh({headers:a,status:u,statusText:c,url:l})),s.body){let h=s.headers.get("content-length"),m=[],g=s.body.getReader(),y=0,w,S,b=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>T(this,null,function*(){for(;;){let{done:N,value:V}=yield g.read();if(N)break;if(m.push(V),y+=V.length,t.reportProgress){S=t.responseType==="text"?(S??"")+(w??=new TextDecoder).decode(V,{stream:!0}):void 0;let O=()=>o.next({type:Kr.DownloadProgress,total:h?+h:void 0,loaded:y,partialText:S});b?b.run(O):O()}}}));let F=this.concatChunks(m,y);try{let N=s.headers.get("Content-Type")??"";d=this.parseBody(t,F,N)}catch(N){o.error(new mr({error:N,headers:new vr(s.headers),status:s.status,statusText:s.statusText,url:ob(s)??t.urlWithParams}));return}}u===0&&(u=d?nv:0),u>=200&&u<300?(o.next(new xo({body:d,headers:a,status:u,statusText:c,url:l})),o.complete()):o.error(new mr({error:d,headers:a,status:u,statusText:c,url:l}))})}parseBody(t,r,o){switch(t.responseType){case"json":let i=new TextDecoder().decode(r).replace(qN,"");return i===""?null:JSON.parse(i);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:o});case"arraybuffer":return r.buffer}}createRequestInit(t){let r={},o=t.withCredentials?"include":void 0;if(t.headers.forEach((i,s)=>r[i]=s.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let i=t.detectContentTypeHeader();i!==null&&(r["Content-Type"]=i)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:o}}concatChunks(t,r){let o=new Uint8Array(r),i=0;for(let s of t)o.set(s,i),i+=s.length;return o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),ev=class{};function tv(){}function YN(n){n.then(tv,tv)}function mb(n,e){return e(n)}function QN(n,e){return(t,r)=>e.intercept(t,{handle:o=>n(o,r)})}function ZN(n,e,t){return(r,o)=>xn(t,()=>e(r,i=>n(i,o)))}var JN=new oe(""),Eh=new oe(""),vb=new oe(""),yb=new oe("",{providedIn:"root",factory:()=>!0});function XN(){let n=null;return(e,t)=>{n===null&&(n=(H(JN,{optional:!0})??[]).reduceRight(QN,mb));let r=H(Ur);if(H(yb)){let i=r.add();return n(e,t).pipe(Eo(()=>r.remove(i)))}else return n(e,t)}}var ib=(()=>{class n extends Kc{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=H(Ur),this.contributeToStability=H(yb)}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Eh),...this.injector.get(vb,[])]));this.chain=r.reduceRight((o,i)=>ZN(o,i,this.injector),mb)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,o=>this.backend.handle(o)).pipe(Eo(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||n)(X(mh),X(Yt))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),ex=0,sb,tx="JSONP injected script did not invoke callback.",nx="JSONP requests must use JSONP request method.",rx="JSONP requests must use Json response type.",ox="JSONP requests do not support headers.",yh=class{};function ix(){return typeof window=="object"?window:{}}var Cb=(()=>{class n{constructor(t,r){this.callbackMap=t,this.document=r,this.resolvedPromise=Promise.resolve()}nextCallback(){return`ng_jsonp_callback_${ex++}`}handle(t){if(t.method!=="JSONP")throw new Error(nx);if(t.responseType!=="json")throw new Error(rx);if(t.headers.keys().length>0)throw new Error(ox);return new Oe(r=>{let o=this.nextCallback(),i=t.urlWithParams.replace(/=JSONP_CALLBACK(&|$)/,`=${o}$1`),s=this.document.createElement("script");s.src=i;let a=null,c=!1;this.callbackMap[o]=p=>{delete this.callbackMap[o],a=p,c=!0};let l=()=>{s.removeEventListener("load",u),s.removeEventListener("error",d),s.remove(),delete this.callbackMap[o]},u=p=>{this.resolvedPromise.then(()=>{if(l(),!c){r.error(new mr({url:i,status:0,statusText:"JSONP Error",error:new Error(tx)}));return}r.next(new xo({body:a,status:nv,statusText:"OK",url:i})),r.complete()})},d=p=>{l(),r.error(new mr({error:p,status:0,statusText:"JSONP Error",url:i}))};return s.addEventListener("load",u),s.addEventListener("error",d),this.document.body.appendChild(s),r.next({type:Kr.Sent}),()=>{c||this.removeListeners(s),l()}})}removeListeners(t){sb??=this.document.implementation.createHTMLDocument(),sb.adoptNode(t)}static{this.\u0275fac=function(r){return new(r||n)(X(yh),X(Dt))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})();function sx(n,e){return n.method==="JSONP"?H(Cb).handle(n):e(n)}var ax=/^\)\]\}',?\n/;function cx(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var ab=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new ue(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?De(r.\u0275loadImpl()):le(null)).pipe(qt(()=>new Oe(i=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((g,y)=>s.setRequestHeader(g,y.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let g=t.detectContentTypeHeader();g!==null&&s.setRequestHeader("Content-Type",g)}if(t.responseType){let g=t.responseType.toLowerCase();s.responseType=g!=="json"?g:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let g=s.statusText||"OK",y=new vr(s.getAllResponseHeaders()),w=cx(s)||t.url;return c=new vh({headers:y,status:s.status,statusText:g,url:w}),c},u=()=>{let{headers:g,status:y,statusText:w,url:S}=l(),b=null;y!==GN&&(b=typeof s.response>"u"?s.responseText:s.response),y===0&&(y=b?nv:0);let F=y>=200&&y<300;if(t.responseType==="json"&&typeof b=="string"){let N=b;b=b.replace(ax,"");try{b=b!==""?JSON.parse(b):null}catch(V){b=N,F&&(F=!1,b={error:V,text:b})}}F?(i.next(new xo({body:b,headers:g,status:y,statusText:w,url:S||void 0})),i.complete()):i.error(new mr({error:b,headers:g,status:y,statusText:w,url:S||void 0}))},d=g=>{let{url:y}=l(),w=new mr({error:g,status:s.status||0,statusText:s.statusText||"Unknown Error",url:y||void 0});i.error(w)},p=!1,h=g=>{p||(i.next(l()),p=!0);let y={type:Kr.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(y.total=g.total),t.responseType==="text"&&s.responseText&&(y.partialText=s.responseText),i.next(y)},m=g=>{let y={type:Kr.UploadProgress,loaded:g.loaded};g.lengthComputable&&(y.total=g.total),i.next(y)};return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",d),s.addEventListener("abort",d),t.reportProgress&&(s.addEventListener("progress",h),a!==null&&s.upload&&s.upload.addEventListener("progress",m)),s.send(a),i.next({type:Kr.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",d),t.reportProgress&&(s.removeEventListener("progress",h),a!==null&&s.upload&&s.upload.removeEventListener("progress",m)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(X(Xs))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),Eb=new oe(""),lx="XSRF-TOKEN",ux=new oe("",{providedIn:"root",factory:()=>lx}),dx="X-XSRF-TOKEN",hx=new oe("",{providedIn:"root",factory:()=>dx}),Ch=class{},fx=(()=>{class n{constructor(t,r,o){this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=fh(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(X(Dt),X(Fn),X(ux))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})();function px(n,e){let t=n.url.toLowerCase();if(!H(Eb)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=H(Ch).getToken(),o=H(hx);return r!=null&&!n.headers.has(o)&&(n=n.clone({headers:n.headers.set(o,r)})),e(n)}var rv=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(rv||{});function wb(n,e){return{\u0275kind:n,\u0275providers:e}}function wh(...n){let e=[Di,ab,ib,{provide:Kc,useExisting:ib},{provide:mh,useFactory:()=>H(WN,{optional:!0})??H(ab)},{provide:Eh,useValue:px,multi:!0},{provide:Eb,useValue:!0},{provide:Ch,useClass:fx}];for(let t of n)e.push(...t.\u0275providers);return Ao(e)}var cb=new oe("");function gx(){return wb(rv.LegacyInterceptors,[{provide:cb,useFactory:XN},{provide:Eh,useExisting:cb,multi:!0}])}function _b(){return wb(rv.JsonpSupport,[Cb,{provide:yh,useFactory:ix},{provide:Eh,useValue:sx,multi:!0}])}var Ib=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Zt({type:n})}static{this.\u0275inj=Qt({providers:[wh(gx())]})}}return n})();var mx=new oe(""),lb="b",ub="h",db="s",hb="st",fb="u",pb="rt",gh=new oe(""),vx=["GET","HEAD"];function yx(n,e){let h=H(gh),{isCacheActive:t}=h,r=ar(h,["isCacheActive"]),{transferCache:o,method:i}=n;if(!t||o===!1||i==="POST"&&!r.includePostRequests&&!o||i!=="POST"&&!vx.includes(i)||!r.includeRequestsWithAuthHeaders&&Cx(n)||r.filter?.(n)===!1)return e(n);let s=H(Ys),a=H(mx,{optional:!0}),c=Gc(H(Fn));if(a&&!c)throw new ue(2803,!1);let l=c&&a?Ix(n.url,a):n.url,u=wx(n,l),d=s.get(u,null),p=r.includeHeaders;if(typeof o=="object"&&o.includeHeaders&&(p=o.includeHeaders),d){let{[lb]:m,[pb]:g,[ub]:y,[db]:w,[hb]:S,[fb]:b}=d,F=m;switch(g){case"arraybuffer":F=new TextEncoder().encode(m).buffer;break;case"blob":F=new Blob([m]);break}let N=new vr(y);return le(new xo({body:F,headers:N,status:w,statusText:S,url:b}))}return e(n).pipe(bt(m=>{m instanceof xo&&c&&s.set(u,{[lb]:m.body,[ub]:Ex(m.headers,p),[db]:m.status,[hb]:m.statusText,[fb]:l,[pb]:n.responseType})}))}function Cx(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function Ex(n,e){if(!e)return{};let t={};for(let r of e){let o=n.getAll(r);o!==null&&(t[r]=o)}return t}function gb(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function wx(n,e){let{params:t,method:r,responseType:o}=n,i=gb(t),s=n.serializeBody();s instanceof URLSearchParams?s=gb(s):typeof s!="string"&&(s="");let a=[r,o,e,s,i].join("|"),c=_x(a);return c}function _x(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function bb(n){return[{provide:gh,useFactory:()=>(Br("NgHttpTransferCache"),D({isCacheActive:!0},n))},{provide:vb,useValue:yx,multi:!0,deps:[Ys,gh]},{provide:Si,multi:!0,useFactory:()=>{let e=H(gr),t=H(gh);return()=>{uh(e).then(()=>{t.isCacheActive=!1})}}}]}function Ix(n,e){let t=new URL(n,"resolve://").origin,r=e[t];return r?n.replace(t,r):n}var av=class extends hh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},cv=class n extends av{static makeCurrent(){YI(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=bx();return t==null?null:Tx(t)}resetBaseElement(){Yc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return fh(document.cookie,e)}},Yc=null;function bx(){return Yc=Yc||document.querySelector("base"),Yc?Yc.getAttribute("href"):null}function Tx(n){return new URL(n,document.baseURI).pathname}var Sx=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),_h=new oe(""),Db=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(i=>i.supports(t)),!r)throw new ue(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(X(_h),X(nt))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),Qc=class{constructor(e){this._doc=e}},iv="ng-app-id",Mb=(()=>{class n{constructor(t,r,o,i={}){this.doc=t,this.appId=r,this.nonce=o,this.platformId=i,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Gc(i),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(o=>o.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${iv}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(t,r){let o=this.styleRef;if(o.has(t)){let i=o.get(t);return i.usage+=r,i.usage}return o.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let o=this.styleNodesInDOM,i=o?.get(r);if(i?.parentNode===t)return o.delete(r),i.removeAttribute(iv),i;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(iv,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let o=this.getStyleElement(t,r),i=this.styleRef,s=i.get(r)?.elements;s?s.push(o):i.set(r,{elements:[o],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(X(Dt),X(Zd),X(wm,8),X(Fn))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),sv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},dv=/%COMP%/g,Rb="%COMP%",Ax=`_nghost-${Rb}`,Dx=`_ngcontent-${Rb}`,Mx=!0,Rx=new oe("",{providedIn:"root",factory:()=>Mx});function kx(n){return Dx.replace(dv,n)}function Nx(n){return Ax.replace(dv,n)}function kb(n,e){return e.map(t=>t.replace(dv,n))}var Tb=(()=>{class n{constructor(t,r,o,i,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Gc(a),this.defaultRenderer=new Zc(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===hr.ShadowDom&&(r=J(D({},r),{encapsulation:hr.Emulated}));let o=this.getOrCreateRenderer(t,r);return o instanceof Ih?o.applyToHost(t):o instanceof Jc&&o.applyStyles(),o}getOrCreateRenderer(t,r){let o=this.rendererByCompId,i=o.get(r.id);if(!i){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case hr.Emulated:i=new Ih(c,l,r,this.appId,u,s,a,d);break;case hr.ShadowDom:return new lv(c,l,t,r,s,a,this.nonce,d);default:i=new Jc(c,l,r,u,s,a,d);break}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(X(Db),X(Mb),X(Zd),X(Rx),X(Dt),X(Fn),X(nt),X(wm))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),Zc=class{constructor(e,t,r,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(sv[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Sb(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Sb(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ue(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;let i=sv[o];i?e.setAttributeNS(i,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let o=sv[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(Lr.DashCase|Lr.Important)?e.style.setProperty(t,r,o&Lr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Lr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Gr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Sb(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var lv=class extends Zc{constructor(e,t,r,o,i,s,a,c){super(e,i,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=kb(o.id,o.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Jc=class extends Zc{constructor(e,t,r,o,i,s,a,c){super(e,i,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=o,this.styles=c?kb(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ih=class extends Jc{constructor(e,t,r,o,i,s,a,c){let l=o+"-"+r.id;super(e,t,r,i,s,a,c,l),this.contentAttr=kx(l),this.hostAttr=Nx(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},xx=(()=>{class n extends Qc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}static{this.\u0275fac=function(r){return new(r||n)(X(Dt))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),Ox=(()=>{class n extends Qc{constructor(t){super(t),this.delegate=H(HI,{optional:!0})}supports(t){return this.delegate?this.delegate.supports(t):!1}addEventListener(t,r,o){return this.delegate.addEventListener(t,r,o)}removeEventListener(t,r,o){return this.delegate.removeEventListener(t,r,o)}static{this.\u0275fac=function(r){return new(r||n)(X(Dt))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),Ab=["alt","control","meta","shift"],Px={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Fx={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Lx=(()=>{class n extends Qc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,o){let i=n.parseEventName(r),s=n.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Gr().onAndCancel(t,i.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let i=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Ab.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=i,r.length!=0||i.length===0)return null;let c={};return c.domEventName=o,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let o=Px[t.key]||t.key,i="";return r.indexOf("code.")>-1&&(o=t.code,i="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),Ab.forEach(s=>{if(s!==o){let a=Fx[s];a(t)&&(i+=s+".")}}),i+=o,i===r)}static eventCallback(t,r,o){return i=>{n.matchEventFullKeyCode(i,t)&&o.runGuarded(()=>r(i))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(X(Dt))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})();function Nb(n,e){return VI(D({rootComponent:n},Ux(e)))}function Ux(n){return{appProviders:[...zx,...n?.providers??[]],platformProviders:jx}}function Bx(){cv.makeCurrent()}function Vx(){return new Fr}function Hx(){return S_(document),document}var jx=[{provide:Fn,useValue:Qm},{provide:Em,useValue:Bx,multi:!0},{provide:Dt,useFactory:Hx,deps:[]}];var zx=[{provide:Gd,useValue:"root"},{provide:Fr,useFactory:Vx,deps:[]},{provide:_h,useClass:xx,multi:!0,deps:[Dt,nt,Fn]},{provide:_h,useClass:Lx,multi:!0,deps:[Dt]},{provide:_h,useClass:Ox,multi:!0},Tb,Mb,Db,{provide:zs,useExisting:Tb},{provide:Xs,useClass:Sx,deps:[]},[]];var xb=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(X(Dt))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var uv=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(uv||{});function Ob(...n){let e=[],t=new Set,r=t.has(uv.HttpTransferCacheOptions);for(let{\u0275providers:o,\u0275kind:i}of n)t.add(i),o.length&&e.push(o);return Ao([[],jI(),t.has(uv.NoHttpTransferCache)||r?[]:bb({}),e])}var Ae="primary",pl=Symbol("RouteTitle"),mv=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function sa(n){return new mv(n)}function qx(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let o={};for(let i=0;i<r.length;i++){let s=r[i],a=n[i];if(s[0]===":")o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Kx(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!yr(n[t],e[t]))return!1;return!0}function yr(n,e){let t=n?vv(n):void 0,r=e?vv(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let i=0;i<t.length;i++)if(o=t[i],!Gb(n[o],e[o]))return!1;return!0}function vv(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Gb(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((o,i)=>r[i]===o)}else return n===e}function qb(n){return n.length>0?n[n.length-1]:null}function Po(n){return Wp(n)?n:Ti(n)?De(Promise.resolve(n)):le(n)}var Wx={exact:Wb,subset:Yb},Kb={exact:Yx,subset:Qx,ignored:()=>!0};function Pb(n,e,t){return Wx[t.paths](n.root,e.root,t.matrixParams)&&Kb[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Yx(n,e){return yr(n,e)}function Wb(n,e,t){if(!Ri(n.segments,e.segments)||!Sh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Wb(n.children[r],e.children[r],t))return!1;return!0}function Qx(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Gb(n[t],e[t]))}function Yb(n,e,t){return Qb(n,e,e.segments,t)}function Qb(n,e,t,r){if(n.segments.length>t.length){let o=n.segments.slice(0,t.length);return!(!Ri(o,t)||e.hasChildren()||!Sh(o,t,r))}else if(n.segments.length===t.length){if(!Ri(n.segments,t)||!Sh(n.segments,t,r))return!1;for(let o in e.children)if(!n.children[o]||!Yb(n.children[o],e.children[o],r))return!1;return!0}else{let o=t.slice(0,n.segments.length),i=t.slice(n.segments.length);return!Ri(n.segments,o)||!Sh(n.segments,o,r)||!n.children[Ae]?!1:Qb(n.children[Ae],e,i,r)}}function Sh(n,e,t){return e.every((r,o)=>Kb[t](n[o].parameters,r.parameters))}var Yr=class{constructor(e=new qe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=sa(this.queryParams),this._queryParamMap}toString(){return Xx.serialize(this)}},qe=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ah(this)}},Mi=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=sa(this.parameters),this._parameterMap}toString(){return Jb(this)}};function Zx(n,e){return Ri(n,e)&&n.every((t,r)=>yr(t.parameters,e[r].parameters))}function Ri(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function Jx(n,e){let t=[];return Object.entries(n.children).forEach(([r,o])=>{r===Ae&&(t=t.concat(e(o,r)))}),Object.entries(n.children).forEach(([r,o])=>{r!==Ae&&(t=t.concat(e(o,r)))}),t}var gl=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>new aa,providedIn:"root"})}}return n})(),aa=class{parse(e){let t=new Cv(e);return new Yr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Xc(e.root,!0)}`,r=nO(e.queryParams),o=typeof e.fragment=="string"?`#${eO(e.fragment)}`:"";return`${t}${r}${o}`}},Xx=new aa;function Ah(n){return n.segments.map(e=>Jb(e)).join("/")}function Xc(n,e){if(!n.hasChildren())return Ah(n);if(e){let t=n.children[Ae]?Xc(n.children[Ae],!1):"",r=[];return Object.entries(n.children).forEach(([o,i])=>{o!==Ae&&r.push(`${o}:${Xc(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=Jx(n,(r,o)=>o===Ae?[Xc(n.children[Ae],!1)]:[`${o}:${Xc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Ae]!=null?`${Ah(n)}/${t[0]}`:`${Ah(n)}/(${t.join("//")})`}}function Zb(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bh(n){return Zb(n).replace(/%3B/gi,";")}function eO(n){return encodeURI(n)}function yv(n){return Zb(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dh(n){return decodeURIComponent(n)}function Fb(n){return Dh(n.replace(/\+/g,"%20"))}function Jb(n){return`${yv(n.path)}${tO(n.parameters)}`}function tO(n){return Object.entries(n).map(([e,t])=>`;${yv(e)}=${yv(t)}`).join("")}function nO(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(o=>`${bh(t)}=${bh(o)}`).join("&"):`${bh(t)}=${bh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var rO=/^[^\/()?;#]+/;function hv(n){let e=n.match(rO);return e?e[0]:""}var oO=/^[^\/()?;=#]+/;function iO(n){let e=n.match(oO);return e?e[0]:""}var sO=/^[^=?&#]+/;function aO(n){let e=n.match(sO);return e?e[0]:""}var cO=/^[^&#]+/;function lO(n){let e=n.match(cO);return e?e[0]:""}var Cv=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new qe([],{}):new qe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ae]=new qe(e,t)),r}parseSegment(){let e=hv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ue(4009,!1);return this.capture(e),new Mi(Dh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=iO(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=hv(this.remaining);o&&(r=o,this.capture(r))}e[Dh(t)]=Dh(r)}parseQueryParam(e){let t=aO(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=lO(this.remaining);s&&(r=s,this.capture(r))}let o=Fb(t),i=Fb(r);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=hv(this.remaining),o=this.remaining[r.length];if(o!=="/"&&o!==")"&&o!==";")throw new ue(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=Ae);let s=this.parseChildren();t[i]=Object.keys(s).length===1?s[Ae]:new qe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ue(4011,!1)}};function Xb(n){return n.segments.length>0?new qe([],{[Ae]:n}):n}function eT(n){let e={};for(let[r,o]of Object.entries(n.children)){let i=eT(o);if(r===Ae&&i.segments.length===0&&i.hasChildren())for(let[s,a]of Object.entries(i.children))e[s]=a;else(i.segments.length>0||i.hasChildren())&&(e[r]=i)}let t=new qe(n.segments,e);return uO(t)}function uO(n){if(n.numberOfChildren===1&&n.children[Ae]){let e=n.children[Ae];return new qe(n.segments.concat(e.segments),e.children)}return n}function il(n){return n instanceof Yr}function dO(n,e,t=null,r=null){let o=tT(n);return nT(o,e,t,r)}function tT(n){let e;function t(i){let s={};for(let c of i.children){let l=t(c);s[c.outlet]=l}let a=new qe(i.url,s);return i===n&&(e=a),a}let r=t(n.root),o=Xb(r);return e??o}function nT(n,e,t,r){let o=n;for(;o.parent;)o=o.parent;if(e.length===0)return fv(o,o,o,t,r);let i=hO(e);if(i.toRoot())return fv(o,o,new qe([],{}),t,r);let s=fO(i,o,n),a=s.processChildren?nl(s.segmentGroup,s.index,i.commands):oT(s.segmentGroup,s.index,i.commands);return fv(o,s.segmentGroup,a,t,r)}function Mh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function sl(n){return typeof n=="object"&&n!=null&&n.outlets}function fv(n,e,t,r,o){let i={};r&&Object.entries(r).forEach(([c,l])=>{i[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;n===e?s=t:s=rT(n,e,t);let a=Xb(eT(s));return new Yr(a,i,o)}function rT(n,e,t){let r={};return Object.entries(n.children).forEach(([o,i])=>{i===e?r[o]=t:r[o]=rT(i,e,t)}),new qe(n.segments,r)}var Rh=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Mh(r[0]))throw new ue(4003,!1);let o=r.find(sl);if(o&&o!==qb(r))throw new ue(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function hO(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Rh(!0,0,n);let e=0,t=!1,r=n.reduce((o,i,s)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return typeof i!="string"?[...o,i]:s===0?(i.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&o.push(a))}),o):[...o,i]},[]);return new Rh(t,e,r)}var ra=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function fO(n,e,t){if(n.isAbsolute)return new ra(e,!0,0);if(!t)return new ra(e,!1,NaN);if(t.parent===null)return new ra(t,!0,0);let r=Mh(n.commands[0])?0:1,o=t.segments.length-1+r;return pO(t,o,n.numberOfDoubleDots)}function pO(n,e,t){let r=n,o=e,i=t;for(;i>o;){if(i-=o,r=r.parent,!r)throw new ue(4005,!1);o=r.segments.length}return new ra(r,!1,o-i)}function gO(n){return sl(n[0])?n[0].outlets:{[Ae]:n}}function oT(n,e,t){if(n??=new qe([],{}),n.segments.length===0&&n.hasChildren())return nl(n,e,t);let r=mO(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let i=new qe(n.segments.slice(0,r.pathIndex),{});return i.children[Ae]=new qe(n.segments.slice(r.pathIndex),n.children),nl(i,0,o)}else return r.match&&o.length===0?new qe(n.segments,{}):r.match&&!n.hasChildren()?Ev(n,e,t):r.match?nl(n,0,o):Ev(n,e,t)}function nl(n,e,t){if(t.length===0)return new qe(n.segments,{});{let r=gO(t),o={};if(Object.keys(r).some(i=>i!==Ae)&&n.children[Ae]&&n.numberOfChildren===1&&n.children[Ae].segments.length===0){let i=nl(n.children[Ae],e,t);return new qe(n.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[i]=oT(n.children[i],e,s))}),Object.entries(n.children).forEach(([i,s])=>{r[i]===void 0&&(o[i]=s)}),new qe(n.segments,o)}}function mO(n,e,t){let r=0,o=e,i={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return i;let s=n.segments[o],a=t[r];if(sl(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(o>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Ub(c,l,s))return i;r+=2}else{if(!Ub(c,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}function Ev(n,e,t){let r=n.segments.slice(0,e),o=0;for(;o<t.length;){let i=t[o];if(sl(i)){let c=vO(i.outlets);return new qe(r,c)}if(o===0&&Mh(t[0])){let c=n.segments[e];r.push(new Mi(c.path,Lb(t[0]))),o++;continue}let s=sl(i)?i.outlets[Ae]:`${i}`,a=o<t.length-1?t[o+1]:null;s&&a&&Mh(a)?(r.push(new Mi(s,Lb(a))),o+=2):(r.push(new Mi(s,{})),o++)}return new qe(r,{})}function vO(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Ev(new qe([],{}),0,r))}),e}function Lb(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Ub(n,e,t){return n==t.path&&yr(e,t.parameters)}var rl="imperative",Ft=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ft||{}),Ln=class{constructor(e,t){this.id=e,this.url=t}},ca=class extends Ln{constructor(e,t,r="imperative",o=null){super(e,t),this.type=Ft.NavigationStart,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Qr=class extends Ln{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Ft.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},_n=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(_n||{}),kh=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(kh||{}),Wr=class extends Ln{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=Ft.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Oo=class extends Ln{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=Ft.NavigationSkipped}},al=class extends Ln{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=Ft.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Nh=class extends Ln{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=Ft.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wv=class extends Ln{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=Ft.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_v=class extends Ln{constructor(e,t,r,o,i){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i,this.type=Ft.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Iv=class extends Ln{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=Ft.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bv=class extends Ln{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=Ft.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tv=class{constructor(e){this.route=e,this.type=Ft.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Sv=class{constructor(e){this.route=e,this.type=Ft.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Av=class{constructor(e){this.snapshot=e,this.type=Ft.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dv=class{constructor(e){this.snapshot=e,this.type=Ft.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mv=class{constructor(e){this.snapshot=e,this.type=Ft.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rv=class{constructor(e){this.snapshot=e,this.type=Ft.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xh=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Ft.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},cl=class{},la=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function yO(n,e){return n.providers&&!n._injector&&(n._injector=ih(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Xn(n){return n.outlet||Ae}function CO(n,e){let t=n.filter(r=>Xn(r)===e);return t.push(...n.filter(r=>Xn(r)!==e)),t}function ml(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var kv=class{get injector(){return ml(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new vl(this.rootInjector),this.attachRef=null}},vl=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new kv(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(X(Yt))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Oh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Nv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Nv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=xv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return xv(e,this._root).map(t=>t.value)}};function Nv(n,e){if(n===e.value)return e;for(let t of e.children){let r=Nv(n,t);if(r)return r}return null}function xv(n,e){if(n===e.value)return[e];for(let t of e.children){let r=xv(n,t);if(r.length)return r.unshift(e),r}return[]}var wn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function na(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Ph=class extends Oh{constructor(e,t){super(e),this.snapshot=t,jv(this,e)}toString(){return this.snapshot.toString()}};function iT(n){let e=EO(n),t=new pt([new Mi("",{})]),r=new pt({}),o=new pt({}),i=new pt({}),s=new pt(""),a=new Zr(t,r,i,s,o,Ae,n,e.root);return a.snapshot=e.root,new Ph(new wn(a,[]),e)}function EO(n){let e={},t={},r={},o="",i=new oa([],e,r,o,t,Ae,n,null,{});return new Lh("",new wn(i,[]))}var Zr=class{constructor(e,t,r,o,i,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(me(l=>l[pl]))??le(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(me(e=>sa(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(me(e=>sa(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Fh(n,e,t="emptyOnly"){let r,{routeConfig:o}=n;return e!==null&&(t==="always"||o?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:D(D({},e.params),n.params),data:D(D({},e.data),n.data),resolve:D(D(D(D({},n.data),e.data),o?.data),n._resolvedData)}:r={params:D({},n.params),data:D({},n.data),resolve:D(D({},n.data),n._resolvedData??{})},o&&aT(o)&&(r.resolve[pl]=o.title),r}var oa=class{get title(){return this.data?.[pl]}constructor(e,t,r,o,i,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=sa(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=sa(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Lh=class extends Oh{constructor(e,t){super(t),this.url=e,jv(this,t)}toString(){return sT(this._root)}};function jv(n,e){e.value._routerState=n,e.children.forEach(t=>jv(n,t))}function sT(n){let e=n.children.length>0?` { ${n.children.map(sT).join(", ")} } `:"";return`${n.value}${e}`}function pv(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,yr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),yr(e.params,t.params)||n.paramsSubject.next(t.params),Kx(e.url,t.url)||n.urlSubject.next(t.url),yr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ov(n,e){let t=yr(n.params,e.params)&&Zx(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Ov(n.parent,e.parent))}function aT(n){return typeof n.title=="string"||n.title===null}var zv=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ae,this.activateEvents=new wt,this.deactivateEvents=new wt,this.attachEvents=new wt,this.detachEvents=new wt,this.parentContexts=H(vl),this.location=H(Vc),this.changeDetector=H(Js),this.inputBinder=H(Hh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ue(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ue(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ue(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ue(4013,!1);this._activatedRoute=t;let o=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Pv(t,a,o.injector);this.activated=o.createComponent(s,{index:o.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=ln({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_i]})}}return n})(),Pv=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Zr?this.route:e===vl?this.childContexts:this.parent.get(e,t)}},Hh=new oe(""),Bb=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,o=Ic([r.queryParams,r.params,r.data]).pipe(qt(([i,s,a],c)=>(a=D(D(D({},i),s),a),c===0?le(a):Promise.resolve(a)))).subscribe(i=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=zI(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,i[a])});this.outletDataSubscriptions.set(t,o)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})();function wO(n,e,t){let r=ll(n,e._root,t?t._root:void 0);return new Ph(r,e)}function ll(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let o=_O(n,e,t);return new wn(r,o)}else{if(n.shouldAttach(e.value)){let i=n.retrieve(e.value);if(i!==null){let s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ll(n,a)),s}}let r=IO(e.value),o=e.children.map(i=>ll(n,i));return new wn(r,o)}}function _O(n,e,t){return e.children.map(r=>{for(let o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return ll(n,r,o);return ll(n,r)})}function IO(n){return new Zr(new pt(n.url),new pt(n.params),new pt(n.queryParams),new pt(n.fragment),new pt(n.data),n.outlet,n.component,n)}var ul=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},cT="ngNavigationCancelingError";function Uh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=il(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=lT(!1,_n.Redirect);return o.url=t,o.navigationBehaviorOptions=r,o}function lT(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[cT]=!0,t.cancellationCode=e,t}function bO(n){return uT(n)&&il(n.url)}function uT(n){return!!n&&n[cT]}var TO=(n,e,t,r)=>me(o=>(new Fv(e,o.targetRouterState,o.currentRouterState,t,r).activate(n),o)),Fv=class{constructor(e,t,r,o,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),pv(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let o=na(t);e.children.forEach(i=>{let s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,t,r){let o=e.value,i=t?t.value:null;if(o===i)if(o.component){let s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else i&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=na(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=na(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let o=na(t);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new Rv(i.value.snapshot))}),e.children.length&&this.forwardEvent(new Dv(e.value.snapshot))}activateRoutes(e,t,r){let o=e.value,i=t?t.value:null;if(pv(o),o===i)if(o.component){let s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(o.component){let s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),pv(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=o,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Bh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ia=class{constructor(e,t){this.component=e,this.route=t}};function SO(n,e,t){let r=n._root,o=e?e._root:null;return el(r,o,t,[r.value])}function AO(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function da(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!lw(n)?n:e.get(n):r}function el(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=na(e);return n.children.forEach(s=>{DO(s,i[s.value.outlet],t,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>ol(a,t.getContext(s),o)),o}function DO(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){let c=MO(s,i,i.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new Bh(r)):(i.data=s.data,i._resolvedData=s._resolvedData),i.component?el(n,e,a?a.children:null,r,o):el(n,e,t,r,o),c&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new ia(a.outlet.component,s))}else s&&ol(e,a,o),o.canActivateChecks.push(new Bh(r)),i.component?el(n,null,a?a.children:null,r,o):el(n,null,t,r,o);return o}function MO(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ri(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ri(n.url,e.url)||!yr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ov(n,e)||!yr(n.queryParams,e.queryParams);case"paramsChange":default:return!Ov(n,e)}}function ol(n,e,t){let r=na(n),o=n.value;Object.entries(r).forEach(([i,s])=>{o.component?e?ol(s,e.children.getContext(i),t):ol(s,null,t):ol(s,e,t)}),o.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ia(e.outlet.component,o)):t.canDeactivateChecks.push(new ia(null,o)):t.canDeactivateChecks.push(new ia(null,o))}function yl(n){return typeof n=="function"}function RO(n){return typeof n=="boolean"}function kO(n){return n&&yl(n.canLoad)}function NO(n){return n&&yl(n.canActivate)}function xO(n){return n&&yl(n.canActivateChild)}function OO(n){return n&&yl(n.canDeactivate)}function PO(n){return n&&yl(n.canMatch)}function dT(n){return n instanceof xr||n?.name==="EmptyError"}var Th=Symbol("INITIAL_VALUE");function ua(){return qt(n=>Ic(n.map(e=>e.pipe(lr(1),Xp(Th)))).pipe(me(e=>{for(let t of e)if(t!==!0){if(t===Th)return Th;if(t===!1||FO(t))return t}return!0}),Gt(e=>e!==Th),lr(1)))}function FO(n){return il(n)||n instanceof ul}function LO(n,e){return Et(t=>{let{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=t;return s.length===0&&i.length===0?le(J(D({},t),{guardsResult:!0})):UO(s,r,o,n).pipe(Et(a=>a&&RO(a)?BO(r,i,n,e):le(a)),me(a=>J(D({},t),{guardsResult:a})))})}function UO(n,e,t,r){return De(n).pipe(Et(o=>$O(o.component,o.route,t,e,r)),qn(o=>o!==!0,!0))}function BO(n,e,t,r){return De(e).pipe(Dn(o=>Ss(HO(o.route.parent,r),VO(o.route,r),zO(n,o.path,t),jO(n,o.route,t))),qn(o=>o!==!0,!0))}function VO(n,e){return n!==null&&e&&e(new Mv(n)),le(!0)}function HO(n,e){return n!==null&&e&&e(new Av(n)),le(!0)}function jO(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return le(!0);let o=r.map(i=>rd(()=>{let s=ml(e)??t,a=da(i,s),c=NO(a)?a.canActivate(e,n):xn(s,()=>a(e,n));return Po(c).pipe(qn())}));return le(o).pipe(ua())}function zO(n,e,t){let r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>AO(s)).filter(s=>s!==null).map(s=>rd(()=>{let a=s.guards.map(c=>{let l=ml(s.node)??t,u=da(c,l),d=xO(u)?u.canActivateChild(r,n):xn(l,()=>u(r,n));return Po(d).pipe(qn())});return le(a).pipe(ua())}));return le(i).pipe(ua())}function $O(n,e,t,r,o){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return le(!0);let s=i.map(a=>{let c=ml(e)??o,l=da(a,c),u=OO(l)?l.canDeactivate(n,e,t,r):xn(c,()=>l(n,e,t,r));return Po(u).pipe(qn())});return le(s).pipe(ua())}function GO(n,e,t,r){let o=e.canLoad;if(o===void 0||o.length===0)return le(!0);let i=o.map(s=>{let a=da(s,n),c=kO(a)?a.canLoad(e,t):xn(n,()=>a(e,t));return Po(c)});return le(i).pipe(ua(),hT(r))}function hT(n){return zp(bt(e=>{if(typeof e!="boolean")throw Uh(n,e)}),me(e=>e===!0))}function qO(n,e,t,r){let o=e.canMatch;if(!o||o.length===0)return le(!0);let i=o.map(s=>{let a=da(s,n),c=PO(a)?a.canMatch(e,t):xn(n,()=>a(e,t));return Po(c)});return le(i).pipe(ua(),hT(r))}var dl=class{constructor(e){this.segmentGroup=e||null}},hl=class extends Error{constructor(e){super(),this.urlTree=e}};function ta(n){return cr(new dl(n))}function KO(n){return cr(new ue(4e3,!1))}function WO(n){return cr(lT(!1,_n.GuardRejected))}var Lv=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),o.numberOfChildren===0)return le(r);if(o.numberOfChildren>1||!o.children[Ae])return KO(`${e.redirectTo}`);o=o.children[Ae]}}applyRedirectCommands(e,t,r,o,i){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:p,params:h,data:m,title:g}=o,y=xn(i,()=>a({params:h,data:m,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:p,title:g}));if(y instanceof Yr)throw new hl(y);t=y}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new hl(s);return s}applyRedirectCreateUrlTree(e,t,r,o){let i=this.createSegmentGroup(e,t.root,r,o);return new Yr(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([o,i])=>{if(typeof i=="string"&&i[0]===":"){let a=i.substring(1);r[o]=t[a]}else r[o]=i}),r}createSegmentGroup(e,t,r,o){let i=this.createSegments(e,t.segments,r,o),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,o)}),new qe(i,s)}createSegments(e,t,r,o){return t.map(i=>i.path[0]===":"?this.findPosParam(e,i,o):this.findOrReturn(i,r))}findPosParam(e,t,r){let o=r[t.path.substring(1)];if(!o)throw new ue(4001,!1);return o}findOrReturn(e,t){let r=0;for(let o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}},Uv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function YO(n,e,t,r,o){let i=fT(n,e,t);return i.matched?(r=yO(e,r),qO(r,e,t,o).pipe(me(s=>s===!0?i:D({},Uv)))):le(i)}function fT(n,e,t){if(e.path==="**")return QO(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?D({},Uv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let o=(e.matcher||qx)(t,n,e);if(!o)return D({},Uv);let i={};Object.entries(o.posParams??{}).forEach(([a,c])=>{i[a]=c.path});let s=o.consumed.length>0?D(D({},i),o.consumed[o.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function QO(n){return{matched:!0,parameters:n.length>0?qb(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Vb(n,e,t,r){return t.length>0&&XO(n,t,r)?{segmentGroup:new qe(e,JO(r,new qe(t,n.children))),slicedSegments:[]}:t.length===0&&eP(n,t,r)?{segmentGroup:new qe(n.segments,ZO(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new qe(n.segments,n.children),slicedSegments:t}}function ZO(n,e,t,r){let o={};for(let i of t)if(jh(n,e,i)&&!r[Xn(i)]){let s=new qe([],{});o[Xn(i)]=s}return D(D({},r),o)}function JO(n,e){let t={};t[Ae]=e;for(let r of n)if(r.path===""&&Xn(r)!==Ae){let o=new qe([],{});t[Xn(r)]=o}return t}function XO(n,e,t){return t.some(r=>jh(n,e,r)&&Xn(r)!==Ae)}function eP(n,e,t){return t.some(r=>jh(n,e,r))}function jh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function tP(n,e,t){return e.length===0&&!n.children[t]}var Bv=class{};function nP(n,e,t,r,o,i,s="emptyOnly"){return new Vv(n,e,t,r,o,s,i).recognize()}var rP=31,Vv=class{constructor(e,t,r,o,i,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Lv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ue(4002,`'${e.segmentGroup}'`)}recognize(){let e=Vb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(me(({children:t,rootSnapshot:r})=>{let o=new wn(r,t),i=new Lh("",o),s=dO(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),{state:i,tree:s}}))}match(e){let t=new oa([],Object.freeze({}),Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ae,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ae,t).pipe(me(r=>({children:r,rootSnapshot:t})),Ut(r=>{if(r instanceof hl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof dl?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,o,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,i):this.processSegment(e,t,r,r.segments,o,!0,i).pipe(me(s=>s instanceof wn?[s]:[]))}processChildren(e,t,r,o){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return De(i).pipe(Dn(s=>{let a=r.children[s],c=CO(t,s);return this.processSegmentGroup(e,c,a,s,o)}),Jp((s,a)=>(s.push(...a),s)),Co(null),Zp(),Et(s=>{if(s===null)return ta(r);let a=pT(s);return oP(a),le(a)}))}processSegment(e,t,r,o,i,s,a){return De(t).pipe(Dn(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,o,i,s,a).pipe(Ut(l=>{if(l instanceof dl)return le(null);throw l}))),qn(c=>!!c),Ut(c=>{if(dT(c))return tP(r,o,i)?le(new Bv):ta(r);throw c}))}processSegmentAgainstRoute(e,t,r,o,i,s,a,c){return Xn(r)!==s&&(s===Ae||!jh(o,i,r))?ta(o):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,o,r,i,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,o,t,r,i,s,c):ta(o)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:p}=fT(t,o,i);if(!c)return ta(t);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>rP&&(this.allowRedirects=!1));let h=new oa(i,l,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,Hb(o),Xn(o),o.component??o._loadedComponent??null,o,jb(o)),m=Fh(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(m.params),h.data=Object.freeze(m.data);let g=this.applyRedirects.applyRedirectCommands(u,o.redirectTo,d,h,e);return this.applyRedirects.lineralizeSegments(o,g).pipe(Et(y=>this.processSegment(e,r,t,y.concat(p),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,o,i,s){let a=YO(t,r,o,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(qt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,o).pipe(qt(({routes:l})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:p,remainingSegments:h}=c,m=new oa(p,d,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,Hb(r),Xn(r),r.component??r._loadedComponent??null,r,jb(r)),g=Fh(m,s,this.paramsInheritanceStrategy);m.params=Object.freeze(g.params),m.data=Object.freeze(g.data);let{segmentGroup:y,slicedSegments:w}=Vb(t,p,h,l);if(w.length===0&&y.hasChildren())return this.processChildren(u,l,y,m).pipe(me(b=>new wn(m,b)));if(l.length===0&&w.length===0)return le(new wn(m,[]));let S=Xn(r)===i;return this.processSegment(u,l,y,w,S?Ae:i,!0,m).pipe(me(b=>new wn(m,b instanceof wn?[b]:[])))}))):ta(t)))}getChildConfig(e,t,r){return t.children?le({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?le({routes:t._loadedRoutes,injector:t._loadedInjector}):GO(e,t,r,this.urlSerializer).pipe(Et(o=>o?this.configLoader.loadChildren(e,t).pipe(bt(i=>{t._loadedRoutes=i.routes,t._loadedInjector=i.injector})):WO(t))):le({routes:[],injector:e})}};function oP(n){n.sort((e,t)=>e.value.outlet===Ae?-1:t.value.outlet===Ae?1:e.value.outlet.localeCompare(t.value.outlet))}function iP(n){let e=n.value.routeConfig;return e&&e.path===""}function pT(n){let e=[],t=new Set;for(let r of n){if(!iP(r)){e.push(r);continue}let o=e.find(i=>r.value.routeConfig===i.value.routeConfig);o!==void 0?(o.children.push(...r.children),t.add(o)):e.push(r)}for(let r of t){let o=pT(r.children);e.push(new wn(r.value,o))}return e.filter(r=>!t.has(r))}function Hb(n){return n.data||{}}function jb(n){return n.resolve||{}}function sP(n,e,t,r,o,i){return Et(s=>nP(n,e,t,r,s.extractedUrl,o,i).pipe(me(({state:a,tree:c})=>J(D({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function aP(n,e){return Et(t=>{let{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return le(t);let i=new Set(o.map(c=>c.route)),s=new Set;for(let c of i)if(!s.has(c))for(let l of gT(c))s.add(l);let a=0;return De(s).pipe(Dn(c=>i.has(c)?cP(c,r,n,e):(c.data=Fh(c,c.parent,n).resolve,le(void 0))),bt(()=>a++),As(1),Et(c=>a===s.size?le(t):sn))})}function gT(n){let e=n.children.map(t=>gT(t)).flat();return[n,...e]}function cP(n,e,t,r){let o=n.routeConfig,i=n._resolve;return o?.title!==void 0&&!aT(o)&&(i[pl]=o.title),lP(i,n,e,r).pipe(me(s=>(n._resolvedData=s,n.data=Fh(n,n.parent,t).resolve,null)))}function lP(n,e,t,r){let o=vv(n);if(o.length===0)return le({});let i={};return De(o).pipe(Et(s=>uP(n[s],e,t,r).pipe(qn(),bt(a=>{if(a instanceof ul)throw Uh(new aa,a);i[s]=a}))),As(1),Qp(i),Ut(s=>dT(s)?sn:cr(s)))}function uP(n,e,t,r){let o=ml(e)??r,i=da(n,o),s=i.resolve?i.resolve(e,t):xn(o,()=>i(e,t));return Po(s)}function gv(n){return qt(e=>{let t=n(e);return t?De(t).pipe(me(()=>e)):le(e)})}var mT=(()=>{class n{buildTitle(t){let r,o=t.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===Ae);return r}getResolvedTitleForRoute(t){return t.data[pl]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>H(dP),providedIn:"root"})}}return n})(),dP=(()=>{class n extends mT{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(X(xb))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Cl=new oe("",{providedIn:"root",factory:()=>({})}),hP=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Tt({type:n,selectors:[["ng-component"]],standalone:!0,features:[Ot],decls:1,vars:0,template:function(r,o){r&1&&Ye(0,"router-outlet")},dependencies:[zv],encapsulation:2})}}return n})();function $v(n){let e=n.children&&n.children.map($v),t=e?J(D({},n),{children:e}):D({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ae&&(t.component=hP),t}var fl=new oe(""),Gv=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=H(dh)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return le(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Po(t.loadComponent()).pipe(me(vT),bt(i=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=i}),Eo(()=>{this.componentLoaders.delete(t)})),o=new bs(r,()=>new ft).pipe(Is());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return le({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=fP(r,this.compiler,t,this.onLoadEndListener).pipe(Eo(()=>{this.childrenLoaders.delete(r)})),s=new bs(i,()=>new ft).pipe(Is());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function fP(n,e,t,r){return Po(n.loadChildren()).pipe(me(vT),Et(o=>o instanceof Nc||Array.isArray(o)?le(o):De(e.compileModuleAsync(o))),me(o=>{r&&r(n);let i,s,a=!1;return Array.isArray(o)?(s=o,a=!0):(i=o.create(t).injector,s=i.get(fl,[],{optional:!0,self:!0}).flat()),{routes:s.map($v),injector:i}}))}function pP(n){return n&&typeof n=="object"&&"default"in n}function vT(n){return pP(n)?n.default:n}var qv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>H(gP),providedIn:"root"})}}return n})(),gP=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),yT=new oe(""),CT=new oe("");function mP(n,e,t){let r=n.get(CT),o=n.get(Dt);return n.get(nt).runOutsideAngular(()=>{if(!o.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let i,s=new Promise(l=>{i=l}),a=o.startViewTransition(()=>(i(),vP(n))),{onViewTransitionCreated:c}=r;return c&&xn(n,()=>c({transition:a,from:e,to:t})),s})}function vP(n){return new Promise(e=>{Bm({read:()=>setTimeout(e)},{injector:n})})}var yP=new oe(""),Kv=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ft,this.transitionAbortSubject=new ft,this.configLoader=H(Gv),this.environmentInjector=H(Yt),this.urlSerializer=H(gl),this.rootContexts=H(vl),this.location=H(qr),this.inputBindingEnabled=H(Hh,{optional:!0})!==null,this.titleStrategy=H(mT),this.options=H(Cl,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=H(qv),this.createViewTransition=H(yT,{optional:!0}),this.navigationErrorHandler=H(yP,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>le(void 0),this.rootComponentType=null;let t=o=>this.events.next(new Tv(o)),r=o=>this.events.next(new Sv(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(J(D(D({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,o){return this.transitions=new pt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:rl,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Gt(i=>i.id!==0),me(i=>J(D({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),qt(i=>{let s=!1,a=!1;return le(i).pipe(qt(c=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",_n.SupersededByNewNavigation),sn;this.currentTransition=i,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?J(D({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&u!=="reload"){let d="";return this.events.next(new Oo(c.id,this.urlSerializer.serialize(c.rawUrl),d,kh.IgnoredSameUrlNavigation)),c.resolve(!1),sn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return le(c).pipe(qt(d=>{let p=this.transitions?.getValue();return this.events.next(new ca(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),p!==this.transitions?.getValue()?sn:Promise.resolve(d)}),sP(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),bt(d=>{i.targetSnapshot=d.targetSnapshot,i.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=J(D({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let p=new Nh(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:d,extractedUrl:p,source:h,restoredState:m,extras:g}=c,y=new ca(d,this.urlSerializer.serialize(p),h,m);this.events.next(y);let w=iT(this.rootComponentType).snapshot;return this.currentTransition=i=J(D({},c),{targetSnapshot:w,urlAfterRedirects:p,extras:J(D({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,le(i)}else{let d="";return this.events.next(new Oo(c.id,this.urlSerializer.serialize(c.extractedUrl),d,kh.IgnoredByUrlHandlingStrategy)),c.resolve(!1),sn}}),bt(c=>{let l=new wv(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),me(c=>(this.currentTransition=i=J(D({},c),{guards:SO(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),i)),LO(this.environmentInjector,c=>this.events.next(c)),bt(c=>{if(i.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Uh(this.urlSerializer,c.guardsResult);let l=new _v(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Gt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",_n.GuardRejected),!1)),gv(c=>{if(c.guards.canActivateChecks.length)return le(c).pipe(bt(l=>{let u=new Iv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),qt(l=>{let u=!1;return le(l).pipe(aP(this.paramsInheritanceStrategy,this.environmentInjector),bt({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",_n.NoDataFromResolver)}}))}),bt(l=>{let u=new bv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),gv(c=>{let l=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(bt(p=>{u.component=p}),me(()=>{})));for(let p of u.children)d.push(...l(p));return d};return Ic(l(c.targetSnapshot.root)).pipe(Co(null),lr(1))}),gv(()=>this.afterPreactivation()),qt(()=>{let{currentSnapshot:c,targetSnapshot:l}=i,u=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return u?De(u).pipe(me(()=>i)):le(i)}),me(c=>{let l=wO(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=i=J(D({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,i}),bt(()=>{this.events.next(new cl)}),TO(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),lr(1),bt({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Qr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),eg(this.transitionAbortSubject.pipe(bt(c=>{throw c}))),Eo(()=>{!s&&!a&&this.cancelNavigationTransition(i,"",_n.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ut(c=>{if(a=!0,uT(c))this.events.next(new Wr(i.id,this.urlSerializer.serialize(i.extractedUrl),c.message,c.cancellationCode)),bO(c)?this.events.next(new la(c.url,c.navigationBehaviorOptions)):i.resolve(!1);else{let l=new al(i.id,this.urlSerializer.serialize(i.extractedUrl),c,i.targetSnapshot??void 0);try{let u=xn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(u instanceof ul){let{message:d,cancellationCode:p}=Uh(this.urlSerializer,u);this.events.next(new Wr(i.id,this.urlSerializer.serialize(i.extractedUrl),d,p)),this.events.next(new la(u.redirectTo,u.navigationBehaviorOptions))}else{this.events.next(l);let d=t.errorHandler(c);i.resolve(!!d)}}catch(u){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(u)}}return sn}))}))}cancelNavigationTransition(t,r,o){let i=new Wr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(i),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function CP(n){return n!==rl}var EP=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>H(wP),providedIn:"root"})}}return n})(),Hv=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},wP=(()=>{class n extends Hv{static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=Ws(n)))(o||n)}})()}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ET=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>H(_P),providedIn:"root"})}}return n})(),_P=(()=>{class n extends ET{constructor(){super(...arguments),this.location=H(qr),this.urlSerializer=H(gl),this.options=H(Cl,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=H(qv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Yr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=iT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof ca)this.stateMemento=this.createStateMemento();else if(t instanceof Oo)this.rawUrlTree=r.initialUrl;else if(t instanceof Nh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??o,r)}}else t instanceof cl?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Wr&&(t.code===_n.GuardRejected||t.code===_n.NoDataFromResolver)?this.restoreHistory(r):t instanceof al?this.restoreHistory(r,!0):t instanceof Qr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let o=t instanceof Yr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let i=this.browserPageId,s=D(D({},r.extras.state),this.generateNgRouterState(r.id,i));this.location.replaceState(o,"",s)}else{let i=D(D({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",i)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,i=this.currentPageId-o;i!==0?this.location.historyGo(i):this.currentUrlTree===t.finalUrl&&i===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=Ws(n)))(o||n)}})()}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),tl=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(tl||{});function wT(n,e){n.events.pipe(Gt(t=>t instanceof Qr||t instanceof Wr||t instanceof al||t instanceof Oo),me(t=>t instanceof Qr||t instanceof Oo?tl.COMPLETE:(t instanceof Wr?t.code===_n.Redirect||t.code===_n.SupersededByNewNavigation:!1)?tl.REDIRECTING:tl.FAILED),Gt(t=>t!==tl.REDIRECTING),lr(1)).subscribe(()=>{e()})}function IP(n){throw n}var bP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},TP={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},_t=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=H(ch),this.stateManager=H(ET),this.options=H(Cl,{optional:!0})||{},this.pendingTasks=H(Ur),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=H(Kv),this.urlSerializer=H(gl),this.location=H(qr),this.urlHandlingStrategy=H(qv),this._events=new ft,this.errorHandler=this.options.errorHandler||IP,this.navigated=!1,this.routeReuseStrategy=H(EP),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=H(fl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!H(Hh,{optional:!0}),this.eventsSubscription=new yt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,i=this.navigationTransitions.currentNavigation;if(o!==null&&i!==null){if(this.stateManager.handleRouterEvent(r,i),r instanceof Wr&&r.code!==_n.Redirect&&r.code!==_n.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Qr)this.navigated=!0;else if(r instanceof la){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),c=D({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||CP(o.source)},s);this.scheduleNavigation(a,rl,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}AP(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),rl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,o){let i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let c=D({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(i.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map($v),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=D(D({},this.currentUrlTree.queryParams),i);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let p=o?o.snapshot:this.routerState.snapshot.root;d=tT(p)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),d=this.currentUrlTree.root}return nT(d,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let o=il(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,rl,null,r)}navigate(t,r={skipLocationChange:!1}){return SP(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let o;if(r===!0?o=D({},bP):r===!1?o=D({},TP):o=r,il(t))return Pb(this.currentUrlTree,t,o);let i=this.parseUrl(t);return Pb(this.currentUrlTree,i,o)}removeEmptyProps(t){return Object.entries(t).reduce((r,[o,i])=>(i!=null&&(r[o]=i),r),{})}scheduleNavigation(t,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,p)=>{a=d,c=p});let u=this.pendingTasks.add();return wT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:i,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function SP(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ue(4008,!1)}function AP(n){return!(n instanceof cl)&&!(n instanceof la)}var Vh=class{};var DP=(()=>{class n{constructor(t,r,o,i,s){this.router=t,this.injector=o,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Gt(t=>t instanceof Qr),Dn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let o=[];for(let i of r){i.providers&&!i._injector&&(i._injector=ih(i.providers,t,`Route: ${i.path}`));let s=i._injector??t,a=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&i.canLoad===void 0||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(a,i.children??i._loadedRoutes))}return De(o).pipe(Ts())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;r.loadChildren&&r.canLoad===void 0?o=this.loader.loadChildren(t,r):o=le(null);let i=o.pipe(Et(s=>s===null?le(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return De([i,s]).pipe(Ts())}else return i})}static{this.\u0275fac=function(r){return new(r||n)(X(_t),X(dh),X(Yt),X(Vh),X(Gv))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),_T=new oe(""),MP=(()=>{class n{constructor(t,r,o,i,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=i,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ca?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Qr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Oo&&t.code===kh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof xh&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new xh(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){Y_()}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})();function Wv(n,...e){return Ao([{provide:fl,multi:!0,useValue:n},[],{provide:Zr,useFactory:IT,deps:[_t]},{provide:Si,multi:!0,useFactory:bT},e.map(t=>t.\u0275providers)])}function IT(n){return n.routerState.root}function El(n,e){return{\u0275kind:n,\u0275providers:e}}function bT(){let n=H(Nn);return e=>{let t=n.get(gr);if(e!==t.components[0])return;let r=n.get(_t),o=n.get(TT);n.get(Yv)===1&&r.initialNavigation(),n.get(ST,null,Me.Optional)?.setUpPreloading(),n.get(_T,null,Me.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var TT=new oe("",{factory:()=>new ft}),Yv=new oe("",{providedIn:"root",factory:()=>1});function RP(){return El(2,[{provide:Yv,useValue:0},{provide:lh,multi:!0,deps:[Nn],useFactory:e=>{let t=e.get(QI,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let o=e.get(_t),i=e.get(TT);wT(o,()=>{r(!0)}),e.get(Kv).afterPreactivation=()=>(r(!0),i.closed?le(void 0):i),o.initialNavigation()}))}}])}function kP(){return El(3,[{provide:lh,multi:!0,useFactory:()=>{let e=H(_t);return()=>{e.setUpLocationChangeListener()}}},{provide:Yv,useValue:2}])}var ST=new oe("");function NP(n){return El(0,[{provide:ST,useExisting:DP},{provide:Vh,useExisting:n}])}function xP(){return El(8,[Bb,{provide:Hh,useExisting:Bb}])}function OP(n){let e=[{provide:yT,useValue:mP},{provide:CT,useValue:D({skipNextTransition:!!n?.skipInitialTransition},n)}];return El(9,e)}var zb=new oe("ROUTER_FORROOT_GUARD"),PP=[qr,{provide:gl,useClass:aa},_t,vl,{provide:Zr,useFactory:IT,deps:[_t]},Gv,[]],zh=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[PP,[],{provide:fl,multi:!0,useValue:t},{provide:zb,useFactory:BP,deps:[[_t,new om,new vw]]},{provide:Cl,useValue:r||{}},r?.useHash?LP():UP(),FP(),r?.preloadingStrategy?NP(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?VP(r):[],r?.bindToComponentInputs?xP().\u0275providers:[],r?.enableViewTransitions?OP().\u0275providers:[],HP()]}}static forChild(t){return{ngModule:n,providers:[{provide:fl,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(X(zb,8))}}static{this.\u0275mod=Zt({type:n})}static{this.\u0275inj=Qt({})}}return n})();function FP(){return{provide:_T,useFactory:()=>{let n=H(XI),e=H(nt),t=H(Cl),r=H(Kv),o=H(gl);return t.scrollOffset&&n.setOffset(t.scrollOffset),new MP(o,r,n,e,t)}}}function LP(){return{provide:Ai,useClass:JI}}function UP(){return{provide:Ai,useClass:Ym}}function BP(n){return"guarded"}function VP(n){return[n.initialNavigation==="disabled"?kP().\u0275providers:[],n.initialNavigation==="enabledBlocking"?RP().\u0275providers:[]]}var $b=new oe("");function HP(){return[{provide:$b,useFactory:bT},{provide:Si,multi:!0,useExisting:$b}]}var Of={};$n(Of,{blockAPICallsBeforeInitialize:()=>Nf,blockAcquireTokenInPopups:()=>uS,blockNonBrowserEnvironment:()=>kf,blockRedirectInIframe:()=>lS,blockReloadInHiddenIframes:()=>cS,clearHash:()=>aC,createGuid:()=>uC,getCurrentUri:()=>on,getHomepage:()=>lC,invoke:()=>tn,invokeAsync:()=>j,isInIframe:()=>uu,isInPopup:()=>aS,preconnect:()=>hu,preflightCheck:()=>du,redirectPreflightCheck:()=>xf,replaceHash:()=>cC});var R={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},fa={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},In=[R.OPENID_SCOPE,R.PROFILE_SCOPE,R.OFFLINE_ACCESS_SCOPE],Qv=[...In,R.EMAIL_SCOPE],gt={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},mt={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},er={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},pa={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},et={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},$h={PLAIN:"plain",S256:"S256"},tr={QUERY:"query",FRAGMENT:"fragment"},Zv=J(D({},tr),{FORM_POST:"form_post"}),wl={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},ga={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},ct={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},de={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"};var _l="appmetadata",AT="client_info",Fo="1",ma={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},Jt={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},Mt={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Re={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Jr={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},Gh={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},qh={username:"username",password:"password"},Il={httpSuccess:200,httpBadRequest:400},ki={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},Kh={CONFIGURED_MATCHES_DETECTED:"1",CONFIGURED_NO_AUTO_DETECTION:"2",CONFIGURED_NOT_DETECTED:"3",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},nr={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},Wh={Jwt:"JWT",Jwk:"JWK",Pop:"pop"};var Jv=300;var Ni={};$n(Ni,{postRequestFailed:()=>Tl,unexpectedError:()=>bl});var bl="unexpected_error",Tl="post_request_failed";var Yh={[bl]:"Unexpected error in authentication.",[Tl]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},DT={unexpectedError:{code:bl,desc:Yh[bl]},postRequestFailed:{code:Tl,desc:Yh[Tl]}},Se=class n extends Error{constructor(e,t,r){let o=t?`${e}: ${t}`:e;super(o),Object.setPrototypeOf(this,n.prototype),this.errorCode=e||R.EMPTY_STRING,this.errorMessage=t||R.EMPTY_STRING,this.subError=r||R.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}};function Sl(n,e){return new Se(n,e?`${Yh[n]} ${e}`:Yh[n])}var Rt={};$n(Rt,{authTimeNotFound:()=>Xr,authorizationCodeMissingFromServerResponse:()=>Ki,bindingKeyNotRemoved:()=>Wi,cannotAppendScopeSet:()=>$i,cannotRemoveEmptyScope:()=>zi,clientInfoDecodingError:()=>Lo,clientInfoEmptyError:()=>xi,deviceCodeExpired:()=>Rl,deviceCodePollingCancelled:()=>Ml,deviceCodeUnknownError:()=>kl,emptyInputScopeSet:()=>Vo,endSessionEndpointNotSupported:()=>Yi,endpointResolutionError:()=>Xt,hashNotDeserialized:()=>Li,invalidAssertion:()=>Ol,invalidCacheEnvironment:()=>to,invalidCacheRecord:()=>Gi,invalidClientCredential:()=>Pl,invalidState:()=>rr,keyIdMissing:()=>Qi,maxAgeTranspired:()=>Vi,methodNotImplemented:()=>Ee,missingTenantIdError:()=>Bl,multipleMatchingAccounts:()=>Dl,multipleMatchingAppMetadata:()=>Hi,multipleMatchingTokens:()=>Al,nestedAppAuthBridgeDisabled:()=>Vl,networkError:()=>Pi,noAccountFound:()=>Nl,noAccountInSilentRequest:()=>eo,noCryptoObject:()=>Ho,noNetworkConnectivity:()=>Ll,nonceMismatch:()=>Bi,nullOrEmptyToken:()=>Oi,openIdConfigError:()=>Fi,requestCannotBeMade:()=>ji,stateMismatch:()=>Ui,stateNotFound:()=>Bo,tokenClaimsCnfRequiredForSignedJwt:()=>qi,tokenParsingError:()=>Uo,tokenRefreshRequired:()=>Cr,unexpectedCredentialType:()=>xl,userCanceled:()=>Ul,userTimeoutReached:()=>Fl});var Lo="client_info_decoding_error",xi="client_info_empty_error",Uo="token_parsing_error",Oi="null_or_empty_token",Xt="endpoints_resolution_error",Pi="network_error",Fi="openid_config_error",Li="hash_not_deserialized",rr="invalid_state",Ui="state_mismatch",Bo="state_not_found",Bi="nonce_mismatch",Xr="auth_time_not_found",Vi="max_age_transpired",Al="multiple_matching_tokens",Dl="multiple_matching_accounts",Hi="multiple_matching_appMetadata",ji="request_cannot_be_made",zi="cannot_remove_empty_scope",$i="cannot_append_scopeset",Vo="empty_input_scopeset",Ml="device_code_polling_cancelled",Rl="device_code_expired",kl="device_code_unknown_error",eo="no_account_in_silent_request",Gi="invalid_cache_record",to="invalid_cache_environment",Nl="no_account_found",Ho="no_crypto_object",xl="unexpected_credential_type",Ol="invalid_assertion",Pl="invalid_client_credential",Cr="token_refresh_required",Fl="user_timeout_reached",qi="token_claims_cnf_required_for_signedjwt",Ki="authorization_code_missing_from_server_response",Wi="binding_key_not_removed",Yi="end_session_endpoint_not_supported",Qi="key_id_missing",Ll="no_network_connectivity",Ul="user_canceled",Bl="missing_tenant_id_error",Ee="method_not_implemented",Vl="nested_app_auth_bridge_disabled";var we={[Lo]:"The client info could not be parsed/decoded correctly",[xi]:"The client info was empty",[Uo]:"Token cannot be parsed",[Oi]:"The token is null or empty",[Xt]:"Endpoints cannot be resolved",[Pi]:"Network request failed",[Fi]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Li]:"The hash parameters could not be deserialized",[rr]:"State was not the expected format",[Ui]:"State mismatch error",[Bo]:"State not found",[Bi]:"Nonce mismatch error",[Xr]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[Vi]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[Al]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[Dl]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Hi]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[ji]:"Token request cannot be made without authorization code or refresh token.",[zi]:"Cannot remove null or empty scope from ScopeSet",[$i]:"Cannot append ScopeSet",[Vo]:"Empty input ScopeSet cannot be processed",[Ml]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[Rl]:"Device code is expired.",[kl]:"Device code stopped polling for unknown reasons.",[eo]:"Please pass an account object, silent flow is not supported without account information",[Gi]:"Cache record object was null or undefined.",[to]:"Invalid environment when attempting to create cache entry",[Nl]:"No account found in cache for given key.",[Ho]:"No crypto object detected.",[xl]:"Unexpected credential type.",[Ol]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[Pl]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Cr]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[Fl]:"User defined timeout for device code polling reached",[qi]:"Cannot generate a POP jwt if the token_claims are not populated",[Ki]:"Server response does not contain an authorization code to proceed",[Wi]:"Could not remove the credential's binding key from storage.",[Yi]:"The provided authority does not support logout",[Qi]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[Ll]:"No network connectivity. Check your internet connection.",[Ul]:"User cancelled the flow.",[Bl]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Ee]:"This method has not been implemented",[Vl]:"The nested app auth bridge is disabled"},MT={clientInfoDecodingError:{code:Lo,desc:we[Lo]},clientInfoEmptyError:{code:xi,desc:we[xi]},tokenParsingError:{code:Uo,desc:we[Uo]},nullOrEmptyToken:{code:Oi,desc:we[Oi]},endpointResolutionError:{code:Xt,desc:we[Xt]},networkError:{code:Pi,desc:we[Pi]},unableToGetOpenidConfigError:{code:Fi,desc:we[Fi]},hashNotDeserialized:{code:Li,desc:we[Li]},invalidStateError:{code:rr,desc:we[rr]},stateMismatchError:{code:Ui,desc:we[Ui]},stateNotFoundError:{code:Bo,desc:we[Bo]},nonceMismatchError:{code:Bi,desc:we[Bi]},authTimeNotFoundError:{code:Xr,desc:we[Xr]},maxAgeTranspired:{code:Vi,desc:we[Vi]},multipleMatchingTokens:{code:Al,desc:we[Al]},multipleMatchingAccounts:{code:Dl,desc:we[Dl]},multipleMatchingAppMetadata:{code:Hi,desc:we[Hi]},tokenRequestCannotBeMade:{code:ji,desc:we[ji]},removeEmptyScopeError:{code:zi,desc:we[zi]},appendScopeSetError:{code:$i,desc:we[$i]},emptyInputScopeSetError:{code:Vo,desc:we[Vo]},DeviceCodePollingCancelled:{code:Ml,desc:we[Ml]},DeviceCodeExpired:{code:Rl,desc:we[Rl]},DeviceCodeUnknownError:{code:kl,desc:we[kl]},NoAccountInSilentRequest:{code:eo,desc:we[eo]},invalidCacheRecord:{code:Gi,desc:we[Gi]},invalidCacheEnvironment:{code:to,desc:we[to]},noAccountFound:{code:Nl,desc:we[Nl]},noCryptoObj:{code:Ho,desc:we[Ho]},unexpectedCredentialType:{code:xl,desc:we[xl]},invalidAssertion:{code:Ol,desc:we[Ol]},invalidClientCredential:{code:Pl,desc:we[Pl]},tokenRefreshRequired:{code:Cr,desc:we[Cr]},userTimeoutReached:{code:Fl,desc:we[Fl]},tokenClaimsRequired:{code:qi,desc:we[qi]},noAuthorizationCodeFromServer:{code:Ki,desc:we[Ki]},bindingKeyNotRemovedError:{code:Wi,desc:we[Wi]},logoutNotSupported:{code:Yi,desc:we[Yi]},keyIdMissing:{code:Qi,desc:we[Qi]},noNetworkConnectivity:{code:Ll,desc:we[Ll]},userCanceledError:{code:Ul,desc:we[Ul]},missingTenantIdError:{code:Bl,desc:we[Bl]},nestedAppAuthBridgeDisabled:{code:Vl,desc:we[Vl]}},Zi=class n extends Se{constructor(e,t){super(e,t?`${we[e]}: ${t}`:we[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,n.prototype)}};function L(n,e){return new Zi(n,e)}var jo={createNewGuid:()=>{throw L(Ee)},base64Decode:()=>{throw L(Ee)},base64Encode:()=>{throw L(Ee)},base64UrlEncode:()=>{throw L(Ee)},encodeKid:()=>{throw L(Ee)},getPublicKeyThumbprint(){return T(this,null,function*(){throw L(Ee)})},removeTokenBindingKey(){return T(this,null,function*(){throw L(Ee)})},clearKeystore(){return T(this,null,function*(){throw L(Ee)})},signJwt(){return T(this,null,function*(){throw L(Ee)})},hashString(){return T(this,null,function*(){throw L(Ee)})}};var Ke=function(n){return n[n.Error=0]="Error",n[n.Warning=1]="Warning",n[n.Info=2]="Info",n[n.Verbose=3]="Verbose",n[n.Trace=4]="Trace",n}(Ke||{}),dn=class n{constructor(e,t,r){this.level=Ke.Info;let o=()=>{},i=e||n.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||o,this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level=typeof i.logLevel=="number"?i.logLevel:Ke.Info,this.correlationId=i.correlationId||R.EMPTY_STRING,this.packageName=t||R.EMPTY_STRING,this.packageVersion=r||R.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Ke.Info}}clone(e,t,r){return new n({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;let i=`${`[${new Date().toUTCString()}] : [${t.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Ke[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,i,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:Ke.Error,containsPii:!1,correlationId:t||R.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:Ke.Error,containsPii:!0,correlationId:t||R.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:Ke.Warning,containsPii:!1,correlationId:t||R.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:Ke.Warning,containsPii:!0,correlationId:t||R.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:Ke.Info,containsPii:!1,correlationId:t||R.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:Ke.Info,containsPii:!0,correlationId:t||R.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:Ke.Verbose,containsPii:!1,correlationId:t||R.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:Ke.Verbose,containsPii:!0,correlationId:t||R.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:Ke.Trace,containsPii:!1,correlationId:t||R.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:Ke.Trace,containsPii:!0,correlationId:t||R.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};var Qh="@azure/msal-common",va="14.16.0";var zo={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};var Qe={};$n(Qe,{createAccessTokenEntity:()=>ty,createIdTokenEntity:()=>ey,createRefreshTokenEntity:()=>ny,generateAppMetadataKey:()=>XP,generateAuthorityMetadataExpiresAt:()=>Jh,generateCredentialKey:()=>zl,isAccessTokenEntity:()=>zP,isAppMetadataEntity:()=>e1,isAuthorityMetadataEntity:()=>t1,isAuthorityMetadataExpired:()=>Xh,isCredentialEntity:()=>Zh,isIdTokenEntity:()=>$P,isRefreshTokenEntity:()=>GP,isServerTelemetryEntity:()=>ZP,isThrottlingEntity:()=>JP,updateAuthorityEndpointMetadata:()=>Ca,updateCloudDiscoveryMetadata:()=>$l});var $o={};$n($o,{checkMaxAge:()=>Hl,extractTokenClaims:()=>no,getJWSPayload:()=>RT});function no(n,e){let t=RT(n);try{let r=e(t);return JSON.parse(r)}catch{throw L(Uo)}}function RT(n){if(!n)throw L(Oi);let t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(n);if(!t||t.length<4)throw L(Uo);return t[2]}function Hl(n,e){if(e===0||Date.now()-3e5>n+e)throw L(Vi)}var jl={};$n(jl,{delay:()=>jP,isTokenExpired:()=>ya,nowSeconds:()=>bn,wasClockTurnedBack:()=>Xv});function bn(){return Math.round(new Date().getTime()/1e3)}function ya(n,e){let t=Number(n)||0;return bn()+e>t}function Xv(n){return Number(n)>bn()}function jP(n,e){return new Promise(t=>setTimeout(()=>t(e),n))}function zl(n){return[qP(n),KP(n),WP(n),YP(n),QP(n)].join(ct.CACHE_KEY_SEPARATOR).toLowerCase()}function ey(n,e,t,r,o){return{credentialType:de.ID_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t,realm:o}}function ty(n,e,t,r,o,i,s,a,c,l,u,d,p,h,m){let g={homeAccountId:n,credentialType:de.ACCESS_TOKEN,secret:t,cachedAt:bn().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:r,realm:o,target:i,tokenType:u||Re.BEARER};if(d&&(g.userAssertionHash=d),l&&(g.refreshOn=l.toString()),h&&(g.requestedClaims=h,g.requestedClaimsHash=m),g.tokenType?.toLowerCase()!==Re.BEARER.toLowerCase())switch(g.credentialType=de.ACCESS_TOKEN_WITH_AUTH_SCHEME,g.tokenType){case Re.POP:let y=no(t,c);if(!y?.cnf?.kid)throw L(qi);g.keyId=y.cnf.kid;break;case Re.SSH:g.keyId=p}return g}function ny(n,e,t,r,o,i,s){let a={credentialType:de.REFRESH_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t};return i&&(a.userAssertionHash=i),o&&(a.familyId=o),s&&(a.expiresOn=s.toString()),a}function Zh(n){return n.hasOwnProperty("homeAccountId")&&n.hasOwnProperty("environment")&&n.hasOwnProperty("credentialType")&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("secret")}function zP(n){return n?Zh(n)&&n.hasOwnProperty("realm")&&n.hasOwnProperty("target")&&(n.credentialType===de.ACCESS_TOKEN||n.credentialType===de.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function $P(n){return n?Zh(n)&&n.hasOwnProperty("realm")&&n.credentialType===de.ID_TOKEN:!1}function GP(n){return n?Zh(n)&&n.credentialType===de.REFRESH_TOKEN:!1}function qP(n){return[n.homeAccountId,n.environment].join(ct.CACHE_KEY_SEPARATOR).toLowerCase()}function KP(n){let e=n.credentialType===de.REFRESH_TOKEN&&n.familyId||n.clientId;return[n.credentialType,e,n.realm||""].join(ct.CACHE_KEY_SEPARATOR).toLowerCase()}function WP(n){return(n.target||"").toLowerCase()}function YP(n){return(n.requestedClaimsHash||"").toLowerCase()}function QP(n){return n.tokenType&&n.tokenType.toLowerCase()!==Re.BEARER.toLowerCase()?n.tokenType.toLowerCase():""}function ZP(n,e){let t=n.indexOf(Mt.CACHE_KEY)===0,r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),t&&r}function JP(n,e){let t=!1;n&&(t=n.indexOf(Jr.THROTTLING_PREFIX)===0);let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),t&&r}function XP({environment:n,clientId:e}){return[_l,n,e].join(ct.CACHE_KEY_SEPARATOR).toLowerCase()}function e1(n,e){return e?n.indexOf(_l)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function t1(n,e){return e?n.indexOf(ma.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function Jh(){return bn()+ma.REFRESH_TIME_SECONDS}function Ca(n,e,t){n.authorization_endpoint=e.authorization_endpoint,n.token_endpoint=e.token_endpoint,n.end_session_endpoint=e.end_session_endpoint,n.issuer=e.issuer,n.endpointsFromNetwork=t,n.jwks_uri=e.jwks_uri}function $l(n,e,t){n.aliases=e.aliases,n.preferred_cache=e.preferred_cache,n.preferred_network=e.preferred_network,n.aliasesFromNetwork=t}function Xh(n){return n.expiresAt<=bn()}var or={};$n(or,{authorityMismatch:()=>Zl,authorityUriInsecure:()=>Xi,cannotAllowNativeBroker:()=>Ql,cannotSetOIDCOptions:()=>Yl,claimsRequestParsingError:()=>Gl,emptyInputScopesError:()=>ts,invalidAuthenticationHeader:()=>Wl,invalidAuthorityMetadata:()=>ss,invalidClaims:()=>ro,invalidCloudDiscoveryMetadata:()=>Go,invalidCodeChallengeMethod:()=>is,invalidPromptValue:()=>ns,logoutRequestEmpty:()=>os,missingNonceAuthenticationHeader:()=>Kl,missingSshJwk:()=>io,missingSshKid:()=>ql,pkceParamsMissing:()=>oo,redirectUriEmpty:()=>Ji,tokenRequestEmpty:()=>rs,untrustedAuthority:()=>as,urlEmptyError:()=>es,urlParseError:()=>Er});var Ji="redirect_uri_empty",Gl="claims_request_parsing_error",Xi="authority_uri_insecure",Er="url_parse_error",es="empty_url_error",ts="empty_input_scopes_error",ns="invalid_prompt_value",ro="invalid_claims",rs="token_request_empty",os="logout_request_empty",is="invalid_code_challenge_method",oo="pkce_params_missing",Go="invalid_cloud_discovery_metadata",ss="invalid_authority_metadata",as="untrusted_authority",io="missing_ssh_jwk",ql="missing_ssh_kid",Kl="missing_nonce_authentication_header",Wl="invalid_authentication_header",Yl="cannot_set_OIDCOptions",Ql="cannot_allow_native_broker",Zl="authority_mismatch";var st={[Ji]:"A redirect URI is required for all calls, and none has been set.",[Gl]:"Could not parse the given claims request object.",[Xi]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Er]:"URL could not be parsed into appropriate segments.",[es]:"URL was empty or null.",[ts]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[ns]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[ro]:"Given claims parameter must be a stringified JSON object.",[rs]:"Token request was empty and not found in cache.",[os]:"The logout request was null or undefined.",[is]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[oo]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Go]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[ss]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[as]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[io]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[ql]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[Kl]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[Wl]:"Invalid authentication header provided",[Yl]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Ql]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[Zl]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."},kT={redirectUriNotSet:{code:Ji,desc:st[Ji]},claimsRequestParsingError:{code:Gl,desc:st[Gl]},authorityUriInsecure:{code:Xi,desc:st[Xi]},urlParseError:{code:Er,desc:st[Er]},urlEmptyError:{code:es,desc:st[es]},emptyScopesError:{code:ts,desc:st[ts]},invalidPrompt:{code:ns,desc:st[ns]},invalidClaimsRequest:{code:ro,desc:st[ro]},tokenRequestEmptyError:{code:rs,desc:st[rs]},logoutRequestEmptyError:{code:os,desc:st[os]},invalidCodeChallengeMethod:{code:is,desc:st[is]},invalidCodeChallengeParams:{code:oo,desc:st[oo]},invalidCloudDiscoveryMetadata:{code:Go,desc:st[Go]},invalidAuthorityMetadata:{code:ss,desc:st[ss]},untrustedAuthority:{code:as,desc:st[as]},missingSshJwk:{code:io,desc:st[io]},missingSshKid:{code:ql,desc:st[ql]},missingNonceAuthenticationHeader:{code:Kl,desc:st[Kl]},invalidAuthenticationHeader:{code:Wl,desc:st[Wl]},cannotSetOIDCOptions:{code:Yl,desc:st[Yl]},cannotAllowNativeBroker:{code:Ql,desc:st[Ql]},authorityMismatch:{code:Zl,desc:st[Zl]}},Jl=class n extends Se{constructor(e){super(e,st[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,n.prototype)}};function xe(n){return new Jl(n)}var at=class{static isEmptyObj(e){if(e)try{let t=JSON.parse(e);return Object.keys(t).length===0}catch{}return!0}static startsWith(e,t){return e.indexOf(t)===0}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){let t={},r=e.split("&"),o=i=>decodeURIComponent(i.replace(/\+/g," "));return r.forEach(i=>{if(i.trim()){let[s,a]=i.split(/=(.+)/g,2);s&&a&&(t[o(s)]=o(a))}}),t}static trimArrayEntries(e){return e.map(t=>t.trim())}static removeEmptyStringsFromArray(e){return e.filter(t=>!!t)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}};var tt=class n{constructor(e){let t=e?at.trimArrayEntries([...e]):[],r=t?at.removeEmptyStringsFromArray(t):[];this.validateInputScopes(r),this.scopes=new Set,r.forEach(o=>this.scopes.add(o))}static fromString(e){let r=(e||R.EMPTY_STRING).split(" ");return new n(r)}static createSearchScopes(e){let t=new n(e);return t.containsOnlyOIDCScopes()?t.removeScope(R.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}validateInputScopes(e){if(!e||e.length<1)throw xe(ts)}containsScope(e){let t=this.printScopesLowerCase().split(" "),r=new n(t);return e?r.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(t=>this.containsScope(t))}containsOnlyOIDCScopes(){let e=0;return Qv.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(t=>this.appendScope(t))}catch{throw L($i)}}removeScope(e){if(!e)throw L(zi);this.scopes.delete(e.trim())}removeOIDCScopes(){Qv.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw L(Vo);let t=new Set;return e.scopes.forEach(r=>t.add(r.toLowerCase())),this.scopes.forEach(r=>t.add(r.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw L(Vo);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let t=this.unionScopeSets(e),r=e.getScopeCount(),o=this.getScopeCount();return t.size<o+r}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):R.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}};function Ea(n,e){if(!n)throw L(xi);try{let t=e(n);return JSON.parse(t)}catch{throw L(Lo)}}function so(n){if(!n)throw L(Lo);let e=n.split(ct.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?R.EMPTY_STRING:e[1]}}function wa(n,e){return!!n&&!!e&&n===e.split(".")[1]}function _a(n,e,t,r){if(r){let{oid:o,sub:i,tid:s,name:a,tfp:c,acr:l}=r,u=s||c||l||"";return{tenantId:u,localAccountId:o||i||"",name:a,isHomeTenant:wa(u,n)}}else return{tenantId:t,localAccountId:e,isHomeTenant:wa(t,n)}}function cs(n,e,t,r){let o=n;if(e){let i=e,{isHomeTenant:a}=i,c=ar(i,["isHomeTenant"]);o=D(D({},n),c)}if(t){let s=_a(n.homeAccountId,n.localAccountId,n.tenantId,t),{isHomeTenant:a}=s,c=ar(s,["isHomeTenant"]);return o=J(D(D({},o),c),{idTokenClaims:t,idToken:r}),o}return o}var en={Default:0,Adfs:1,Dsts:2,Ciam:3};function ef(n){return n&&(n.tid||n.tfp||n.acr)||null}var Bt={AAD:"AAD",OIDC:"OIDC"};var Xe=class n{generateAccountId(){return[this.homeAccountId,this.environment].join(ct.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return n.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){let t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",t||e.tenantId||""].join(ct.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,t,r){let o=new n;t.authorityType===en.Adfs?o.authorityType=ga.ADFS_ACCOUNT_TYPE:t.protocolMode===Bt.AAD?o.authorityType=ga.MSSTS_ACCOUNT_TYPE:o.authorityType=ga.GENERIC_ACCOUNT_TYPE;let i;e.clientInfo&&r&&(i=Ea(e.clientInfo,r)),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;let s=e.environment||t&&t.getPreferredCache();if(!s)throw L(to);o.environment=s,o.realm=i?.utid||ef(e.idTokenClaims)||"",o.localAccountId=i?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let a=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,c=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(o.username=a||c||"",o.name=e.idTokenClaims?.name||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{let l=_a(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[l]}return o}static createFromAccountInfo(e,t,r){let o=new n;return o.authorityType=e.authorityType||ga.GENERIC_ACCOUNT_TYPE,o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.cloudGraphHostName=t,o.msGraphHost=r,o.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),o}static generateHomeAccountId(e,t,r,o,i){if(!(t===en.Adfs||t===en.Dsts)){if(e)try{let s=Ea(e,o.base64Decode);if(s.uid&&s.utid)return`${s.uid}.${s.utid}`}catch{}r.warning("No client info in response")}return i?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,t,r){if(!e||!t)return!1;let o=!0;if(r){let i=e.idTokenClaims||{},s=t.idTokenClaims||{};o=i.iat===s.iat&&i.nonce===s.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&o}};var qo={};$n(qo,{getDeserializedResponse:()=>ry,stripLeadingHashOrQuery:()=>NT});function NT(n){return n.startsWith("#/")?n.substring(2):n.startsWith("#")||n.startsWith("?")?n.substring(1):n}function ry(n){if(!n||n.indexOf("=")<0)return null;try{let e=NT(n),t=Object.fromEntries(new URLSearchParams(e));if(t.code||t.error||t.error_description||t.state)return t}catch{throw L(Li)}return null}var _e=class n{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw xe(es);e.includes("#")||(this._urlString=n.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return at.endsWith(t,"?")?t=t.slice(0,-1):at.endsWith(t,"?/")&&(t=t.slice(0,-2)),at.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw xe(Er)}if(!e.HostNameAndPort||!e.PathSegments)throw xe(Er);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw xe(Xi)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return n.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let t=this.getUrlComponents(),r=t.PathSegments;return e&&r.length!==0&&(r[0]===er.COMMON||r[0]===er.ORGANIZATIONS)&&(r[0]=e),n.constructAuthorityUriFromObject(t)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw xe(Er);let r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]},o=r.AbsolutePath.split("/");return o=o.filter(i=>i&&i.length>0),r.PathSegments=o,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){let t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw xe(Er);return r[2]}static getAbsoluteUrl(e,t){if(e[0]===R.FORWARD_SLASH){let o=new n(t).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new n(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!ry(e)}};var OT={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},oy=OT.endpointMetadata,iy=OT.instanceDiscoveryMetadata,sy=new Set;iy.metadata.forEach(n=>{n.aliases.forEach(e=>{sy.add(e)})});function PT(n,e){let t,r=n.canonicalAuthority;if(r){let o=new _e(r).getUrlComponents().HostNameAndPort;t=xT(o,n.cloudDiscoveryMetadata?.metadata,Jt.CONFIG,e)||xT(o,iy.metadata,Jt.HARDCODED_VALUES,e)||n.knownAuthorities}return t||[]}function xT(n,e,t,r){if(r?.trace(`getAliasesFromMetadata called with source: ${t}`),n&&e){let o=Xl(e,n);if(o)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${t}, returning aliases`),o.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${t}`)}return null}function FT(n){return Xl(iy.metadata,n)}function Xl(n,e){for(let t=0;t<n.length;t++){let r=n[t];if(r.aliases.includes(e))return r}return null}var tf="cache_quota_exceeded",eu="cache_error_unknown";var ay={[tf]:"Exceeded cache storage capacity.",[eu]:"Unexpected error occurred when using cache storage."},ao=class n extends Error{constructor(e,t){let r=t||(ay[e]?ay[e]:ay[eu]);super(`${e}: ${r}`),Object.setPrototypeOf(this,n.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}};var co=class n{constructor(e,t,r,o){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(Qh,va),this.staticAuthorityOptions=o}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){let t=this.getAllAccounts(e);return t.length>1?t.sort(o=>o.idTokenClaims?-1:1)[0]:t.length===1?t[0]:null}getBaseAccountInfo(e){let t=this.getAccountsFilteredBy(e);return t.length>0?t[0].getAccountInfo():null}buildTenantProfiles(e,t){return e.flatMap(r=>this.getTenantProfilesFromAccountEntity(r,t?.tenantId,t))}getTenantedAccountInfoByFilter(e,t,r,o){let i=null,s;if(o&&!this.tenantProfileMatchesFilter(r,o))return null;let a=this.getIdToken(e,t,r.tenantId);return a&&(s=no(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(s,o))?null:(i=cs(e,r,s,a?.secret),i)}getTenantProfilesFromAccountEntity(e,t,r){let o=e.getAccountInfo(),i=o.tenantProfiles||new Map,s=this.getTokenKeys();if(t){let c=i.get(t);if(c)i=new Map([[t,c]]);else return[]}let a=[];return i.forEach(c=>{let l=this.getTenantedAccountInfoByFilter(o,s,c,r);l&&a.push(l)}),a}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||t.isHomeTenant!==void 0&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return!(t&&(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId)||t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint)||t.username&&!this.matchUsername(e.preferred_username,t.username)||t.name&&!this.matchName(e,t.name)||t.sid&&!this.matchSid(e,t.sid)))}saveCacheRecord(e,t,r){return T(this,null,function*(){if(!e)throw L(Gi);try{e.account&&this.setAccount(e.account),e.idToken&&t?.idToken!==!1&&this.setIdTokenCredential(e.idToken),e.accessToken&&t?.accessToken!==!1&&(yield this.saveAccessToken(e.accessToken)),e.refreshToken&&t?.refreshToken!==!1&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(o){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),o instanceof Error?(this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${o.message}`,r),o.name==="QuotaExceededError"||o.name==="NS_ERROR_DOM_QUOTA_REACHED"||o.message.includes("exceeded the quota")?(this.commonLogger?.error("CacheManager.saveCacheRecord: exceeded storage quota",r),new ao(tf)):new ao(o.name,o.message)):(this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${o}`,r),new ao(eu))}})}saveAccessToken(e){return T(this,null,function*(){let t={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},r=this.getTokenKeys(),o=tt.fromString(e.target),i=[];r.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,t,!1))return;let a=this.getAccessTokenCredential(s);a&&this.credentialMatchesFilter(a,t)&&tt.fromString(a.target).intersectingScopeSets(o)&&i.push(this.removeAccessToken(s))}),yield Promise.all(i),this.setAccessTokenCredential(e)})}getAccountsFilteredBy(e){let t=this.getAccountKeys(),r=[];return t.forEach(o=>{if(!this.isAccountKey(o,e.homeAccountId))return;let i=this.getAccount(o,this.commonLogger);if(!i||e.homeAccountId&&!this.matchHomeAccountId(i,e.homeAccountId)||e.username&&!this.matchUsername(i.username,e.username)||e.environment&&!this.matchEnvironment(i,e.environment)||e.realm&&!this.matchRealm(i,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(i,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(i,e.authorityType))return;let s={localAccountId:e?.localAccountId,name:e?.name},a=i.tenantProfiles?.filter(c=>this.tenantProfileMatchesFilter(c,s));a&&a.length===0||r.push(i)}),r}isAccountKey(e,t,r){return!(e.split(ct.CACHE_KEY_SEPARATOR).length<3||t&&!e.toLowerCase().includes(t.toLowerCase())||r&&!e.toLowerCase().includes(r.toLowerCase()))}isCredentialKey(e){if(e.split(ct.CACHE_KEY_SEPARATOR).length<6)return!1;let t=e.toLowerCase();if(t.indexOf(de.ID_TOKEN.toLowerCase())===-1&&t.indexOf(de.ACCESS_TOKEN.toLowerCase())===-1&&t.indexOf(de.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&t.indexOf(de.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(t.indexOf(de.REFRESH_TOKEN.toLowerCase())>-1){let r=`${de.REFRESH_TOKEN}${ct.CACHE_KEY_SEPARATOR}${this.clientId}${ct.CACHE_KEY_SEPARATOR}`,o=`${de.REFRESH_TOKEN}${ct.CACHE_KEY_SEPARATOR}${Fo}${ct.CACHE_KEY_SEPARATOR}`;if(t.indexOf(r.toLowerCase())===-1&&t.indexOf(o.toLowerCase())===-1)return!1}else if(t.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,t){return!(t.clientId&&!this.matchClientId(e,t.clientId)||t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash)||typeof t.homeAccountId=="string"&&!this.matchHomeAccountId(e,t.homeAccountId)||t.environment&&!this.matchEnvironment(e,t.environment)||t.realm&&!this.matchRealm(e,t.realm)||t.credentialType&&!this.matchCredentialType(e,t.credentialType)||t.familyId&&!this.matchFamilyId(e,t.familyId)||t.target&&!this.matchTarget(e,t.target)||(t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash||e.credentialType===de.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(t.tokenType&&!this.matchTokenType(e,t.tokenType)||t.tokenType===Re.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId)))}getAppMetadataFilteredBy(e){let t=this.getKeys(),r={};return t.forEach(o=>{if(!this.isAppMetadata(o))return;let i=this.getAppMetadata(o);i&&(e.environment&&!this.matchEnvironment(i,e.environment)||e.clientId&&!this.matchClientId(i,e.clientId)||(r[o]=i))}),r}getAuthorityMetadataByAlias(e){let t=this.getAuthorityMetadataKeys(),r=null;return t.forEach(o=>{if(!this.isAuthorityMetadata(o)||o.indexOf(this.clientId)===-1)return;let i=this.getAuthorityMetadata(o);i&&i.aliases.indexOf(e)!==-1&&(r=i)}),r}removeAllAccounts(){return T(this,null,function*(){let e=this.getAccountKeys(),t=[];e.forEach(r=>{t.push(this.removeAccount(r))}),yield Promise.all(t)})}removeAccount(e){return T(this,null,function*(){let t=this.getAccount(e,this.commonLogger);t&&(yield this.removeAccountContext(t),this.removeItem(e))})}removeAccountContext(e){return T(this,null,function*(){let t=this.getTokenKeys(),r=e.generateAccountId(),o=[];t.idToken.forEach(i=>{i.indexOf(r)===0&&this.removeIdToken(i)}),t.accessToken.forEach(i=>{i.indexOf(r)===0&&o.push(this.removeAccessToken(i))}),t.refreshToken.forEach(i=>{i.indexOf(r)===0&&this.removeRefreshToken(i)}),yield Promise.all(o)})}updateOutdatedCachedAccount(e,t,r){if(t&&t.isSingleTenant()){this.commonLogger?.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");let o=this.getAccountKeys().filter(l=>l.startsWith(t.homeAccountId)),i=[];o.forEach(l=>{let u=this.getCachedAccountEntity(l);u&&i.push(u)});let s=i.find(l=>wa(l.realm,l.homeAccountId))||i[0];s.tenantProfiles=i.map(l=>({tenantId:l.realm,localAccountId:l.localAccountId,name:l.name,isHomeTenant:wa(l.realm,l.homeAccountId)}));let a=n.toObject(new Xe,D({},s)),c=a.generateAccountKey();return o.forEach(l=>{l!==c&&this.removeOutdatedAccount(e)}),this.setAccount(a),r?.verbose("Updated an outdated account entity in the cache"),a}return t}removeAccessToken(e){return T(this,null,function*(){let t=this.getAccessTokenCredential(e);if(t){if(t.credentialType.toLowerCase()===de.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&t.tokenType===Re.POP){let o=t.keyId;if(o)try{yield this.cryptoImpl.removeTokenBindingKey(o)}catch{throw L(Wi)}}return this.removeItem(e)}})}removeAppMetadata(){return this.getKeys().forEach(t=>{this.isAppMetadata(t)&&this.removeItem(t)}),!0}readAccountFromCache(e){let t=Xe.generateAccountCacheKey(e);return this.getAccount(t,this.commonLogger)}getIdToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getIdToken called");let s={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:de.ID_TOKEN,clientId:this.clientId,realm:r},a=this.getIdTokensByFilter(s,t),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let l=a;if(!r){let u=new Map;a.forEach((p,h)=>{p.realm===e.tenantId&&u.set(h,p)});let d=u.size;if(d<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(d===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),u.values().next().value;l=u}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),l.forEach((u,d)=>{this.removeIdToken(d)}),o&&i&&o.addFields({multiMatchedID:a.size},i),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t){let r=t&&t.idToken||this.getTokenKeys().idToken,o=new Map;return r.forEach(i=>{if(!this.idTokenKeyMatchesFilter(i,D({clientId:this.clientId},e)))return;let s=this.getIdTokenCredential(i);s&&this.credentialMatchesFilter(s,e)&&o.set(i,s)}),o}idTokenKeyMatchesFilter(e,t){let r=e.toLowerCase();return!(t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,t,r,o,i,s){this.commonLogger.trace("CacheManager - getAccessToken called");let a=tt.createSearchScopes(t.scopes),c=t.authenticationScheme||Re.BEARER,l=c&&c.toLowerCase()!==Re.BEARER.toLowerCase()?de.ACCESS_TOKEN_WITH_AUTH_SCHEME:de.ACCESS_TOKEN,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:l,clientId:this.clientId,realm:o||e.tenantId,target:a,tokenType:c,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},d=r&&r.accessToken||this.getTokenKeys().accessToken,p=[];d.forEach(m=>{if(this.accessTokenKeyMatchesFilter(m,u,!0)){let g=this.getAccessTokenCredential(m);g&&this.credentialMatchesFilter(g,u)&&p.push(g)}});let h=p.length;return h<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):h>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),p.forEach(m=>{this.removeAccessToken(zl(m))}),i&&s&&i.addFields({multiMatchedAT:p.length},s),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),p[0])}accessTokenKeyMatchesFilter(e,t,r){let o=e.toLowerCase();if(t.clientId&&o.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&o.indexOf(t.homeAccountId.toLowerCase())===-1||t.realm&&o.indexOf(t.realm.toLowerCase())===-1||t.requestedClaimsHash&&o.indexOf(t.requestedClaimsHash.toLowerCase())===-1)return!1;if(t.target){let i=t.target.asArray();for(let s=0;s<i.length;s++){if(r&&!o.includes(i[s].toLowerCase()))return!1;if(!r&&o.includes(i[s].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){let t=this.getTokenKeys(),r=[];return t.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,e,!0))return;let i=this.getAccessTokenCredential(o);i&&this.credentialMatchesFilter(i,e)&&r.push(i)}),r}getRefreshToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getRefreshToken called");let s=t?Fo:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:de.REFRESH_TOKEN,clientId:this.clientId,familyId:s},c=r&&r.refreshToken||this.getTokenKeys().refreshToken,l=[];c.forEach(d=>{if(this.refreshTokenKeyMatchesFilter(d,a)){let p=this.getRefreshTokenCredential(d);p&&this.credentialMatchesFilter(p,a)&&l.push(p)}});let u=l.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&o&&i&&o.addFields({multiMatchedRT:u},i),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),l[0])}refreshTokenKeyMatchesFilter(e,t){let r=e.toLowerCase();return!(t.familyId&&r.indexOf(t.familyId.toLowerCase())===-1||!t.familyId&&t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let t={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(t),o=Object.keys(r).map(s=>r[s]),i=o.length;if(i<1)return null;if(i>1)throw L(Hi);return o[0]}isAppMetadataFOCI(e){let t=this.readAppMetadataFromCache(e);return!!(t&&t.familyId===Fo)}matchHomeAccountId(e,t){return typeof e.homeAccountId=="string"&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){let r=e.oid||e.sub;return t===r}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return t.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,t){return!!(e&&typeof e=="string"&&t?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,t){return!!(e.userAssertionHash&&t===e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){let o=PT(this.staticAuthorityOptions,this.commonLogger);if(o.includes(t)&&o.includes(e.environment))return!0}let r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!!(e.clientId&&t===e.clientId)}matchFamilyId(e,t){return!!(e.familyId&&t===e.familyId)}matchRealm(e,t){return e.realm?.toLowerCase()===t.toLowerCase()}matchNativeAccountId(e,t){return!!(e.nativeAccountId&&t===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!!(e.authorityType&&t.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,t){return e.credentialType!==de.ACCESS_TOKEN&&e.credentialType!==de.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:tt.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!!(e.tokenType&&e.tokenType===t)}matchKeyId(e,t){return!!(e.keyId&&e.keyId===t)}isAppMetadata(e){return e.indexOf(_l)!==-1}isAuthorityMetadata(e){return e.indexOf(ma.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${ma.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,t){for(let r in t)e[r]=t[r];return e}},tu=class extends co{setAccount(){throw L(Ee)}getAccount(){throw L(Ee)}getCachedAccountEntity(){throw L(Ee)}setIdTokenCredential(){throw L(Ee)}getIdTokenCredential(){throw L(Ee)}setAccessTokenCredential(){throw L(Ee)}getAccessTokenCredential(){throw L(Ee)}setRefreshTokenCredential(){throw L(Ee)}getRefreshTokenCredential(){throw L(Ee)}setAppMetadata(){throw L(Ee)}getAppMetadata(){throw L(Ee)}setServerTelemetry(){throw L(Ee)}getServerTelemetry(){throw L(Ee)}setAuthorityMetadata(){throw L(Ee)}getAuthorityMetadata(){throw L(Ee)}getAuthorityMetadataKeys(){throw L(Ee)}setThrottlingCache(){throw L(Ee)}getThrottlingCache(){throw L(Ee)}removeItem(){throw L(Ee)}getKeys(){throw L(Ee)}getAccountKeys(){throw L(Ee)}getTokenKeys(){throw L(Ee)}updateCredentialCacheKey(){throw L(Ee)}removeOutdatedAccount(){throw L(Ee)}};var nf={tokenRenewalOffsetSeconds:Jv,preventCorsPreflight:!1},n1={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Ke.Info,correlationId:R.EMPTY_STRING},r1={claimsBasedCachingEnabled:!1},o1={sendGetRequestAsync(){return T(this,null,function*(){throw L(Ee)})},sendPostRequestAsync(){return T(this,null,function*(){throw L(Ee)})}},i1={sku:R.SKU,version:va,cpu:R.EMPTY_STRING,os:R.EMPTY_STRING},s1={clientSecret:R.EMPTY_STRING,clientAssertion:void 0},a1={azureCloudInstance:zo.None,tenant:`${R.DEFAULT_COMMON_TENANT}`},c1={application:{appName:"",appVersion:""}};function LT({authOptions:n,systemOptions:e,loggerOptions:t,cacheOptions:r,storageInterface:o,networkInterface:i,cryptoInterface:s,clientCredentials:a,libraryInfo:c,telemetry:l,serverTelemetryManager:u,persistencePlugin:d,serializableCache:p}){let h=D(D({},n1),t);return{authOptions:l1(n),systemOptions:D(D({},nf),e),loggerOptions:h,cacheOptions:D(D({},r1),r),storageInterface:o||new tu(n.clientId,jo,new dn(h)),networkInterface:i||o1,cryptoInterface:s||jo,clientCredentials:a||s1,libraryInfo:D(D({},i1),c),telemetry:D(D({},c1),l),serverTelemetryManager:u||null,persistencePlugin:d||null,serializableCache:p||null}}function l1(n){return D({clientCapabilities:[],azureCloudOptions:a1,skipAuthorityMetadataCache:!1,instanceAware:!1},n)}function nu(n){return n.authOptions.authority.options.protocolMode===Bt.OIDC}var kt={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};var uo={};$n(uo,{ACCESS_TOKEN:()=>h1,BROKER_CLIENT_ID:()=>lf,BROKER_REDIRECT_URI:()=>zy,CCS_HEADER:()=>E1,CLAIMS:()=>uy,CLIENT_ASSERTION:()=>Oy,CLIENT_ASSERTION_TYPE:()=>Py,CLIENT_ID:()=>lo,CLIENT_INFO:()=>v1,CLIENT_REQUEST_ID:()=>Ey,CLIENT_SECRET:()=>xy,CODE:()=>my,CODE_CHALLENGE:()=>vy,CODE_CHALLENGE_METHOD:()=>yy,CODE_VERIFIER:()=>Cy,DEVICE_CODE:()=>Ny,DOMAIN_HINT:()=>jy,ERROR:()=>u1,ERROR_DESCRIPTION:()=>d1,EXPIRES_IN:()=>p1,FOCI:()=>C1,GRANT_TYPE:()=>ly,ID_TOKEN:()=>f1,ID_TOKEN_HINT:()=>ky,LOGIN_HINT:()=>Hy,LOGOUT_HINT:()=>By,NATIVE_BROKER:()=>Uy,NONCE:()=>py,OBO_ASSERTION:()=>Fy,ON_BEHALF_OF:()=>y1,POST_LOGOUT_URI:()=>Ry,PROMPT:()=>gy,REDIRECT_URI:()=>rf,REFRESH_TOKEN:()=>hy,REFRESH_TOKEN_EXPIRES_IN:()=>g1,REQUESTED_TOKEN_USE:()=>Ly,REQ_CNF:()=>af,RESPONSE_MODE:()=>cy,RESPONSE_TYPE:()=>of,RETURN_SPA_CODE:()=>cf,SCOPE:()=>dy,SESSION_STATE:()=>m1,SID:()=>Vy,STATE:()=>fy,TOKEN_TYPE:()=>sf,X_APP_NAME:()=>Dy,X_APP_VER:()=>My,X_CLIENT_CPU:()=>by,X_CLIENT_CURR_TELEM:()=>Ty,X_CLIENT_EXTRA_SKU:()=>w1,X_CLIENT_LAST_TELEM:()=>Sy,X_CLIENT_OS:()=>Iy,X_CLIENT_SKU:()=>wy,X_CLIENT_VER:()=>_y,X_MS_LIB_CAPABILITY:()=>Ay});var lo="client_id",rf="redirect_uri",of="response_type",cy="response_mode",ly="grant_type",uy="claims",dy="scope",u1="error",d1="error_description",h1="access_token",f1="id_token",hy="refresh_token",p1="expires_in",g1="refresh_token_expires_in",fy="state",py="nonce",gy="prompt",m1="session_state",v1="client_info",my="code",vy="code_challenge",yy="code_challenge_method",Cy="code_verifier",Ey="client-request-id",wy="x-client-SKU",_y="x-client-VER",Iy="x-client-OS",by="x-client-CPU",Ty="x-client-current-telemetry",Sy="x-client-last-telemetry",Ay="x-ms-lib-capability",Dy="x-app-name",My="x-app-ver",Ry="post_logout_redirect_uri",ky="id_token_hint",Ny="device_code",xy="client_secret",Oy="client_assertion",Py="client_assertion_type",sf="token_type",af="req_cnf",Fy="assertion",Ly="requested_token_use",y1="on_behalf_of",C1="foci",E1="X-AnchorMailbox",cf="return_spa_code",Uy="nativebroker",By="logout_hint",Vy="sid",Hy="login_hint",jy="domain_hint",w1="x-client-xtra-sku",lf="brk_client_id",zy="brk_redirect_uri";var wr=class{static validateRedirectUri(e){if(!e)throw xe(Ji)}static validatePrompt(e){let t=[];for(let r in et)t.push(et[r]);if(t.indexOf(e)<0)throw xe(ns)}static validateClaims(e){try{JSON.parse(e)}catch{throw xe(ro)}}static validateCodeChallengeParams(e,t){if(!e||!t)throw xe(oo);this.validateCodeChallengeMethod(t)}static validateCodeChallengeMethod(e){if([$h.PLAIN,$h.S256].indexOf(e)<0)throw xe(is)}};function _1(n,e,t){if(!e)return;let r=n.get(lo);r&&n.has(lf)&&t?.addFields({embeddedClientId:r,embeddedRedirectUri:n.get(rf)},e)}var _r=class{constructor(e,t){this.parameters=new Map,this.performanceClient=t,this.correlationId=e}addResponseTypeCode(){this.parameters.set(of,encodeURIComponent(R.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(of,encodeURIComponent(`${R.TOKEN_RESPONSE_TYPE} ${R.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set(cy,encodeURIComponent(e||Zv.QUERY))}addNativeBroker(){this.parameters.set(Uy,encodeURIComponent("1"))}addScopes(e,t=!0,r=In){t&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");let o=t?[...e||[],...r]:e||[],i=new tt(o);this.parameters.set(dy,encodeURIComponent(i.printScopes()))}addClientId(e){this.parameters.set(lo,encodeURIComponent(e))}addRedirectUri(e){wr.validateRedirectUri(e),this.parameters.set(rf,encodeURIComponent(e))}addPostLogoutRedirectUri(e){wr.validateRedirectUri(e),this.parameters.set(Ry,encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set(ky,encodeURIComponent(e))}addDomainHint(e){this.parameters.set(jy,encodeURIComponent(e))}addLoginHint(e){this.parameters.set(Hy,encodeURIComponent(e))}addCcsUpn(e){this.parameters.set(gt.CCS_HEADER,encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set(gt.CCS_HEADER,encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set(Vy,encodeURIComponent(e))}addClaims(e,t){let r=this.addClientCapabilitiesToClaims(e,t);wr.validateClaims(r),this.parameters.set(uy,encodeURIComponent(r))}addCorrelationId(e){this.parameters.set(Ey,encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set(wy,e.sku),this.parameters.set(_y,e.version),e.os&&this.parameters.set(Iy,e.os),e.cpu&&this.parameters.set(by,e.cpu)}addApplicationTelemetry(e){e?.appName&&this.parameters.set(Dy,e.appName),e?.appVersion&&this.parameters.set(My,e.appVersion)}addPrompt(e){wr.validatePrompt(e),this.parameters.set(`${gy}`,encodeURIComponent(e))}addState(e){e&&this.parameters.set(fy,encodeURIComponent(e))}addNonce(e){this.parameters.set(py,encodeURIComponent(e))}addCodeChallengeParams(e,t){if(wr.validateCodeChallengeParams(e,t),e&&t)this.parameters.set(vy,encodeURIComponent(e)),this.parameters.set(yy,encodeURIComponent(t));else throw xe(oo)}addAuthorizationCode(e){this.parameters.set(my,encodeURIComponent(e))}addDeviceCode(e){this.parameters.set(Ny,encodeURIComponent(e))}addRefreshToken(e){this.parameters.set(hy,encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set(Cy,encodeURIComponent(e))}addClientSecret(e){this.parameters.set(xy,encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set(Oy,encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set(Py,encodeURIComponent(e))}addOboAssertion(e){this.parameters.set(Fy,encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set(Ly,encodeURIComponent(e))}addGrantType(e){this.parameters.set(ly,encodeURIComponent(e))}addClientInfo(){this.parameters.set(AT,"1")}addExtraQueryParameters(e){Object.entries(e).forEach(([t,r])=>{!this.parameters.has(t)&&r&&this.parameters.set(t,r)})}addClientCapabilitiesToClaims(e,t){let r;if(!e)r={};else try{r=JSON.parse(e)}catch{throw xe(ro)}return t&&t.length>0&&(r.hasOwnProperty(pa.ACCESS_TOKEN)||(r[pa.ACCESS_TOKEN]={}),r[pa.ACCESS_TOKEN][pa.XMS_CC]={values:t}),JSON.stringify(r)}addUsername(e){this.parameters.set(qh.username,encodeURIComponent(e))}addPassword(e){this.parameters.set(qh.password,encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(sf,Re.POP),this.parameters.set(af,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(sf,Re.SSH),this.parameters.set(af,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set(Ty,e.generateCurrentRequestHeaderValue()),this.parameters.set(Sy,e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set(Ay,Jr.X_MS_LIB_CAPABILITY_VALUE)}addLogoutHint(e){this.parameters.set(By,encodeURIComponent(e))}addBrokerParameters(e){let t={};t[lf]=e.brokerClientId,t[zy]=e.brokerRedirectUri,this.addExtraQueryParameters(t)}createQueryString(){let e=new Array;return this.parameters.forEach((t,r)=>{e.push(`${r}=${t}`)}),_1(this.parameters,this.correlationId,this.performanceClient),e.join("&")}};var df={};$n(df,{createDiscoveredInstance:()=>qy});function UT(n){return n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("jwks_uri")}function BT(n){return n.hasOwnProperty("tenant_discovery_endpoint")&&n.hasOwnProperty("metadata")}function VT(n){return n.hasOwnProperty("error")&&n.hasOwnProperty("error_description")}var C={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"},S3=new Map([[C.AcquireTokenByCode,"ATByCode"],[C.AcquireTokenByRefreshToken,"ATByRT"],[C.AcquireTokenSilent,"ATS"],[C.AcquireTokenSilentAsync,"ATSAsync"],[C.AcquireTokenPopup,"ATPopup"],[C.AcquireTokenRedirect,"ATRedirect"],[C.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[C.CryptoOptsSignJwt,"CryptoSignJwt"],[C.SilentCacheClientAcquireToken,"SltCacheClientAT"],[C.SilentIframeClientAcquireToken,"SltIframeClientAT"],[C.SilentRefreshClientAcquireToken,"SltRClientAT"],[C.SsoSilent,"SsoSlt"],[C.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[C.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[C.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[C.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[C.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[C.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[C.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[C.BrokerHandhshake,"BrokerHandshake"],[C.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[C.AcquireTokenByBroker,"ATByBroker"],[C.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[C.RefreshTokenClientAcquireToken,"RTClientAT"],[C.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[C.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[C.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[C.AcquireTokenFromCache,"ATFromCache"],[C.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[C.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[C.AcquireTokenBySilentIframe,"ATBySltIframe"],[C.InitializeBaseRequest,"InitBaseReq"],[C.InitializeSilentRequest,"InitSltReq"],[C.InitializeClientApplication,"InitClientApplication"],[C.SilentIframeClientTokenHelper,"SIClientTHelper"],[C.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[C.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[C.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[C.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[C.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[C.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[C.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[C.StandardInteractionClientInitializeAuthorizationCodeRequest,"StdIntClientInitAuthCodeReq"],[C.GetAuthCodeUrl,"GetAuthCodeUrl"],[C.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[C.HandleCodeResponse,"HandleCodeResp"],[C.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[C.AuthClientAcquireToken,"AuthClientAT"],[C.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[C.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[C.AuthClientCreateQueryString,"AuthClientCreateQueryStr"],[C.PopTokenGenerateCnf,"PopTGenCnf"],[C.PopTokenGenerateKid,"PopTGenKid"],[C.HandleServerTokenResponse,"HandleServerTRes"],[C.DeserializeResponse,"DeserializeRes"],[C.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[C.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[C.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[C.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[C.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[C.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[C.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[C.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[C.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[C.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[C.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[C.AcquireTokenByCodeAsync,"ATByCodeAsync"],[C.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[C.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[C.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[C.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[C.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[C.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[C.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[C.NativeGenerateAuthResult,"NtvGenAuthRes"],[C.RemoveHiddenIframe,"RemoveHiddenIframe"],[C.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[C.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[C.GeneratePkceCodes,"GenPkceCodes"],[C.GenerateCodeVerifier,"GenCodeVerifier"],[C.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[C.Sha256Digest,"Sha256Digest"],[C.GetRandomValues,"GetRandomValues"]]),$y={NotStarted:0,InProgress:1,Completed:2};var tn=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);let s=r?.startMeasurement(e,o);if(o){let a=e+"CallCount";r?.incrementFields({[a]:1},o)}try{let a=n(...i);return s?.end({success:!0}),t.trace(`Returning result from ${e}`),a}catch(a){t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a}},j=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);let s=r?.startMeasurement(e,o);if(o){let a=e+"CallCount";r?.incrementFields({[a]:1},o)}return r?.setPreQueueTime(e,o),n(...i).then(a=>(t.trace(`Returning result from ${e}`),s?.end({success:!0}),a)).catch(a=>{t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a})};var HT=(()=>{class n{constructor(t,r,o,i){this.networkInterface=t,this.logger=r,this.performanceClient=o,this.correlationId=i}detectRegion(t,r){return T(this,null,function*(){this.performanceClient?.addQueueMeasurement(C.RegionDiscoveryDetectRegion,this.correlationId);let o=t;if(o)r.region_source=ki.ENVIRONMENT_VARIABLE;else{let i=n.IMDS_OPTIONS;try{let s=yield j(this.getRegionFromIMDS.bind(this),C.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(R.IMDS_VERSION,i);if(s.status===Il.httpSuccess&&(o=s.body,r.region_source=ki.IMDS),s.status===Il.httpBadRequest){let a=yield j(this.getCurrentVersion.bind(this),C.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!a)return r.region_source=ki.FAILED_AUTO_DETECTION,null;let c=yield j(this.getRegionFromIMDS.bind(this),C.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,i);c.status===Il.httpSuccess&&(o=c.body,r.region_source=ki.IMDS)}}catch{return r.region_source=ki.FAILED_AUTO_DETECTION,null}}return o||(r.region_source=ki.FAILED_AUTO_DETECTION),o||null})}getRegionFromIMDS(t,r){return T(this,null,function*(){return this.performanceClient?.addQueueMeasurement(C.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${R.IMDS_ENDPOINT}?api-version=${t}&format=text`,r,R.IMDS_TIMEOUT)})}getCurrentVersion(t){return T(this,null,function*(){this.performanceClient?.addQueueMeasurement(C.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let r=yield this.networkInterface.sendGetRequestAsync(`${R.IMDS_ENDPOINT}?format=json`,t);return r.status===Il.httpBadRequest&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}})}}return n.IMDS_OPTIONS={headers:{Metadata:"true"}},n})();var Un=class n{constructor(e,t,r,o,i,s,a,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=a,this.correlationId=s,this.managedIdentity=c||!1,this.regionDiscovery=new HT(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(R.CIAM_AUTH_URL))return en.Ciam;let t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case R.ADFS:return en.Adfs;case R.DSTS:return en.Dsts}return en.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new _e(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw L(Xt)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw L(Xt)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw L(Xt)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw L(Yi);return this.replacePath(this.metadata.end_session_endpoint)}else throw L(Xt)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw L(Xt)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw L(Xt)}canReplaceTenant(e){return e.PathSegments.length===1&&!n.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===en.Default&&this.protocolMode===Bt.AAD}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e,o=new _e(this.metadata.canonical_authority).getUrlComponents(),i=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,c)=>{let l=i[c];if(c===0&&this.canReplaceTenant(o)){let u=new _e(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];l!==u&&(this.logger.verbose(`Replacing tenant domain name ${l} with id ${u}`),l=u)}a!==l&&(t=t.replace(`/${l}/`,`/${a}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===en.Adfs||this.protocolMode!==Bt.AAD&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}resolveEndpointsAsync(){return T(this,null,function*(){this.performanceClient?.addQueueMeasurement(C.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),t=yield j(this.updateCloudDiscoveryMetadata.bind(this),C.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let r=yield j(this.updateEndpointMetadata.bind(this),C.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:r}),this.performanceClient?.addFields({cloudDiscoverySource:t,authorityEndpointSource:r},this.correlationId)})}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:Jh(),jwks_uri:""}),e}updateCachedMetadata(e,t,r){t!==Jt.CACHE&&r?.source!==Jt.CACHE&&(e.expiresAt=Jh(),e.canonical_authority=this.canonicalAuthority);let o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}updateEndpointMetadata(e){return T(this,null,function*(){this.performanceClient?.addQueueMeasurement(C.AuthorityUpdateEndpointMetadata,this.correlationId);let t=this.updateEndpointMetadataFromLocalSources(e);if(t){if(t.source===Jt.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&t.metadata){let o=yield j(this.updateMetadataWithRegionalInformation.bind(this),C.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(t.metadata);Ca(e,o,!1),e.canonical_authority=this.canonicalAuthority}return t.source}let r=yield j(this.getEndpointMetadataFromNetwork.bind(this),C.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(r=yield j(this.updateMetadataWithRegionalInformation.bind(this),C.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),Ca(e,r,!0),Jt.NETWORK;throw L(Fi,this.defaultOpenIdConfigurationEndpoint)})}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),Ca(e,t,!1),{source:Jt.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let o=this.getEndpointMetadataFromHardcodedValues();if(o)return Ca(e,o,!1),{source:Jt.HARDCODED_VALUES,metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let r=Xh(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Jt.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new _e(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw xe(ss)}return null}getEndpointMetadataFromNetwork(){return T(this,null,function*(){this.performanceClient?.addQueueMeasurement(C.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{let r=yield this.networkInterface.sendGetRequestAsync(t,e);return UT(r.body)?r.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(r){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${r}`),null}})}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in oy?oy[this.hostnameAndPort]:null}updateMetadataWithRegionalInformation(e){return T(this,null,function*(){this.performanceClient?.addQueueMeasurement(C.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let t=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(t){if(t!==R.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=Kh.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=t,n.replaceWithRegionalInformation(e,t);let r=yield j(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),C.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(r)return this.regionDiscoveryMetadata.region_outcome=Kh.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=r,n.replaceWithRegionalInformation(e,r);this.regionDiscoveryMetadata.region_outcome=Kh.AUTO_DETECTION_REQUESTED_FAILED}return e})}updateCloudDiscoveryMetadata(e){return T(this,null,function*(){this.performanceClient?.addQueueMeasurement(C.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;let r=yield j(this.getCloudDiscoveryMetadataFromNetwork.bind(this),C.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return $l(e,r,!0),Jt.NETWORK;throw xe(as)})}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||R.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||R.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||R.NOT_APPLICABLE}`);let t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),$l(e,t,!1),Jt.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let o=FT(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),$l(e,o,!1),Jt.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let r=Xh(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),Jt.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===en.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),t=Xl(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),xe(Go)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}getCloudDiscoveryMetadataFromNetwork(){return T(this,null,function*(){this.performanceClient?.addQueueMeasurement(C.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${R.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={},r=null;try{let o=yield this.networkInterface.sendGetRequestAsync(e,t),i,s;if(BT(o.body))i=o.body,s=i.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${i.tenant_discovery_endpoint}`);else if(VT(o.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${o.status}`),i=o.body,i.error===R.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${i.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${i.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),s=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=Xl(s,this.hostnameAndPort)}catch(o){if(o instanceof Se)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${o.errorCode}
Error Description: ${o.errorMessage}`);else{let i=o;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${i.name}
Error Description: ${i.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r})}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(t=>t&&_e.getDomainFromUrl(t).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let r;if(t&&t.azureCloudInstance!==zo.None){let o=t.tenant?t.tenant:R.DEFAULT_COMMON_TENANT;r=`${t.azureCloudInstance}/${o}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return R.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw L(Xt)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return sy.has(e)}static isPublicCloudAuthority(e){return R.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,r){let o=new _e(e);o.validateAsUri();let i=o.getUrlComponents(),s=`${t}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(s=`${t}.${R.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let a=_e.constructAuthorityUriFromObject(J(D({},o.getUrlComponents()),{HostNameAndPort:s})).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,t){let r=D({},e);return r.authorization_endpoint=n.buildRegionalAuthorityString(r.authorization_endpoint,t),r.token_endpoint=n.buildRegionalAuthorityString(r.token_endpoint,t),r.end_session_endpoint&&(r.end_session_endpoint=n.buildRegionalAuthorityString(r.end_session_endpoint,t)),r}static transformCIAMAuthority(e){let t=e,o=new _e(e).getUrlComponents();if(o.PathSegments.length===0&&o.HostNameAndPort.endsWith(R.CIAM_AUTH_URL)){let i=o.HostNameAndPort.split(".")[0];t=`${t}${i}${R.AAD_TENANT_DOMAIN_SUFFIX}`}return t}};Un.reservedTenantDomains=new Set(["{tenant}","{tenantid}",er.COMMON,er.CONSUMERS,er.ORGANIZATIONS]);function jT(n){let r=new _e(n).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case er.COMMON:case er.ORGANIZATIONS:case er.CONSUMERS:return;default:return r}}function uf(n){return n.endsWith(R.FORWARD_SLASH)?n:`${n}${R.FORWARD_SLASH}`}function Gy(n){let e=n.cloudDiscoveryMetadata,t;if(e)try{t=JSON.parse(e)}catch{throw xe(Go)}return{canonicalAuthority:n.authority?uf(n.authority):void 0,knownAuthorities:n.knownAuthorities,cloudDiscoveryMetadata:t}}function qy(n,e,t,r,o,i,s){return T(this,null,function*(){s?.addQueueMeasurement(C.AuthorityFactoryCreateDiscoveredInstance,i);let a=Un.transformCIAMAuthority(uf(n)),c=new Un(a,e,t,r,o,i,s);try{return yield j(c.resolveEndpointsAsync.bind(c),C.AuthorityResolveEndpointsAsync,o,s,i)(),c}catch{throw L(Xt)}})}var nn=class n extends Se{constructor(e,t,r,o,i){super(e,t,r),this.name="ServerError",this.errorNo=o,this.status=i,Object.setPrototypeOf(this,n.prototype)}};var Ir=class n{static generateThrottlingStorageKey(e){return`${Jr.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,t){let r=n.generateThrottlingStorageKey(t),o=e.getThrottlingCache(r);if(o){if(o.throttleTime<Date.now()){e.removeItem(r);return}throw new nn(o.errorCodes?.join(" ")||R.EMPTY_STRING,o.errorMessage,o.subError)}}static postProcess(e,t,r){if(n.checkResponseStatus(r)||n.checkResponseForRetryAfter(r)){let o={throttleTime:n.calculateThrottleTime(parseInt(r.headers[gt.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(n.generateThrottlingStorageKey(t),o)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(gt.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let t=e<=0?0:e,r=Date.now()/1e3;return Math.floor(Math.min(r+(t||Jr.DEFAULT_THROTTLE_TIME_SECONDS),r+Jr.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,t,r,o){let i={clientId:t,authority:r.authority,scopes:r.scopes,homeAccountIdentifier:o,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid},s=this.generateThrottlingStorageKey(i);e.removeItem(s)}};var Ia=class n extends Se{constructor(e,t,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,n.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=r}};function hf(n,e,t){return new Ia(n,e,t)}var Ko=class{constructor(e,t){this.config=LT(e),this.logger=new dn(this.config.loggerOptions,Qh,va),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){let t={};if(t[gt.CONTENT_TYPE]=R.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case kt.HOME_ACCOUNT_ID:try{let r=so(e.credential);t[gt.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case kt.UPN:t[gt.CCS_HEADER]=`UPN: ${e.credential}`;break}return t}executePostToTokenEndpoint(e,t,r,o,i,s){return T(this,null,function*(){s&&this.performanceClient?.addQueueMeasurement(s,i);let a=yield this.sendPostRequest(o,e,{body:t,headers:r},i);return this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a})}sendPostRequest(e,t,r,o){return T(this,null,function*(){Ir.preProcess(this.cacheManager,e);let i;try{i=yield j(this.networkClient.sendPostRequestAsync.bind(this.networkClient),C.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,o)(t,r);let s=i.headers||{};this.performanceClient?.addFields({refreshTokenSize:i.body.refresh_token?.length||0,httpVerToken:s[gt.X_MS_HTTP_VERSION]||"",requestId:s[gt.X_MS_REQUEST_ID]||""},o)}catch(s){if(s instanceof Ia){let a=s.responseHeaders;throw a&&this.performanceClient?.addFields({httpVerToken:a[gt.X_MS_HTTP_VERSION]||"",requestId:a[gt.X_MS_REQUEST_ID]||"",contentTypeHeader:a[gt.CONTENT_TYPE]||void 0,contentLengthHeader:a[gt.CONTENT_LENGTH]||void 0,httpStatus:s.httpStatus},o),s.error}throw s instanceof Se?s:L(Pi)}return Ir.postProcess(this.cacheManager,e,i),i})}updateAuthority(e,t){return T(this,null,function*(){this.performanceClient?.addQueueMeasurement(C.UpdateTokenEndpointAuthority,t);let r=`https://${e}/${this.authority.tenant}/`,o=yield qy(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=o})}createTokenQueryParameters(e){let t=new _r(e.correlationId,this.performanceClient);return e.embeddedClientId&&t.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenQueryParameters&&t.addExtraQueryParameters(e.tokenQueryParameters),t.addCorrelationId(e.correlationId),t.createQueryString()}};var ho={};$n(ho,{badToken:()=>Yo,consentRequired:()=>Wy,interactionRequired:()=>Ky,loginRequired:()=>Yy,nativeAccountUnavailable:()=>ru,noTokensFound:()=>Wo,refreshTokenExpired:()=>ou});var Wo="no_tokens_found",ru="native_account_unavailable",ou="refresh_token_expired",Ky="interaction_required",Wy="consent_required",Yy="login_required",Yo="bad_token";var zT=[Ky,Wy,Yy,Yo],I1=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],ff={[Wo]:"No refresh token found in the cache. Please sign-in.",[ru]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[ou]:"Refresh token has expired.",[Yo]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."},$T={noTokensFoundError:{code:Wo,desc:ff[Wo]},native_account_unavailable:{code:ru,desc:ff[ru]},bad_token:{code:Yo,desc:ff[Yo]}},Vt=class n extends Se{constructor(e,t,r,o,i,s,a,c){super(e,t,r),Object.setPrototypeOf(this,n.prototype),this.timestamp=o||R.EMPTY_STRING,this.traceId=i||R.EMPTY_STRING,this.correlationId=s||R.EMPTY_STRING,this.claims=a||R.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}};function Qy(n,e,t){let r=!!n&&zT.indexOf(n)>-1,o=!!t&&I1.indexOf(t)>-1,i=!!e&&zT.some(s=>e.indexOf(s)>-1);return r||i||o}function ba(n){return new Vt(n,ff[n])}var Nt=class n{static setRequestState(e,t,r){let o=n.generateLibraryState(e,r);return t?`${o}${R.RESOURCE_DELIM}${t}`:o}static generateLibraryState(e,t){if(!e)throw L(Ho);let r={id:e.createNewGuid()};t&&(r.meta=t);let o=JSON.stringify(r);return e.base64Encode(o)}static parseRequestState(e,t){if(!e)throw L(Ho);if(!t)throw L(rr);try{let r=t.split(R.RESOURCE_DELIM),o=r[0],i=r.length>1?r.slice(1).join(R.RESOURCE_DELIM):R.EMPTY_STRING,s=e.base64Decode(o),a=JSON.parse(s);return{userRequestState:i||R.EMPTY_STRING,libraryState:a}}catch{throw L(rr)}}};var b1={SW:"sw",UHW:"uhw"},Tn=class{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}generateCnf(e,t){return T(this,null,function*(){this.performanceClient?.addQueueMeasurement(C.PopTokenGenerateCnf,e.correlationId);let r=yield j(this.generateKid.bind(this),C.PopTokenGenerateCnf,t,this.performanceClient,e.correlationId)(e),o=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:o}})}generateKid(e){return T(this,null,function*(){return this.performanceClient?.addQueueMeasurement(C.PopTokenGenerateKid,e.correlationId),{kid:yield this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:b1.SW}})}signPopToken(e,t,r){return T(this,null,function*(){return this.signPayload(e,t,r)})}signPayload(e,t,r,o){return T(this,null,function*(){let{resourceRequestMethod:i,resourceRequestUri:s,shrClaims:a,shrNonce:c,shrOptions:l}=r,d=(s?new _e(s):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt(D({at:e,ts:bn(),m:i?.toUpperCase(),u:d?.HostNameAndPort,nonce:c||this.cryptoUtils.createNewGuid(),p:d?.AbsolutePath,q:d?.QueryString?[[],d.QueryString]:void 0,client_claims:a||void 0},o),t,l,r.correlationId)})}};var pf=class{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}};function T1(n){let e="code=",t=n.error_uri?.lastIndexOf(e);return t&&t>=0?n.error_uri?.substring(t+e.length):void 0}var br=class n{constructor(e,t,r,o,i,s,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=o,this.serializableCache=i,this.persistencePlugin=s,this.performanceClient=a}validateServerAuthorizationCodeResponse(e,t){if(!e.state||!t)throw e.state?L(Bo,"Cached State"):L(Bo,"Server State");let r,o;try{r=decodeURIComponent(e.state)}catch{throw L(rr,e.state)}try{o=decodeURIComponent(t)}catch{throw L(rr,e.state)}if(r!==o)throw L(Ui);if(e.error||e.error_description||e.suberror){let i=T1(e);throw Qy(e.error,e.error_description,e.suberror)?new Vt(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",i):new nn(e.error||"",e.error_description,e.suberror,i)}}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){let r=`Error(s): ${e.error_codes||R.NOT_AVAILABLE} - Timestamp: ${e.timestamp||R.NOT_AVAILABLE} - Description: ${e.error_description||R.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||R.NOT_AVAILABLE} - Trace ID: ${e.trace_id||R.NOT_AVAILABLE}`,o=e.error_codes?.length?e.error_codes[0]:void 0,i=new nn(e.error,r,e.suberror,o,e.status);if(t&&e.status&&e.status>=fa.SERVER_ERROR_RANGE_START&&e.status<=fa.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${i}`);return}else if(t&&e.status&&e.status>=fa.CLIENT_ERROR_RANGE_START&&e.status<=fa.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${i}`);return}throw Qy(e.error,e.error_description,e.suberror)?new Vt(e.error,e.error_description,e.suberror,e.timestamp||R.EMPTY_STRING,e.trace_id||R.EMPTY_STRING,e.correlation_id||R.EMPTY_STRING,e.claims||R.EMPTY_STRING,o):i}}handleServerTokenResponse(e,t,r,o,i,s,a,c,l){return T(this,null,function*(){this.performanceClient?.addQueueMeasurement(C.HandleServerTokenResponse,e.correlation_id);let u;if(e.id_token){if(u=no(e.id_token||R.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&u.nonce!==i.nonce)throw L(Bi);if(o.maxAge||o.maxAge===0){let m=u.auth_time;if(!m)throw L(Xr);Hl(m,o.maxAge)}}this.homeAccountIdentifier=Xe.generateHomeAccountId(e.client_info||R.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,u);let d;i&&i.state&&(d=Nt.parseRequestState(this.cryptoObj,i.state)),e.key_id=e.key_id||o.sshKid||void 0;let p=this.generateCacheRecord(e,t,r,o,u,s,i),h;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),h=new pf(this.serializableCache,!0),yield this.persistencePlugin.beforeCacheAccess(h)),a&&!c&&p.account){let m=p.account.generateAccountKey();if(!this.cacheStorage.getAccount(m,this.logger))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),yield n.generateAuthenticationResult(this.cryptoObj,t,p,!1,o,u,d,void 0,l)}yield this.cacheStorage.saveCacheRecord(p,o.storeInCache,o.correlationId)}finally{this.persistencePlugin&&this.serializableCache&&h&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),yield this.persistencePlugin.afterCacheAccess(h))}return n.generateAuthenticationResult(this.cryptoObj,t,p,!1,o,u,d,e,l)})}generateCacheRecord(e,t,r,o,i,s,a){let c=t.getPreferredCache();if(!c)throw L(to);let l=ef(i),u,d;e.id_token&&i&&(u=ey(this.homeAccountIdentifier,c,e.id_token,this.clientId,l||""),d=Ta(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i,e.client_info,c,l,a,void 0,this.logger));let p=null;if(e.access_token){let g=e.scope?tt.fromString(e.scope):new tt(o.scopes||[]),y=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,w=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,S=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,b=r+y,F=b+w,N=S&&S>0?r+S:void 0;p=ty(this.homeAccountIdentifier,c,e.access_token,this.clientId,l||t.tenant||"",g.printScopes(),b,F,this.cryptoObj.base64Decode,N,e.token_type,s,e.key_id,o.claims,o.requestedClaimsHash)}let h=null;if(e.refresh_token){let g;if(e.refresh_token_expires_in){let y=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;g=r+y}h=ny(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,s,g)}let m=null;return e.foci&&(m={clientId:this.clientId,environment:c,familyId:e.foci}),{account:d,idToken:u,accessToken:p,refreshToken:h,appMetadata:m}}static generateAuthenticationResult(e,t,r,o,i,s,a,c,l){return T(this,null,function*(){let u=R.EMPTY_STRING,d=[],p=null,h,m,g=R.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===Re.POP&&!i.popKid){let b=new Tn(e),{secret:F,keyId:N}=r.accessToken;if(!N)throw L(Qi);u=yield b.signPopToken(F,N,i)}else u=r.accessToken.secret;d=tt.fromString(r.accessToken.target).asArray(),p=new Date(Number(r.accessToken.expiresOn)*1e3),h=new Date(Number(r.accessToken.extendedExpiresOn)*1e3),r.accessToken.refreshOn&&(m=new Date(Number(r.accessToken.refreshOn)*1e3))}r.appMetadata&&(g=r.appMetadata.familyId===Fo?Fo:"");let y=s?.oid||s?.sub||"",w=s?.tid||"";c?.spa_accountid&&r.account&&(r.account.nativeAccountId=c?.spa_accountid);let S=r.account?cs(r.account.getAccountInfo(),void 0,s,r.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:y,tenantId:w,scopes:d,account:S,idToken:r?.idToken?.secret||"",idTokenClaims:s||{},accessToken:u,fromCache:o,expiresOn:p,extExpiresOn:h,refreshOn:m,correlationId:i.correlationId,requestId:l||R.EMPTY_STRING,familyId:g,tokenType:r.accessToken?.tokenType||R.EMPTY_STRING,state:a?a.userRequestState:R.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||R.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||R.EMPTY_STRING,code:c?.spa_code,fromNativeBroker:!1}})}};function Ta(n,e,t,r,o,i,s,a,c,l,u){u?.verbose("setCachedAccount called");let p=n.getAccountKeys().find(w=>w.startsWith(t)),h=null;p&&(h=n.getAccount(p,u));let m=h||Xe.createAccount({homeAccountId:t,idTokenClaims:o,clientInfo:i,environment:s,cloudGraphHostName:c?.cloud_graph_host_name,msGraphHost:c?.msgraph_host,nativeAccountId:l},e,r),g=m.tenantProfiles||[],y=a||m.realm;if(y&&!g.find(w=>w.tenantId===y)){let w=_a(t,m.localAccountId,y,o);g.push(w)}return m.tenantProfiles=g,m}function gf(n,e,t){return T(this,null,function*(){return typeof n=="string"?n:n({clientId:e,tokenEndpoint:t})})}var ls=class extends Ko{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}getAuthCodeUrl(e){return T(this,null,function*(){this.performanceClient?.addQueueMeasurement(C.GetAuthCodeUrl,e.correlationId);let t=yield j(this.createAuthCodeUrlQueryString.bind(this),C.AuthClientCreateQueryString,this.logger,this.performanceClient,e.correlationId)(e);return _e.appendQueryString(this.authority.authorizationEndpoint,t)})}acquireToken(e,t){return T(this,null,function*(){if(this.performanceClient?.addQueueMeasurement(C.AuthClientAcquireToken,e.correlationId),!e.code)throw L(ji);let r=bn(),o=yield j(this.executeTokenRequest.bind(this),C.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),i=o.headers?.[gt.X_MS_REQUEST_ID],s=new br(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return s.validateTokenResponse(o.body),j(s.handleServerTokenResponse.bind(s),C.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,r,e,t,void 0,void 0,void 0,i)})}handleFragmentResponse(e,t){if(new br(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,t),!e.code)throw L(Ki);return e}getLogoutUri(e){if(!e)throw xe(os);let t=this.createLogoutUrlQueryString(e);return _e.appendQueryString(this.authority.endSessionEndpoint,t)}executeTokenRequest(e,t){return T(this,null,function*(){this.performanceClient?.addQueueMeasurement(C.AuthClientExecuteTokenRequest,t.correlationId);let r=this.createTokenQueryParameters(t),o=_e.appendQueryString(e.tokenEndpoint,r),i=yield j(this.createTokenRequestBody.bind(this),C.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t),s;if(t.clientInfo)try{let l=Ea(t.clientInfo,this.cryptoUtils.base64Decode);s={credential:`${l.uid}${ct.CLIENT_INFO_SEPARATOR}${l.utid}`,type:kt.HOME_ACCOUNT_ID}}catch(l){this.logger.verbose("Could not parse client info for CCS Header: "+l)}let a=this.createTokenRequestHeaders(s||t.ccsCredential),c={clientId:t.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return j(this.executePostToTokenEndpoint.bind(this),C.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(o,i,a,c,t.correlationId,C.AuthorizationCodeClientExecutePostToTokenEndpoint)})}createTokenRequestBody(e){return T(this,null,function*(){this.performanceClient?.addQueueMeasurement(C.AuthClientCreateTokenRequestBody,e.correlationId);let t=new _r(e.correlationId,this.performanceClient);if(t.addClientId(e.embeddedClientId||e.tokenBodyParameters?.[lo]||this.config.authOptions.clientId),this.includeRedirectUri?t.addRedirectUri(e.redirectUri):wr.validateRedirectUri(e.redirectUri),t.addScopes(e.scopes,!0,this.oidcDefaultScopes),t.addAuthorizationCode(e.code),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&!nu(this.config)&&t.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&t.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let o=this.config.clientCredentials.clientAssertion;t.addClientAssertion(yield gf(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),t.addClientAssertionType(o.assertionType)}if(t.addGrantType(wl.AUTHORIZATION_CODE_GRANT),t.addClientInfo(),e.authenticationScheme===Re.POP){let o=new Tn(this.cryptoUtils,this.performanceClient),i;e.popKid?i=this.cryptoUtils.encodeKid(e.popKid):i=(yield j(o.generateCnf.bind(o),C.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,t.addPopToken(i)}else if(e.authenticationScheme===Re.SSH)if(e.sshJwk)t.addSshJwk(e.sshJwk);else throw xe(io);(!at.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities);let r;if(e.clientInfo)try{let o=Ea(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${o.uid}${ct.CLIENT_INFO_SEPARATOR}${o.utid}`,type:kt.HOME_ACCOUNT_ID}}catch(o){this.logger.verbose("Could not parse client info for CCS Header: "+o)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case kt.HOME_ACCOUNT_ID:try{let o=so(r.credential);t.addCcsOid(o)}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case kt.UPN:t.addCcsUpn(r.credential);break}return e.embeddedClientId&&t.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenBodyParameters&&t.addExtraQueryParameters(e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[cf])&&t.addExtraQueryParameters({[cf]:"1"}),t.createQueryString()})}createAuthCodeUrlQueryString(e){return T(this,null,function*(){let t=e.correlationId||this.config.cryptoInterface.createNewGuid();this.performanceClient?.addQueueMeasurement(C.AuthClientCreateQueryString,t);let r=new _r(t,this.performanceClient);r.addClientId(e.embeddedClientId||e.extraQueryParameters?.[lo]||this.config.authOptions.clientId);let o=[...e.scopes||[],...e.extraScopesToConsent||[]];if(r.addScopes(o,!0,this.oidcDefaultScopes),r.addRedirectUri(e.redirectUri),r.addCorrelationId(t),r.addResponseMode(e.responseMode),r.addResponseTypeCode(),r.addLibraryInfo(this.config.libraryInfo),nu(this.config)||r.addApplicationTelemetry(this.config.telemetry.application),r.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&r.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&r.addPrompt(e.prompt),e.domainHint&&r.addDomainHint(e.domainHint),e.prompt!==et.SELECT_ACCOUNT)if(e.sid&&e.prompt===et.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),r.addSid(e.sid);else if(e.account){let i=this.extractAccountSid(e.account),s=this.extractLoginHint(e.account);if(s&&e.domainHint&&(this.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),s=null),s){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),r.addLoginHint(s);try{let a=so(e.account.homeAccountId);r.addCcsOid(a)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(i&&e.prompt===et.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),r.addSid(i);try{let a=so(e.account.homeAccountId);r.addCcsOid(a)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),r.addLoginHint(e.loginHint),r.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),r.addLoginHint(e.account.username);try{let a=so(e.account.homeAccountId);r.addCcsOid(a)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),r.addLoginHint(e.loginHint),r.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&r.addNonce(e.nonce),e.state&&r.addState(e.state),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.embeddedClientId&&r.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),this.addExtraQueryParams(e,r),e.nativeBroker&&(r.addNativeBroker(),e.authenticationScheme===Re.POP)){let i=new Tn(this.cryptoUtils),s;e.popKid?s=this.cryptoUtils.encodeKid(e.popKid):s=(yield j(i.generateCnf.bind(i),C.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,r.addPopToken(s)}return r.createQueryString()})}createLogoutUrlQueryString(e){let t=new _r(e.correlationId,this.performanceClient);return e.postLogoutRedirectUri&&t.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&t.addCorrelationId(e.correlationId),e.idTokenHint&&t.addIdTokenHint(e.idTokenHint),e.state&&t.addState(e.state),e.logoutHint&&t.addLogoutHint(e.logoutHint),this.addExtraQueryParams(e,t),t.createQueryString()}addExtraQueryParams(e,t){!(e.extraQueryParameters&&e.extraQueryParameters.hasOwnProperty("instance_aware"))&&this.config.authOptions.instanceAware&&(e.extraQueryParameters=e.extraQueryParameters||{},e.extraQueryParameters.instance_aware="true"),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters)}extractAccountSid(e){return e.idTokenClaims?.sid||null}extractLoginHint(e){return e.idTokenClaims?.login_hint||null}};var S1=300,Qo=class extends Ko{constructor(e,t){super(e,t)}acquireToken(e){return T(this,null,function*(){this.performanceClient?.addQueueMeasurement(C.RefreshTokenClientAcquireToken,e.correlationId);let t=bn(),r=yield j(this.executeTokenRequest.bind(this),C.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),o=r.headers?.[gt.X_MS_REQUEST_ID],i=new br(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(r.body),j(i.handleServerTokenResponse.bind(i),C.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,o)})}acquireTokenByRefreshToken(e){return T(this,null,function*(){if(!e)throw xe(rs);if(this.performanceClient?.addQueueMeasurement(C.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw L(eo);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return yield j(this.acquireTokenWithCachedRefreshToken.bind(this),C.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(r){let o=r instanceof Vt&&r.errorCode===Wo,i=r instanceof nn&&r.errorCode===Gh.INVALID_GRANT_ERROR&&r.subError===Gh.CLIENT_MISMATCH_ERROR;if(o||i)return j(this.acquireTokenWithCachedRefreshToken.bind(this),C.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw r}return j(this.acquireTokenWithCachedRefreshToken.bind(this),C.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)})}acquireTokenWithCachedRefreshToken(e,t){return T(this,null,function*(){this.performanceClient?.addQueueMeasurement(C.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let r=tn(this.cacheManager.getRefreshToken.bind(this.cacheManager),C.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,t,void 0,this.performanceClient,e.correlationId);if(!r)throw ba(Wo);if(r.expiresOn&&ya(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||S1))throw ba(ou);let o=J(D({},e),{refreshToken:r.secret,authenticationScheme:e.authenticationScheme||Re.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:kt.HOME_ACCOUNT_ID}});try{return yield j(this.acquireToken.bind(this),C.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(o)}catch(i){if(i instanceof Vt&&i.subError===Yo){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let s=zl(r);this.cacheManager.removeRefreshToken(s)}throw i}})}executeTokenRequest(e,t){return T(this,null,function*(){this.performanceClient?.addQueueMeasurement(C.RefreshTokenClientExecuteTokenRequest,e.correlationId);let r=this.createTokenQueryParameters(e),o=_e.appendQueryString(t.tokenEndpoint,r),i=yield j(this.createTokenRequestBody.bind(this),C.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),s=this.createTokenRequestHeaders(e.ccsCredential),a={clientId:e.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return j(this.executePostToTokenEndpoint.bind(this),C.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(o,i,s,a,e.correlationId,C.RefreshTokenClientExecutePostToTokenEndpoint)})}createTokenRequestBody(e){return T(this,null,function*(){this.performanceClient?.addQueueMeasurement(C.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let t=e.correlationId,r=new _r(t,this.performanceClient);if(r.addClientId(e.embeddedClientId||e.tokenBodyParameters?.[lo]||this.config.authOptions.clientId),e.redirectUri&&r.addRedirectUri(e.redirectUri),r.addScopes(e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),r.addGrantType(wl.REFRESH_TOKEN_GRANT),r.addClientInfo(),r.addLibraryInfo(this.config.libraryInfo),r.addApplicationTelemetry(this.config.telemetry.application),r.addThrottling(),this.serverTelemetryManager&&!nu(this.config)&&r.addServerTelemetry(this.serverTelemetryManager),r.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&r.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let o=this.config.clientCredentials.clientAssertion;r.addClientAssertion(yield gf(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),r.addClientAssertionType(o.assertionType)}if(e.authenticationScheme===Re.POP){let o=new Tn(this.cryptoUtils,this.performanceClient),i;e.popKid?i=this.cryptoUtils.encodeKid(e.popKid):i=(yield j(o.generateCnf.bind(o),C.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,r.addPopToken(i)}else if(e.authenticationScheme===Re.SSH)if(e.sshJwk)r.addSshJwk(e.sshJwk);else throw xe(io);if((!at.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case kt.HOME_ACCOUNT_ID:try{let o=so(e.ccsCredential.credential);r.addCcsOid(o)}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case kt.UPN:r.addCcsUpn(e.ccsCredential.credential);break}return e.embeddedClientId&&r.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenBodyParameters&&r.addExtraQueryParameters(e.tokenBodyParameters),r.createQueryString()})}};var iu=class extends Ko{constructor(e,t){super(e,t)}acquireToken(e){return T(this,null,function*(){try{let[t,r]=yield this.acquireCachedToken(J(D({},e),{scopes:e.scopes?.length?e.scopes:[...In]}));return r===nr.PROACTIVELY_REFRESHED&&(this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new Qo(this.config,this.performanceClient).acquireTokenByRefreshToken(e).catch(()=>{})),t}catch(t){if(t instanceof Zi&&t.errorCode===Cr)return new Qo(this.config,this.performanceClient).acquireTokenByRefreshToken(e);throw t}})}acquireCachedToken(e){return T(this,null,function*(){this.performanceClient?.addQueueMeasurement(C.SilentFlowClientAcquireCachedToken,e.correlationId);let t=nr.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!at.isEmptyObj(e.claims))throw this.setCacheOutcome(nr.FORCE_REFRESH_OR_CLAIMS,e.correlationId),L(Cr);if(!e.account)throw L(eo);let r=e.account.tenantId||jT(e.authority),o=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,o,r,this.performanceClient,e.correlationId);if(i){if(Xv(i.cachedAt)||ya(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(nr.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),L(Cr);i.refreshOn&&ya(i.refreshOn,0)&&(t=nr.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(nr.NO_CACHED_ACCESS_TOKEN,e.correlationId),L(Cr);let s=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.readAccountFromCache(e.account),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,o,r,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[yield j(this.generateResultFromCacheRecord.bind(this),C.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),t]})}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),e!==nr.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}generateResultFromCacheRecord(e,t){return T(this,null,function*(){this.performanceClient?.addQueueMeasurement(C.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId);let r;if(e.idToken&&(r=no(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||t.maxAge===0){let o=r?.auth_time;if(!o)throw L(Xr);Hl(o,t.maxAge)}return br.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)})}};var Zy={sendGetRequestAsync:()=>Promise.reject(L(Ee)),sendPostRequestAsync:()=>Promise.reject(L(Ee))};var GT=",",qT="|";function A1(n){let{skus:e,libraryName:t,libraryVersion:r,extensionName:o,extensionVersion:i}=n,s=new Map([[0,[t,r]],[2,[o,i]]]),a=[];if(e?.length){if(a=e.split(GT),a.length<4)return e}else a=Array.from({length:4},()=>qT);return s.forEach((c,l)=>{c.length===2&&c[0]?.length&&c[1]?.length&&D1({skuArr:a,index:l,skuName:c[0],skuVersion:c[1]})}),a.join(GT)}function D1(n){let{skuArr:e,index:t,skuName:r,skuVersion:o}=n;t>=e.length||(e[t]=[r,o].join(qT))}var us=class n{constructor(e,t){this.cacheOutcome=nr.NOT_APPLICABLE,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||R.EMPTY_STRING,this.wrapperVer=e.wrapperVer||R.EMPTY_STRING,this.telemetryCacheKey=Mt.CACHE_KEY+ct.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${Mt.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&t.push(`broker_error=${r}`);let o=t.join(Mt.VALUE_SEPARATOR),i=this.getRegionDiscoveryFields(),s=[e,i].join(Mt.VALUE_SEPARATOR);return[Mt.SCHEMA_VERSION,s,o].join(Mt.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),t=n.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(Mt.VALUE_SEPARATOR),o=e.errors.slice(0,t).join(Mt.VALUE_SEPARATOR),i=e.errors.length,s=t<i?Mt.OVERFLOW_TRUE:Mt.OVERFLOW_FALSE,a=[i,s].join(Mt.VALUE_SEPARATOR);return[Mt.SCHEMA_VERSION,e.cacheHits,r,o,a].join(Mt.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let t=this.getLastRequests();t.errors.length>=Mt.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof Se?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(Mt.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),t=n.maxErrorsToSend(e),r=e.errors.length;if(t===r)this.cacheManager.removeItem(this.telemetryCacheKey);else{let o={failedRequests:e.failedRequests.slice(t*2),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o)}}static maxErrorsToSend(e){let t,r=0,o=0,i=e.errors.length;for(t=0;t<i;t++){let s=e.failedRequests[2*t]||R.EMPTY_STRING,a=e.failedRequests[2*t+1]||R.EMPTY_STRING,c=e.errors[t]||R.EMPTY_STRING;if(o+=s.toString().length+a.toString().length+c.length+3,o<Mt.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||R.EMPTY_STRING),e.push(this.regionSource||R.EMPTY_STRING),e.push(this.regionOutcome||R.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return A1(e)}};var mf="missing_kid_error",vf="missing_alg_error";var M1={[mf]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[vf]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."},Jy=class n extends Se{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,n.prototype)}};function Xy(n){return new Jy(n,M1[n])}var su=class n{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw Xy(mf);if(!e.alg)throw Xy(vf);let t=new n({typ:e.typ||Wh.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(t)}};var yf=class{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}},Sa=class{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:$y.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new yf}}startPerformanceMeasurement(){return new yf}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}};var ds="pkce_not_created",hs="crypto_nonexistent",Tr="empty_navigate_uri",Aa="hash_empty_error",Zo="no_state_in_hash",Da="hash_does_not_contain_known_properties",Ma="unable_to_parse_state",Ra="state_interaction_type_mismatch",ka="interaction_in_progress",Na="popup_window_error",xa="empty_window_error",hn="user_cancelled",Cf="monitor_popup_timeout",Oa="monitor_window_timeout",Pa="redirect_in_iframe",Fa="block_iframe_reload",La="block_nested_popups",Ef="iframe_closed_prematurely",Sr="silent_logout_unsupported",Ua="no_account_error",wf="silent_prompt_value_error",Ba="no_token_request_cache_error",Va="unable_to_parse_token_request_cache_error",Jo="no_cached_authority_error",_f="auth_request_not_set_error",If="invalid_cache_type",Ar="non_browser_environment",Dr="database_not_open",fo="no_network_connectivity",Ha="post_request_failed",ja="get_request_failed",fs="failed_to_parse_response",za="unable_to_load_token",Xo="crypto_key_not_found",$a="auth_code_required",Ga="auth_code_or_nativeAccountId_required",qa="spa_code_and_nativeAccountId_present",ei="database_unavailable",Ka="unable_to_acquire_token_from_native_platform",Wa="native_handshake_timeout",Ya="native_extension_not_installed",Bn="native_connection_not_established",Qa="uninitialized_public_client_application",Za="native_prompt_not_supported",Ja="invalid_base64_string",Xa="invalid_pop_token_request",bf="failed_to_build_headers",Tf="failed_to_parse_headers";var po="For more visit: aka.ms/msaljs/browser-errors",ve={[ds]:"The PKCE code challenge and verifier could not be generated.",[hs]:"The crypto object or function is not available.",[Tr]:"Navigation URI is empty. Please check stack trace for more info.",[Aa]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${po}`,[Zo]:"Hash does not contain state. Please verify that the request originated from msal.",[Da]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${po}`,[Ma]:"Unable to parse state. Please verify that the request originated from msal.",[Ra]:"Hash contains state but the interaction type does not match the caller.",[ka]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${po}`,[Na]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[xa]:"window.open returned null or undefined window object.",[hn]:"User cancelled the flow.",[Cf]:`Token acquisition in popup failed due to timeout.  ${po}`,[Oa]:`Token acquisition in iframe failed due to timeout.  ${po}`,[Pa]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[Fa]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${po}`,[La]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[Ef]:"The iframe being monitored was closed prematurely.",[Sr]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[Ua]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[wf]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[Ba]:"No token request found in cache.",[Va]:"The cached token request could not be parsed.",[Jo]:"No cached authority found.",[_f]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[If]:"Invalid cache type",[Ar]:"Login and token requests are not supported in non-browser environments.",[Dr]:"Database is not open!",[fo]:"No network connectivity. Check your internet connection.",[Ha]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[ja]:"Network request failed. Please check the network trace to determine root cause.",[fs]:"Failed to parse network response. Check network trace.",[za]:"Error loading token to cache.",[Xo]:"Cryptographic Key or Keypair not found in browser storage.",[$a]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[Ga]:"An authorization code or nativeAccountId must be provided to this flow.",[qa]:"Request cannot contain both spa code and native account id.",[ei]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[Ka]:`Unable to acquire token from native platform.  ${po}`,[Wa]:"Timed out while attempting to establish connection to browser extension",[Ya]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[Bn]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${po}`,[Qa]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${po}`,[Za]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[Ja]:"Invalid base64 encoded string.",[Xa]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[bf]:"Failed to build request headers object.",[Tf]:"Failed to parse response headers"},wG={pkceNotGenerated:{code:ds,desc:ve[ds]},cryptoDoesNotExist:{code:hs,desc:ve[hs]},emptyNavigateUriError:{code:Tr,desc:ve[Tr]},hashEmptyError:{code:Aa,desc:ve[Aa]},hashDoesNotContainStateError:{code:Zo,desc:ve[Zo]},hashDoesNotContainKnownPropertiesError:{code:Da,desc:ve[Da]},unableToParseStateError:{code:Ma,desc:ve[Ma]},stateInteractionTypeMismatchError:{code:Ra,desc:ve[Ra]},interactionInProgress:{code:ka,desc:ve[ka]},popupWindowError:{code:Na,desc:ve[Na]},emptyWindowError:{code:xa,desc:ve[xa]},userCancelledError:{code:hn,desc:ve[hn]},monitorPopupTimeoutError:{code:Cf,desc:ve[Cf]},monitorIframeTimeoutError:{code:Oa,desc:ve[Oa]},redirectInIframeError:{code:Pa,desc:ve[Pa]},blockTokenRequestsInHiddenIframeError:{code:Fa,desc:ve[Fa]},blockAcquireTokenInPopupsError:{code:La,desc:ve[La]},iframeClosedPrematurelyError:{code:Ef,desc:ve[Ef]},silentLogoutUnsupportedError:{code:Sr,desc:ve[Sr]},noAccountError:{code:Ua,desc:ve[Ua]},silentPromptValueError:{code:wf,desc:ve[wf]},noTokenRequestCacheError:{code:Ba,desc:ve[Ba]},unableToParseTokenRequestCacheError:{code:Va,desc:ve[Va]},noCachedAuthorityError:{code:Jo,desc:ve[Jo]},authRequestNotSet:{code:_f,desc:ve[_f]},invalidCacheType:{code:If,desc:ve[If]},notInBrowserEnvironment:{code:Ar,desc:ve[Ar]},databaseNotOpen:{code:Dr,desc:ve[Dr]},noNetworkConnectivity:{code:fo,desc:ve[fo]},postRequestFailed:{code:Ha,desc:ve[Ha]},getRequestFailed:{code:ja,desc:ve[ja]},failedToParseNetworkResponse:{code:fs,desc:ve[fs]},unableToLoadTokenError:{code:za,desc:ve[za]},signingKeyNotFoundInStorage:{code:Xo,desc:ve[Xo]},authCodeRequired:{code:$a,desc:ve[$a]},authCodeOrNativeAccountRequired:{code:Ga,desc:ve[Ga]},spaCodeAndNativeAccountPresent:{code:qa,desc:ve[qa]},databaseUnavailable:{code:ei,desc:ve[ei]},unableToAcquireTokenFromNativePlatform:{code:Ka,desc:ve[Ka]},nativeHandshakeTimeout:{code:Wa,desc:ve[Wa]},nativeExtensionNotInstalled:{code:Ya,desc:ve[Ya]},nativeConnectionNotEstablished:{code:Bn,desc:ve[Bn]},uninitializedPublicClientApplication:{code:Qa,desc:ve[Qa]},nativePromptNotSupported:{code:Za,desc:ve[Za]},invalidBase64StringError:{code:Ja,desc:ve[Ja]},invalidPopTokenRequest:{code:Xa,desc:ve[Xa]}},ps=class n extends Se{constructor(e,t){super(e,ve[e],t),Object.setPrototypeOf(this,n.prototype),this.name="BrowserAuthError"}};function Q(n,e){return new ps(n,e)}var vt={INTERACTION_IN_PROGRESS_VALUE:"interaction_in_progress",INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},ti={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS"},go={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},lt={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},eC={GET:"GET",POST:"POST"},He={AUTHORITY:"authority",ACQUIRE_TOKEN_ACCOUNT:"acquireToken.account",SESSION_STATE:"session.state",REQUEST_STATE:"request.state",NONCE_IDTOKEN:"nonce.id_token",ORIGIN_URI:"request.origin",RENEW_STATUS:"token.renew.status",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",SCOPES:"scopes",INTERACTION_STATUS_KEY:"interaction.status",CCS_CREDENTIAL:"ccs.credential",CORRELATION_ID:"request.correlationId",NATIVE_REQUEST:"request.native",REDIRECT_CONTEXT:"request.redirect.context"},mo={ACCOUNT_KEYS:"msal.account.keys",TOKEN_KEYS:"msal.token.keys"},au={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},$e={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962},re=function(n){return n.Redirect="redirect",n.Popup="popup",n.Silent="silent",n.None="none",n}(re||{}),Lt={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},tC={scopes:In},nC="jwk",rC={React:"@azure/msal-react",Angular:"@azure/msal-angular"},Sf="msal.db",KT=1,WT=`${Sf}.keys`,rn={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},YT=[rn.Default,rn.Skip,rn.RefreshTokenAndNetwork],QT="msal.browser.log.level",ZT="msal.browser.log.pii";function cu(n){return encodeURIComponent(lu(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function gs(n){return JT(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function lu(n){return JT(new TextEncoder().encode(n))}function JT(n){let e=Array.from(n,t=>String.fromCodePoint(t)).join("");return btoa(e)}var R1="RSASSA-PKCS1-v1_5",tS="SHA-256",k1=2048,N1=new Uint8Array([1,0,1]),XT="0123456789abcdef",eS=new Uint32Array(1),x1="crypto_subtle_undefined",iC={name:R1,hash:tS,modulusLength:k1,publicExponent:N1};function nS(n){if(!window)throw Q(Ar);if(!window.crypto)throw Q(hs);if(!n&&!window.crypto.subtle)throw Q(hs,x1)}function sC(n,e,t){return T(this,null,function*(){e?.addQueueMeasurement(C.Sha256Digest,t);let o=new TextEncoder().encode(n);return window.crypto.subtle.digest(tS,o)})}function rS(n){return window.crypto.getRandomValues(n)}function oC(){return window.crypto.getRandomValues(eS),eS[0]}function $t(){let n=Date.now(),e=oC()*1024+(oC()&1023),t=new Uint8Array(16),r=Math.trunc(e/2**30),o=e&2**30-1,i=oC();t[0]=n/2**40,t[1]=n/2**32,t[2]=n/2**24,t[3]=n/2**16,t[4]=n/2**8,t[5]=n,t[6]=112|r>>>8,t[7]=r,t[8]=128|o>>>24,t[9]=o>>>16,t[10]=o>>>8,t[11]=o,t[12]=i>>>24,t[13]=i>>>16,t[14]=i>>>8,t[15]=i;let s="";for(let a=0;a<t.length;a++)s+=XT.charAt(t[a]>>>4),s+=XT.charAt(t[a]&15),(a===3||a===5||a===7||a===9)&&(s+="-");return s}function oS(n,e){return T(this,null,function*(){return window.crypto.subtle.generateKey(iC,n,e)})}function Af(n){return T(this,null,function*(){return window.crypto.subtle.exportKey(nC,n)})}function iS(n,e,t){return T(this,null,function*(){return window.crypto.subtle.importKey(nC,n,iC,e,t)})}function sS(n,e){return T(this,null,function*(){return window.crypto.subtle.sign(iC,n,e)})}function Df(n){return T(this,null,function*(){let e=yield sC(n),t=new Uint8Array(e);return gs(t)})}var ni="storage_not_supported",Mf="stubbed_public_client_application_called",ec="in_mem_redirect_unavailable";var Rf={[ni]:"Given storage configuration option was not supported.",[Mf]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[ec]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."},O1={storageNotSupportedError:{code:ni,desc:Rf[ni]},stubPcaInstanceCalled:{code:Mf,desc:Rf[Mf]},inMemRedirectUnavailable:{code:ec,desc:Rf[ec]}},tc=class n extends Se{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,n.prototype)}};function nc(n){return new tc(n,Rf[n])}function aC(n){n.location.hash="",typeof n.history.replaceState=="function"&&n.history.replaceState(null,"",`${n.location.origin}${n.location.pathname}${n.location.search}`)}function cC(n){let e=n.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function uu(){return window.parent!==window}function aS(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${vt.POPUP_NAME_PREFIX}.`)===0}function on(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function lC(){let e=new _e(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function cS(){if(_e.hashContainsKnownProperties(window.location.hash)&&uu())throw Q(Fa)}function lS(n){if(uu()&&!n)throw Q(Pa)}function uS(){if(aS())throw Q(La)}function kf(){if(typeof window>"u")throw Q(Ar)}function Nf(n){if(!n)throw Q(Qa)}function du(n){kf(),cS(),uS(),Nf(n)}function xf(n,e){if(du(n),lS(e.system.allowRedirectInIframe),e.cache.cacheLocation===lt.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw nc(ec)}function hu(n){let e=document.createElement("link");e.rel="preconnect",e.href=new URL(n).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function uC(){return $t()}var fu=class n{navigateInternal(e,t){return n.defaultNavigateWindow(e,t)}navigateExternal(e,t){return n.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise(r=>{setTimeout(()=>{r(!0)},t.timeout)})}};var Pf=class{sendGetRequestAsync(e,t){return T(this,null,function*(){let r,o={},i=0,s=dS(t);try{r=yield fetch(e,{method:eC.GET,headers:s})}catch{throw Q(window.navigator.onLine?ja:fo)}o=hS(r.headers);try{return i=r.status,{headers:o,body:yield r.json(),status:i}}catch{throw hf(Q(fs),i,o)}})}sendPostRequestAsync(e,t){return T(this,null,function*(){let r=t&&t.body||"",o=dS(t),i,s=0,a={};try{i=yield fetch(e,{method:eC.POST,headers:o,body:r})}catch{throw Q(window.navigator.onLine?Ha:fo)}a=hS(i.headers);try{return s=i.status,{headers:a,body:yield i.json(),status:s}}catch{throw hf(Q(fs),s,a)}})}};function dS(n){try{let e=new Headers;if(!(n&&n.headers))return e;let t=n.headers;return Object.entries(t).forEach(([r,o])=>{e.append(r,o)}),e}catch{throw Q(bf)}}function hS(n){try{let e={};return n.forEach((t,r)=>{e[r]=t}),e}catch{throw Q(Tf)}}var P1=6e4,Ff=1e4,F1=3e4,L1=2e3;function fS({auth:n,cache:e,system:t,telemetry:r},o){let i={clientId:R.EMPTY_STRING,authority:`${R.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:R.EMPTY_STRING,authorityMetadata:R.EMPTY_STRING,redirectUri:typeof window<"u"?on():"",postLogoutRedirectUri:R.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:Bt.AAD,OIDCOptions:{serverResponseType:tr.FRAGMENT,defaultScopes:[R.OPENID_SCOPE,R.PROFILE_SCOPE,R.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:zo.None,tenant:R.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1},s={cacheLocation:lt.SessionStorage,temporaryCacheLocation:lt.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===lt.LocalStorage),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:Ke.Info,piiLoggingEnabled:!1},c=J(D({},nf),{loggerOptions:a,networkClient:o?new Pf:Zy,navigationClient:new fu,loadFrameTimeout:0,windowHashTimeout:t?.loadFrameTimeout||P1,iframeHashTimeout:t?.loadFrameTimeout||Ff,navigateFrameWait:0,redirectNavigationTimeout:F1,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:t?.nativeBrokerHandshakeTimeout||L1,pollIntervalMilliseconds:vt.DEFAULT_POLL_INTERVAL_MS}),l=J(D(D({},c),t),{loggerOptions:t?.loggerOptions||a}),u={application:{appName:R.EMPTY_STRING,appVersion:R.EMPTY_STRING},client:new Sa};if(n?.protocolMode!==Bt.OIDC&&n?.OIDCOptions&&new dn(l.loggerOptions).warning(JSON.stringify(xe(or.cannotSetOIDCOptions))),n?.protocolMode&&n.protocolMode!==Bt.AAD&&l?.allowNativeBroker)throw xe(or.cannotAllowNativeBroker);return{auth:J(D(D({},i),n),{OIDCOptions:D(D({},i.OIDCOptions),n?.OIDCOptions)}),cache:D(D({},s),e),system:l,telemetry:D(D({},u),r)}}var pS="@azure/msal-browser",ri="3.28.1";var Lf=class n{static loggerCallback(e,t){switch(e){case Ke.Error:console.error(t);return;case Ke.Info:console.info(t);return;case Ke.Verbose:console.debug(t);return;case Ke.Warning:console.warn(t);return;default:console.log(t);return}}constructor(e){this.browserEnvironment=typeof window<"u",this.config=fS(e,this.browserEnvironment);let t;try{t=window[lt.SessionStorage]}catch{}let r=t?.getItem(QT),o=t?.getItem(ZT)?.toLowerCase(),i=o==="true"?!0:o==="false"?!1:void 0,s=D({},this.config.system.loggerOptions),a=r&&Object.keys(Ke).includes(r)?Ke[r]:void 0;a&&(s.loggerCallback=n.loggerCallback,s.logLevel=a),i!==void 0&&(s.piiLoggingEnabled=i),this.logger=new dn(s,pS,ri),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}};var Uf=(()=>{class n extends Lf{getModuleName(){return n.MODULE_NAME}getId(){return n.ID}initialize(){return T(this,null,function*(){return this.available=typeof window<"u",this.available})}}return n.MODULE_NAME="",n.ID="StandardOperatingContext",n})();function fn(n){return new TextDecoder().decode(U1(n))}function U1(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw Q(Ja)}let t=atob(e);return Uint8Array.from(t,r=>r.codePointAt(0)||0)}var Bf=class{constructor(){this.dbName=Sf,this.version=KT,this.tableName=WT,this.dbOpen=!1}open(){return T(this,null,function*(){return new Promise((e,t)=>{let r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",o=>{o.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",o=>{let i=o;this.db=i.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>t(Q(ei)))})})}closeConnection(){let e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}validateDbIsOpen(){return T(this,null,function*(){if(!this.dbOpen)return this.open()})}getItem(e){return T(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(Q(Dr));let s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);s.addEventListener("success",a=>{let c=a;this.closeConnection(),t(c.target.result)}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})})}setItem(e,t){return T(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((r,o)=>{if(!this.db)return o(Q(Dr));let a=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);a.addEventListener("success",()=>{this.closeConnection(),r()}),a.addEventListener("error",c=>{this.closeConnection(),o(c)})})})}removeItem(e){return T(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(Q(Dr));let s=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);s.addEventListener("success",()=>{this.closeConnection(),t()}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})})}getKeys(){return T(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((e,t)=>{if(!this.db)return t(Q(Dr));let i=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();i.addEventListener("success",s=>{let a=s;this.closeConnection(),e(a.target.result)}),i.addEventListener("error",s=>{this.closeConnection(),t(s)})})})}containsKey(e){return T(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(Q(Dr));let s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);s.addEventListener("success",a=>{let c=a;this.closeConnection(),t(c.target.result===1)}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})})}deleteDatabase(){return T(this,null,function*(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,t)=>{let r=window.indexedDB.deleteDatabase(Sf),o=setTimeout(()=>t(!1),200);r.addEventListener("success",()=>(clearTimeout(o),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(o),e(!0))),r.addEventListener("error",()=>(clearTimeout(o),t(!1)))})})}};var ms=class{constructor(){this.cache=new Map}getItem(e){return this.cache.get(e)||null}setItem(e,t){this.cache.set(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){let e=[];return this.cache.forEach((t,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}};var Vf=class{constructor(e){this.inMemoryCache=new ms,this.indexedDBCache=new Bf,this.logger=e}handleDatabaseAccessError(e){if(e instanceof ps&&e.errorCode===ei)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}getItem(e){return T(this,null,function*(){let t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),yield this.indexedDBCache.getItem(e)}catch(r){this.handleDatabaseAccessError(r)}return t})}setItem(e,t){return T(this,null,function*(){this.inMemoryCache.setItem(e,t);try{yield this.indexedDBCache.setItem(e,t)}catch(r){this.handleDatabaseAccessError(r)}})}removeItem(e){return T(this,null,function*(){this.inMemoryCache.removeItem(e);try{yield this.indexedDBCache.removeItem(e)}catch(t){this.handleDatabaseAccessError(t)}})}getKeys(){return T(this,null,function*(){let e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),yield this.indexedDBCache.getKeys()}catch(t){this.handleDatabaseAccessError(t)}return e})}containsKey(e){return T(this,null,function*(){let t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),yield this.indexedDBCache.containsKey(e)}catch(r){this.handleDatabaseAccessError(r)}return t})}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}clearPersistent(){return T(this,null,function*(){try{this.logger.verbose("Deleting persistent keystore");let e=yield this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}})}};var mS=(()=>{class n{constructor(t,r,o){this.logger=t,nS(o??!1),this.cache=new Vf(this.logger),this.performanceClient=r}createNewGuid(){return $t()}base64Encode(t){return lu(t)}base64Decode(t){return fn(t)}base64UrlEncode(t){return cu(t)}encodeKid(t){return this.base64UrlEncode(JSON.stringify({kid:t}))}getPublicKeyThumbprint(t){return T(this,null,function*(){let r=this.performanceClient?.startMeasurement(C.CryptoOptsGetPublicKeyThumbprint,t.correlationId),o=yield oS(n.EXTRACTABLE,n.POP_KEY_USAGES),i=yield Af(o.publicKey),s={e:i.e,kty:i.kty,n:i.n},a=gS(s),c=yield this.hashString(a),l=yield Af(o.privateKey),u=yield iS(l,!1,["sign"]);return yield this.cache.setItem(c,{privateKey:u,publicKey:o.publicKey,requestMethod:t.resourceRequestMethod,requestUri:t.resourceRequestUri}),r&&r.end({success:!0}),c})}removeTokenBindingKey(t){return T(this,null,function*(){return yield this.cache.removeItem(t),!(yield this.cache.containsKey(t))})}clearKeystore(){return T(this,null,function*(){this.cache.clearInMemory();try{return yield this.cache.clearPersistent(),!0}catch(t){return t instanceof Error?this.logger.error(`Clearing keystore failed with error: ${t.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}})}signJwt(t,r,o,i){return T(this,null,function*(){let s=this.performanceClient?.startMeasurement(C.CryptoOptsSignJwt,i),a=yield this.cache.getItem(r);if(!a)throw Q(Xo);let c=yield Af(a.publicKey),l=gS(c),u=cu(JSON.stringify({kid:r})),d=su.getShrHeaderString(J(D({},o?.header),{alg:c.alg,kid:u})),p=cu(d);t.cnf={jwk:JSON.parse(l)};let h=cu(JSON.stringify(t)),m=`${p}.${h}`,y=new TextEncoder().encode(m),w=yield sS(a.privateKey,y),S=gs(new Uint8Array(w)),b=`${m}.${S}`;return s&&s.end({success:!0}),b})}hashString(t){return T(this,null,function*(){return Df(t)})}}return n.POP_KEY_USAGES=["sign","verify"],n.EXTRACTABLE=!0,n})();function gS(n){return JSON.stringify(n,Object.keys(n).sort())}var Hf=class{constructor(){if(!window.localStorage)throw nc(ni)}getItem(e){return window.localStorage.getItem(e)}setItem(e,t){window.localStorage.setItem(e,t)}removeItem(e){window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}};var jf=class{constructor(){if(!window.sessionStorage)throw nc(ni)}getItem(e){return window.sessionStorage.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}};function zf(n,e){if(!e)return null;try{return Nt.parseRequestState(n,e).libraryState.meta}catch{throw L(Rt.invalidState)}}var $f=class{getItem(e){let t=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let o=0;o<r.length;o++){let i=r[o],[s,...a]=decodeURIComponent(i).trim().split("="),c=a.join("=");if(s===t)return c}return""}setItem(e,t,r,o=!0){let i=`${encodeURIComponent(e)}=${encodeURIComponent(t)};path=/;SameSite=Lax;`;if(r){let s=B1(r);i+=`expires=${s};`}o&&(i+="Secure;"),document.cookie=i}removeItem(e){this.setItem(e,"",-1)}getKeys(){let e=document.cookie.split(";"),t=[];return e.forEach(r=>{let o=decodeURIComponent(r).trim().split("=");t.push(o[0])}),t}containsKey(e){return this.getKeys().includes(e)}};function B1(n){let e=new Date;return new Date(e.getTime()+n*864e5).toUTCString()}var rc=class n extends co{constructor(e,t,r,o,i,s){super(e,r,o,i),this.cacheConfig=t,this.logger=o,this.internalStorage=new ms,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupBrowserStorage(this.cacheConfig.temporaryCacheLocation),this.cookieStorage=new $f,t.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps()),this.performanceClient=s}setupBrowserStorage(e){try{switch(e){case lt.LocalStorage:return new Hf;case lt.SessionStorage:return new jf;case lt.MemoryStorage:default:break}}catch(t){this.logger.error(t)}return this.cacheConfig.cacheLocation=lt.MemoryStorage,new ms}migrateCacheEntries(){let e=`${R.CACHE_PREFIX}.${mt.ID_TOKEN}`,t=`${R.CACHE_PREFIX}.${mt.CLIENT_INFO}`,r=`${R.CACHE_PREFIX}.${mt.ERROR}`,o=`${R.CACHE_PREFIX}.${mt.ERROR_DESC}`,i=this.browserStorage.getItem(e),s=this.browserStorage.getItem(t),a=this.browserStorage.getItem(r),c=this.browserStorage.getItem(o),l=[i,s,a,c];[mt.ID_TOKEN,mt.CLIENT_INFO,mt.ERROR,mt.ERROR_DESC].forEach((d,p)=>{let h=l[p];h&&this.setTemporaryCache(d,h,!0)})}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");let e=this.getItem(mo.ACCOUNT_KEYS),t=this.getItem(`${mo.TOKEN_KEYS}.${this.clientId}`);if(e&&t){this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration.");return}this.browserStorage.getKeys().forEach(o=>{if(this.isCredentialKey(o)){let i=this.getItem(o);if(i){let s=this.validateAndParseJson(i);if(s&&s.hasOwnProperty("credentialType"))switch(s.credentialType){case de.ID_TOKEN:if(Qe.isIdTokenEntity(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - idToken with key: ${o} found, saving key to token key map`);let a=s,c=this.updateCredentialCacheKey(o,a);this.addTokenKey(c,de.ID_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed idToken validation on key: ${o}`);break;case de.ACCESS_TOKEN:case de.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(Qe.isAccessTokenEntity(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - accessToken with key: ${o} found, saving key to token key map`);let a=s,c=this.updateCredentialCacheKey(o,a);this.addTokenKey(c,de.ACCESS_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ${o}`);break;case de.REFRESH_TOKEN:if(Qe.isRefreshTokenEntity(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - refreshToken with key: ${o} found, saving key to token key map`);let a=s,c=this.updateCredentialCacheKey(o,a);this.addTokenKey(c,de.REFRESH_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ${o}`);break}}}if(this.isAccountKey(o)){let i=this.getItem(o);if(i){let s=this.validateAndParseJson(i);s&&Xe.isAccountEntity(s)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - account with key: ${o} found, saving key to account key map`),this.addAccountKeyToMap(o))}}})}validateAndParseJson(e){try{let t=JSON.parse(e);return t&&typeof t=="object"?t:null}catch{return null}}getItem(e){return this.browserStorage.getItem(e)}setItem(e,t){this.browserStorage.setItem(e,t)}getAccount(e,t){this.logger.trace("BrowserCacheManager.getAccount called");let r=this.getCachedAccountEntity(e);return this.updateOutdatedCachedAccount(e,r,t)}getCachedAccountEntity(e){let t=this.getItem(e);if(!t)return this.removeAccountKeyFromMap(e),null;let r=this.validateAndParseJson(t);return!r||!Xe.isAccountEntity(r)?(this.removeAccountKeyFromMap(e),null):co.toObject(new Xe,r)}setAccount(e){this.logger.trace("BrowserCacheManager.setAccount called");let t=e.generateAccountKey();this.setItem(t,JSON.stringify(e)),this.addAccountKeyToMap(t)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");let e=this.getItem(mo.ACCOUNT_KEYS);return e?JSON.parse(e):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);let t=this.getAccountKeys();t.indexOf(e)===-1?(t.push(e),this.setItem(mo.ACCOUNT_KEYS,JSON.stringify(t)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);let t=this.getAccountKeys(),r=t.indexOf(e);r>-1?(t.splice(r,1),this.setItem(mo.ACCOUNT_KEYS,JSON.stringify(t)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e){return T(this,null,function*(){vc(n.prototype,this,"removeAccount").call(this,e),this.removeAccountKeyFromMap(e)})}removeOutdatedAccount(e){this.removeItem(e),this.removeAccountKeyFromMap(e)}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,de.ID_TOKEN)}removeAccessToken(e){return T(this,null,function*(){vc(n.prototype,this,"removeAccessToken").call(this,e),this.removeTokenKey(e,de.ACCESS_TOKEN)})}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,de.REFRESH_TOKEN)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");let e=this.getItem(`${mo.TOKEN_KEYS}.${this.clientId}`);if(e){let t=this.validateAndParseJson(e);if(t&&t.hasOwnProperty("idToken")&&t.hasOwnProperty("accessToken")&&t.hasOwnProperty("refreshToken"))return t;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}addTokenKey(e,t){this.logger.trace("BrowserCacheManager addTokenKey called");let r=this.getTokenKeys();switch(t){case de.ID_TOKEN:r.idToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),r.idToken.push(e));break;case de.ACCESS_TOKEN:r.accessToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),r.accessToken.push(e));break;case de.REFRESH_TOKEN:r.refreshToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),r.refreshToken.push(e));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${t}`),L(Rt.unexpectedCredentialType)}this.setItem(`${mo.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(r))}removeTokenKey(e,t){this.logger.trace("BrowserCacheManager removeTokenKey called");let r=this.getTokenKeys();switch(t){case de.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${e} from map`);let o=r.idToken.indexOf(e);o>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),r.idToken.splice(o,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case de.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${e} from map`);let i=r.accessToken.indexOf(e);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),r.accessToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case de.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${e} from map`);let s=r.refreshToken.indexOf(e);s>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),r.refreshToken.splice(s,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${t}`),L(Rt.unexpectedCredentialType)}this.setItem(`${mo.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(r))}getIdTokenCredential(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,de.ID_TOKEN),null;let r=this.validateAndParseJson(t);return!r||!Qe.isIdTokenEntity(r)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,de.ID_TOKEN),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),r)}setIdTokenCredential(e){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");let t=Qe.generateCredentialKey(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,de.ID_TOKEN)}getAccessTokenCredential(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,de.ACCESS_TOKEN),null;let r=this.validateAndParseJson(t);return!r||!Qe.isAccessTokenEntity(r)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,de.ACCESS_TOKEN),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),r)}setAccessTokenCredential(e){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");let t=Qe.generateCredentialKey(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,de.ACCESS_TOKEN)}getRefreshTokenCredential(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,de.REFRESH_TOKEN),null;let r=this.validateAndParseJson(t);return!r||!Qe.isRefreshTokenEntity(r)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,de.REFRESH_TOKEN),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),r)}setRefreshTokenCredential(e){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");let t=Qe.generateCredentialKey(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,de.REFRESH_TOKEN)}getAppMetadata(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;let r=this.validateAndParseJson(t);return!r||!Qe.isAppMetadataEntity(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");let t=Qe.generateAppMetadataKey(e);this.setItem(t,JSON.stringify(e))}getServerTelemetry(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;let r=this.validateAndParseJson(t);return!r||!Qe.isServerTelemetryEntity(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(e,t){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t))}getAuthorityMetadata(e){let t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;let r=this.validateAndParseJson(t);return r&&Qe.isAuthorityMetadataEntity(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(t=>this.isAuthorityMetadata(t))}setWrapperMetadata(e,t){this.internalStorage.setItem(au.WRAPPER_SKU,e),this.internalStorage.setItem(au.WRAPPER_VER,t)}getWrapperMetadata(){let e=this.internalStorage.getItem(au.WRAPPER_SKU)||R.EMPTY_STRING,t=this.internalStorage.getItem(au.WRAPPER_VER)||R.EMPTY_STRING;return[e,t]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(){let e=this.generateCacheKey(mt.ACTIVE_ACCOUNT_FILTERS),t=this.getItem(e);if(!t){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");let o=this.generateCacheKey(mt.ACTIVE_ACCOUNT),i=this.getItem(o);if(!i)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;let s=this.getAccountInfoFilteredBy({localAccountId:i});return s?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(s),s):null}let r=this.validateAndParseJson(t);return r?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:r.homeAccountId,localAccountId:r.localAccountId,tenantId:r.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){let t=this.generateCacheKey(mt.ACTIVE_ACCOUNT_FILTERS),r=this.generateCacheKey(mt.ACTIVE_ACCOUNT);if(e){this.logger.verbose("setActiveAccount: Active account set");let o={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.browserStorage.setItem(t,JSON.stringify(o)),this.browserStorage.setItem(r,e.localAccountId)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(t),this.browserStorage.removeItem(r)}getThrottlingCache(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;let r=this.validateAndParseJson(t);return!r||!Qe.isThrottlingEntity(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(e,t){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t))}getTemporaryCache(e,t){let r=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){let i=this.cookieStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),i}let o=this.temporaryCacheStorage.getItem(r);if(!o){if(this.cacheConfig.cacheLocation===lt.LocalStorage){let i=this.browserStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o}setTemporaryCache(e,t,r){let o=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(o,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(o,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(){return T(this,null,function*(){yield this.removeAllAccounts(),this.removeAppMetadata(),this.temporaryCacheStorage.getKeys().forEach(e=>{(e.indexOf(R.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(e)}),this.browserStorage.getKeys().forEach(e=>{(e.indexOf(R.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(e)}),this.internalStorage.clear()})}clearTokensAndKeysWithClaims(e,t){return T(this,null,function*(){e.addQueueMeasurement(C.ClearTokensAndKeysWithClaims,t);let r=this.getTokenKeys(),o=[];r.accessToken.forEach(i=>{let s=this.getAccessTokenCredential(i);s?.requestedClaimsHash&&i.includes(s.requestedClaimsHash.toLowerCase())&&o.push(this.removeAccessToken(i))}),yield Promise.all(o),o.length>0&&this.logger.warning(`${o.length} access tokens with claims in the cache keys have been removed from the cache.`)})}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):at.startsWith(e,R.CACHE_PREFIX)||at.startsWith(e,mt.ADAL_ID_TOKEN)?e:`${R.CACHE_PREFIX}.${this.clientId}.${e}`}generateAuthorityKey(e){let{libraryState:{id:t}}=Nt.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${He.AUTHORITY}.${t}`)}generateNonceKey(e){let{libraryState:{id:t}}=Nt.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${He.NONCE_IDTOKEN}.${t}`)}generateStateKey(e){let{libraryState:{id:t}}=Nt.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${He.REQUEST_STATE}.${t}`)}getCachedAuthority(e){let t=this.generateStateKey(e),r=this.getTemporaryCache(t);if(!r)return null;let o=this.generateAuthorityKey(r);return this.getTemporaryCache(o)}updateCacheEntries(e,t,r,o,i){this.logger.trace("BrowserCacheManager.updateCacheEntries called");let s=this.generateStateKey(e);this.setTemporaryCache(s,e,!1);let a=this.generateNonceKey(e);this.setTemporaryCache(a,t,!1);let c=this.generateAuthorityKey(e);if(this.setTemporaryCache(c,r,!1),i){let l={credential:i.homeAccountId,type:kt.HOME_ACCOUNT_ID};this.setTemporaryCache(He.CCS_CREDENTIAL,JSON.stringify(l),!0)}else if(o){let l={credential:o,type:kt.UPN};this.setTemporaryCache(He.CCS_CREDENTIAL,JSON.stringify(l),!0)}}resetRequestCache(e){this.logger.trace("BrowserCacheManager.resetRequestCache called"),e&&(this.temporaryCacheStorage.getKeys().forEach(t=>{t.indexOf(e)!==-1&&this.removeTemporaryItem(t)}),this.removeTemporaryItem(this.generateStateKey(e)),this.removeTemporaryItem(this.generateNonceKey(e)),this.removeTemporaryItem(this.generateAuthorityKey(e))),this.removeTemporaryItem(this.generateCacheKey(He.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(He.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(He.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(He.CORRELATION_ID)),this.removeTemporaryItem(this.generateCacheKey(He.CCS_CREDENTIAL)),this.removeTemporaryItem(this.generateCacheKey(He.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cleanRequestByState(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){let t=this.generateStateKey(e),r=this.temporaryCacheStorage.getItem(t);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r||R.EMPTY_STRING)}}cleanRequestByInteractionType(e){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.temporaryCacheStorage.getKeys().forEach(t=>{if(t.indexOf(He.REQUEST_STATE)===-1)return;let r=this.temporaryCacheStorage.getItem(t);if(!r)return;let o=zf(this.cryptoImpl,r);o&&o.interactionType===e&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r))}),this.setInteractionInProgress(!1)}cacheCodeRequest(e){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");let t=lu(JSON.stringify(e));this.setTemporaryCache(He.REQUEST_PARAMS,t,!0)}getCachedRequest(e){this.logger.trace("BrowserCacheManager.getCachedRequest called");let t=this.getTemporaryCache(He.REQUEST_PARAMS,!0);if(!t)throw Q(Ba);let r;try{r=JSON.parse(fn(t))}catch(o){throw this.logger.errorPii(`Attempted to parse: ${t}`),this.logger.error(`Parsing cached token request threw with error: ${o}`),Q(Va)}if(this.removeTemporaryItem(this.generateCacheKey(He.REQUEST_PARAMS)),!r.authority){let o=this.generateAuthorityKey(e),i=this.getTemporaryCache(o);if(!i)throw Q(Jo);r.authority=i}return r}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");let e=this.getTemporaryCache(He.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;let t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){let t=this.getInteractionInProgress();return e?t===this.clientId:!!t}getInteractionInProgress(){let e=`${R.CACHE_PREFIX}.${He.INTERACTION_STATUS_KEY}`;return this.getTemporaryCache(e,!1)}setInteractionInProgress(e){let t=`${R.CACHE_PREFIX}.${He.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw Q(ka);this.setTemporaryCache(t,this.clientId,!1)}else!e&&this.getInteractionInProgress()===this.clientId&&this.removeTemporaryItem(t)}getLegacyLoginHint(){let e=this.getTemporaryCache(mt.ADAL_ID_TOKEN);e&&(this.browserStorage.removeItem(mt.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));let t=this.getTemporaryCache(mt.ID_TOKEN,!0);t&&(this.browserStorage.removeItem(this.generateCacheKey(mt.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));let r=t||e;if(r){let o=$o.extractTokenClaims(r,fn);if(o.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),o.preferred_username;if(o.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),o.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(e,t){let r=Qe.generateCredentialKey(t);if(e!==r){let o=this.getItem(e);if(o)return this.browserStorage.removeItem(e),this.setItem(r,o),this.logger.verbose(`Updated an outdated ${t.credentialType} cache key`),r;this.logger.error(`Attempted to update an outdated ${t.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}hydrateCache(e,t){return T(this,null,function*(){let r=Qe.createIdTokenEntity(e.account?.homeAccountId,e.account?.environment,e.idToken,this.clientId,e.tenantId),o;t.claims&&(o=yield this.cryptoImpl.hashString(t.claims));let i=Qe.createAccessTokenEntity(e.account?.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?e.expiresOn.getTime()/1e3:0,e.extExpiresOn?e.extExpiresOn.getTime()/1e3:0,fn,void 0,e.tokenType,void 0,t.sshKid,t.claims,o),s={idToken:r,accessToken:i};return this.saveCacheRecord(s)})}saveCacheRecord(e,t,r){return T(this,null,function*(){try{yield vc(n.prototype,this,"saveCacheRecord").call(this,e,t,r)}catch(o){if(o instanceof ao&&this.performanceClient&&r)try{let i=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:i.refreshToken.length,cacheIdCount:i.idToken.length,cacheAtCount:i.accessToken.length},r)}catch{}throw o}})}},vS=(n,e)=>{let t={cacheLocation:lt.MemoryStorage,temporaryCacheLocation:lt.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new rc(n,t,jo,e)};function yS(n,e,t,r){return n.verbose("getAllAccounts called"),t?e.getAllAccounts(r):[]}function CS(n,e,t){if(e.trace("getAccount called"),Object.keys(n).length===0)return e.warning("getAccount: No accountFilter provided"),null;let r=t.getAccountInfoFilteredBy(n);return r?(e.verbose("getAccount: Account matching provided filter found, returning"),r):(e.verbose("getAccount: No matching account found, returning null"),null)}function ES(n,e,t){if(e.trace("getAccountByUsername called"),!n)return e.warning("getAccountByUsername: No username provided"),null;let r=t.getAccountInfoFilteredBy({username:n});return r?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${n}`),r):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function wS(n,e,t){if(e.trace("getAccountByHomeId called"),!n)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;let r=t.getAccountInfoFilteredBy({homeAccountId:n});return r?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${n}`),r):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function _S(n,e,t){if(e.trace("getAccountByLocalId called"),!n)return e.warning("getAccountByLocalId: No localAccountId provided"),null;let r=t.getAccountInfoFilteredBy({localAccountId:n});return r?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${n}`),r):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function IS(n,e){e.setActiveAccount(n)}function bS(n){return n.getActiveAccount()}var se={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache"};var Gf=class{constructor(e){this.eventCallbacks=new Map,this.logger=e||new dn({})}addEventCallback(e,t,r){if(typeof window<"u"){let o=r||uC();return this.eventCallbacks.has(o)?(this.logger.error(`Event callback with id: ${o} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(o,[e,t||[]]),this.logger.verbose(`Event callback registered with id: ${o}`),o)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,t,r,o){if(typeof window<"u"){let i={eventType:e,interactionType:t||null,payload:r||null,error:o||null,timestamp:Date.now()};this.eventCallbacks.forEach(([s,a],c)=>{(a.length===0||a.includes(e))&&(this.logger.verbose(`Emitting event to callback ${c}: ${e}`),s.apply(null,[i]))})}}};var oc=class{constructor(e,t,r,o,i,s,a,c,l){this.config=e,this.browserStorage=t,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=s,this.nativeMessageHandler=c,this.correlationId=l||$t(),this.logger=o.clone(vt.MSAL_SKU,ri,this.correlationId),this.performanceClient=a}clearCacheOnLogout(e){return T(this,null,function*(){if(e){Xe.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{yield this.browserStorage.removeAccount(Xe.generateAccountCacheKey(e)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),yield this.browserStorage.clear(),yield this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}})}getRedirectUri(e){this.logger.verbose("getRedirectUri called");let t=e||this.config.auth.redirectUri;return _e.getAbsoluteUrl(t,on())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");let r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new us(r,this.browserStorage)}getDiscoveredAuthority(e){return T(this,null,function*(){let{account:t}=e,r=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(C.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);let o={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},i=e.requestAuthority||this.config.auth.authority,s=r?.length?r==="true":this.config.auth.instanceAware,a=t&&s?this.config.auth.authority.replace(_e.getDomainFromUrl(i),t.environment):i,c=Un.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),l=yield j(df.createDiscoveredInstance,C.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(c,this.config.system.networkClient,this.browserStorage,o,this.logger,this.correlationId,this.performanceClient);if(t&&!l.isAlias(t.environment))throw xe(or.authorityMismatch);return l})}};var V1=32;function TS(n,e,t){return T(this,null,function*(){n.addQueueMeasurement(C.GeneratePkceCodes,t);let r=tn(H1,C.GenerateCodeVerifier,e,n,t)(n,e,t),o=yield j(j1,C.GenerateCodeChallengeFromVerifier,e,n,t)(r,n,e,t);return{verifier:r,challenge:o}})}function H1(n,e,t){try{let r=new Uint8Array(V1);return tn(rS,C.GetRandomValues,e,n,t)(r),gs(r)}catch{throw Q(ds)}}function j1(n,e,t,r){return T(this,null,function*(){e.addQueueMeasurement(C.GenerateCodeChallengeFromVerifier,r);try{let o=yield j(sC,C.Sha256Digest,t,e,r)(n,e,r);return gs(new Uint8Array(o))}catch{throw Q(ds)}})}function pu(n,e,t,r){return T(this,null,function*(){t.addQueueMeasurement(C.InitializeBaseRequest,n.correlationId);let o=n.authority||e.auth.authority,i=[...n&&n.scopes||[]],s=J(D({},n),{correlationId:n.correlationId,authority:o,scopes:i});if(!s.authenticationScheme)s.authenticationScheme=Re.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(s.authenticationScheme===Re.SSH){if(!n.sshJwk)throw xe(or.missingSshJwk);if(!n.sshKid)throw xe(or.missingSshKid)}r.verbose(`Authentication Scheme set to "${s.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&n.claims&&!at.isEmptyObj(n.claims)&&(s.requestedClaimsHash=yield Df(n.claims)),s})}function SS(n,e,t,r,o){return T(this,null,function*(){r.addQueueMeasurement(C.InitializeSilentRequest,n.correlationId);let i=yield j(pu,C.InitializeBaseRequest,o,r,n.correlationId)(n,t,r,o);return J(D(D({},n),i),{account:e,forceRefresh:n.forceRefresh||!1})})}var pn=class extends oc{initializeAuthorizationCodeRequest(e){return T(this,null,function*(){this.performanceClient.addQueueMeasurement(C.StandardInteractionClientInitializeAuthorizationCodeRequest,this.correlationId);let t=yield j(TS,C.GeneratePkceCodes,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId),r=J(D({},e),{redirectUri:e.redirectUri,code:R.EMPTY_STRING,codeVerifier:t.verifier});return e.codeChallenge=t.challenge,e.codeChallengeMethod=R.S256_CODE_CHALLENGE_METHOD,r})}initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e?.correlationId);let t=D({correlationId:this.correlationId||$t()},e);if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){let r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=_e.getAbsoluteUrl(e.postLogoutRedirectUri,on())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=_e.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,on())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=_e.getAbsoluteUrl(on(),on())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId),t}getLogoutHintFromIdTokenClaims(e){let t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}createAuthCodeClient(e){return T(this,null,function*(){this.performanceClient.addQueueMeasurement(C.StandardInteractionClientCreateAuthCodeClient,this.correlationId);let t=yield j(this.getClientConfiguration.bind(this),C.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new ls(t,this.performanceClient)})}getClientConfiguration(e){return T(this,null,function*(){let{serverTelemetryManager:t,requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:i,account:s}=e;this.performanceClient.addQueueMeasurement(C.StandardInteractionClientGetClientConfiguration,this.correlationId);let a=yield j(this.getDiscoveredAuthority.bind(this),C.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:i,account:s}),c=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:c.loggerCallback,piiLoggingEnabled:c.piiLoggingEnabled,logLevel:c.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:vt.MSAL_SKU,version:ri,cpu:R.EMPTY_STRING,os:R.EMPTY_STRING},telemetry:this.config.telemetry}})}initializeAuthorizationRequest(e,t){return T(this,null,function*(){this.performanceClient.addQueueMeasurement(C.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);let r=this.getRedirectUri(e.redirectUri),o={interactionType:t},i=Nt.setRequestState(this.browserCrypto,e&&e.state||R.EMPTY_STRING,o),s=yield j(pu,C.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)(J(D({},e),{correlationId:this.correlationId}),this.config,this.performanceClient,this.logger),a=J(D({},s),{redirectUri:r,state:i,nonce:e.nonce||$t(),responseMode:this.config.auth.OIDCOptions.serverResponseType});if(e.loginHint||e.sid)return a;let c=e.account||this.browserStorage.getActiveAccount();if(c&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${c.homeAccountId}`,this.correlationId),a.account=c),!a.loginHint&&!c){let l=this.browserStorage.getLegacyLoginHint();l&&(a.loginHint=l)}return a})}};var AS="ContentError",qf="user_switch";var DS="USER_INTERACTION_REQUIRED",MS="USER_CANCEL",RS="NO_NETWORK",kS="PERSISTENT_ERROR",NS="DISABLED",xS="ACCOUNT_UNAVAILABLE";var z1=-2147186943,$1={[qf]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."},Vn=class n extends Se{constructor(e,t,r){super(e,t),Object.setPrototypeOf(this,n.prototype),this.name="NativeAuthError",this.ext=r}};function oi(n){if(n.ext&&n.ext.status&&(n.ext.status===kS||n.ext.status===NS)||n.ext&&n.ext.error&&n.ext.error===z1)return!0;switch(n.errorCode){case AS:return!0;default:return!1}}function gu(n,e,t){if(t&&t.status)switch(t.status){case xS:return ba(ho.nativeAccountUnavailable);case DS:return new Vt(n,e);case MS:return Q(hn);case RS:return Q(fo)}return new Vn(n,$1[n]||e,t)}var ic=class extends pn{acquireToken(e){return T(this,null,function*(){this.performanceClient.addQueueMeasurement(C.SilentCacheClientAcquireToken,e.correlationId);let t=this.initializeServerTelemetryManager($e.acquireTokenSilent_silentFlow),r=yield j(this.getClientConfiguration.bind(this),C.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),o=new iu(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{let s=(yield j(o.acquireCachedToken.bind(o),C.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),s}catch(i){throw i instanceof ps&&i.errorCode===Xo&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),i}})}logout(e){this.logger.verbose("logoutRedirect called");let t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t?.account)}};var Hn=class extends oc{constructor(e,t,r,o,i,s,a,c,l,u,d,p){super(e,t,r,o,i,s,c,l,p),this.apiId=a,this.accountId=u,this.nativeMessageHandler=l,this.nativeStorageManager=d,this.silentCacheClient=new ic(e,this.nativeStorageManager,r,o,i,s,c,l,p),this.serverTelemetryManager=this.initializeServerTelemetryManager(this.apiId);let h=this.nativeMessageHandler.getExtensionId()===ti.PREFERRED_EXTENSION_ID?"chrome":this.nativeMessageHandler.getExtensionId()?.length?"unknown":void 0;this.skus=us.makeExtraSkuString({libraryName:vt.MSAL_SKU,libraryVersion:ri,extensionName:h,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters=J(D({},e.extraParameters),{[uo.X_CLIENT_EXTRA_SKU]:this.skus})}acquireToken(e){return T(this,null,function*(){this.performanceClient.addQueueMeasurement(C.NativeInteractionClientAcquireToken,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");let t=this.performanceClient.startMeasurement(C.NativeInteractionClientAcquireToken,e.correlationId),r=jl.nowSeconds();try{let o=yield this.initializeNativeRequest(e);try{let l=yield this.acquireTokensFromCache(this.accountId,o);return t.end({success:!0,isNativeBroker:!1,fromCache:!0}),l}catch{this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}let i=ar(o,[]),s={method:go.GetToken,request:i},a=yield this.nativeMessageHandler.sendMessage(s),c=this.validateNativeResponse(a);return yield this.handleNativeResponse(c,o,r).then(l=>(t.end({success:!0,isNativeBroker:!0,requestId:l.requestId}),this.serverTelemetryManager.clearNativeBrokerErrorCode(),l)).catch(l=>{throw t.end({success:!1,errorCode:l.errorCode,subErrorCode:l.subError,isNativeBroker:!0}),l})}catch(o){throw o instanceof Vn&&this.serverTelemetryManager.setNativeBrokerErrorCode(o.errorCode),o}})}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:tt.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}acquireTokensFromCache(e,t){return T(this,null,function*(){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),L(Rt.noAccountFound);let r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!r)throw L(Rt.noAccountFound);try{let o=this.createSilentCacheRequest(t,r),i=yield this.silentCacheClient.acquireToken(o),s=J(D({},r),{idTokenClaims:i?.idTokenClaims,idToken:i?.idToken});return J(D({},i),{account:s})}catch(o){throw o}})}acquireTokenRedirect(e,t){return T(this,null,function*(){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");let r=ar(e,[]);delete r.onRedirectNavigate;let o=yield this.initializeNativeRequest(r),i={method:go.GetToken,request:o};try{let c=yield this.nativeMessageHandler.sendMessage(i);this.validateNativeResponse(c)}catch(c){if(c instanceof Vn&&(this.serverTelemetryManager.setNativeBrokerErrorCode(c.errorCode),oi(c)))throw c}this.browserStorage.setTemporaryCache(He.NATIVE_REQUEST,JSON.stringify(o),!0);let s={apiId:$e.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),yield this.navigationClient.navigateExternal(a,s)})}handleRedirectPromise(e,t){return T(this,null,function*(){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;let r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&e?.addFields({errorCode:"no_cached_request"},t),null;let c=r,{prompt:o}=c,i=ar(c,["prompt"]);o&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(He.NATIVE_REQUEST));let s={method:go.GetToken,request:i},a=jl.nowSeconds();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");let l=yield this.nativeMessageHandler.sendMessage(s);this.validateNativeResponse(l);let u=this.handleNativeResponse(l,i,a);this.browserStorage.setInteractionInProgress(!1);let d=yield u;return this.serverTelemetryManager.clearNativeBrokerErrorCode(),d}catch(l){throw this.browserStorage.setInteractionInProgress(!1),l}})}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}handleNativeResponse(e,t,r){return T(this,null,function*(){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");let o=$o.extractTokenClaims(e.id_token,fn),i=this.createHomeAccountIdentifier(e,o),s=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId})?.homeAccountId;if(i!==s&&e.account.id!==t.accountId)throw gu(qf);let a=yield this.getDiscoveredAuthority({requestAuthority:t.authority}),c=Ta(this.browserStorage,a,i,fn,o,e.client_info,void 0,o.tid,void 0,e.account.id,this.logger),l=yield this.generateAuthenticationResult(e,t,o,c,a.canonicalAuthority,r);return this.cacheAccount(c),this.cacheNativeTokens(e,t,i,o,e.access_token,l.tenantId,r),l})}createHomeAccountIdentifier(e,t){return Xe.generateHomeAccountId(e.client_info||R.EMPTY_STRING,en.Default,this.logger,this.browserCrypto,t)}generateScopes(e,t){return e.scope?tt.fromString(e.scope):tt.fromString(t.scope)}generatePopAccessToken(e,t){return T(this,null,function*(){if(t.tokenType===Re.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;let r=new Tn(this.browserCrypto),o={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw L(Rt.keyIdMissing);return r.signPopToken(e.access_token,t.keyId,o)}else return e.access_token})}generateAuthenticationResult(e,t,r,o,i,s){return T(this,null,function*(){let a=this.addTelemetryFromNativeResponse(e),c=e.scope?tt.fromString(e.scope):tt.fromString(t.scope),l=e.account.properties||{},u=l.UID||r.oid||r.sub||R.EMPTY_STRING,d=l.TenantId||r.tid||R.EMPTY_STRING,p=cs(o.getAccountInfo(),void 0,r,e.id_token);p.nativeAccountId!==e.account.id&&(p.nativeAccountId=e.account.id);let h=yield this.generatePopAccessToken(e,t),m=t.tokenType===Re.POP?Re.POP:Re.BEARER;return{authority:i,uniqueId:u,tenantId:d,scopes:c.asArray(),account:p,idToken:e.id_token,idTokenClaims:r,accessToken:h,fromCache:a?this.isResponseFromCache(a):!1,expiresOn:new Date(Number(s+e.expires_in)*1e3),tokenType:m,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}})}cacheAccount(e){this.browserStorage.setAccount(e),this.browserStorage.removeAccountContext(e).catch(t=>{this.logger.error(`Error occurred while removing account context from browser storage. ${t}`)})}cacheNativeTokens(e,t,r,o,i,s,a){let c=Qe.createIdTokenEntity(r,t.authority,e.id_token||"",t.clientId,o.tid||""),l=t.tokenType===Re.POP?R.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,u=a+l,d=this.generateScopes(e,t),p=Qe.createAccessTokenEntity(r,t.authority,i,t.clientId,o.tid||s,d.printScopes(),u,0,fn,void 0,t.tokenType,void 0,t.keyId),h={idToken:c,accessToken:p};this.nativeStorageManager.saveCacheRecord(h,t.storeInCache)}addTelemetryFromNativeResponse(e){let t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw Sl(Ni.unexpectedError,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}initializeNativeRequest(e){return T(this,null,function*(){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");let t=e.authority||this.config.auth.authority;e.account&&(yield this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}));let r=new _e(t);r.validateAsUri();let l=e,{scopes:o}=l,i=ar(l,["scopes"]),s=new tt(o||[]);s.appendScopes(In);let a=()=>{switch(this.apiId){case $e.ssoSilent:case $e.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),et.NONE}if(!e.prompt){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e.prompt){case et.NONE:case et.CONSENT:case et.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e.prompt} is not compatible with native flow`),Q(Za)}},c=J(D({},i),{accountId:this.accountId,clientId:this.config.auth.clientId,authority:r.urlString,scope:s.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:a(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:D(D({},e.extraQueryParameters),e.tokenQueryParameters),extendedExpiryToken:!1,keyId:e.popKid});if(c.signPopToken&&e.popKid)throw Q(Xa);if(this.handleExtraBrokerParams(c),c.extraParameters=c.extraParameters||{},c.extraParameters.telemetry=ti.MATS_TELEMETRY,e.authenticationScheme===Re.POP){let u={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},d=new Tn(this.browserCrypto),p;if(c.keyId)p=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:c.keyId})),c.signPopToken=!1;else{let h=yield j(d.generateCnf.bind(d),C.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(u,this.logger);p=h.reqCnfString,c.keyId=h.kid,c.signPopToken=!0}c.reqCnf=p}return this.addRequestSKUs(c),c})}handleExtraBrokerParams(e){let t=e.extraParameters&&e.extraParameters.hasOwnProperty(uo.BROKER_CLIENT_ID)&&e.extraParameters.hasOwnProperty(uo.BROKER_REDIRECT_URI)&&e.extraParameters.hasOwnProperty(uo.CLIENT_ID);if(!e.embeddedClientId&&!t)return;let r="",o=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[uo.BROKER_REDIRECT_URI],r=e.extraParameters[uo.CLIENT_ID]),e.extraParameters={child_client_id:r,child_redirect_uri:o},this.performanceClient?.addFields({embeddedClientId:r,embeddedRedirectUri:o},e.correlationId)}};var Sn=class n{constructor(e,t,r,o){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(C.NativeMessageHandlerHandshake)}sendMessage(e){return T(this,null,function*(){this.logger.trace("NativeMessageHandler - sendMessage called.");let t={channel:ti.CHANNEL_ID,extensionId:this.extensionId,responseId:$t(),body:e};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(t)}`),this.messageChannel.port1.postMessage(t),new Promise((r,o)=>{this.resolvers.set(t.responseId,{resolve:r,reject:o})})})}static createProvider(e,t,r){return T(this,null,function*(){e.trace("NativeMessageHandler - createProvider called.");try{let o=new n(e,t,r,ti.PREFERRED_EXTENSION_ID);return yield o.sendHandshakeRequest(),o}catch{let i=new n(e,t,r);return yield i.sendHandshakeRequest(),i}})}sendHandshakeRequest(){return T(this,null,function*(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);let e={channel:ti.CHANNEL_ID,extensionId:this.extensionId,responseId:$t(),body:{method:go.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=t=>{this.onChannelMessage(t)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((t,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(Q(Wa)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})})}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;let t=e.data;if(!(!t.channel||t.channel!==ti.CHANNEL_ID)&&!(t.extensionId&&t.extensionId!==this.extensionId)&&t.body.method===go.HandshakeRequest){let r=this.handshakeResolvers.get(t.responseId);if(!r){this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${t.responseId}`);return}this.logger.verbose(t.extensionId?`Extension with id: ${t.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(Q(Ya))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");let t=e.data,r=this.resolvers.get(t.responseId),o=this.handshakeResolvers.get(t.responseId);try{let i=t.body.method;if(i===go.Response){if(!r)return;let s=t.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(s)}`),s.status!=="Success")r.reject(gu(s.code,s.description,s.ext));else if(s.result)s.result.code&&s.result.description?r.reject(gu(s.result.code,s.result.description,s.result.ext)):r.resolve(s.result);else throw Sl(Ni.unexpectedError,"Event does not contain result.");this.resolvers.delete(t.responseId)}else if(i===go.HandshakeResponse){if(!o){this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${t.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(i){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${i}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(i):o&&o.reject(i)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(e,t,r,o){if(t.trace("isNativeAvailable called"),!e.system.allowNativeBroker)return t.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!r)return t.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(o)switch(o){case Re.BEARER:case Re.POP:return t.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return t.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}};var ii=class{constructor(e,t,r,o,i){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}handleCodeResponse(e,t){return T(this,null,function*(){this.performanceClient.addQueueMeasurement(C.HandleCodeResponse,t.correlationId);let r;try{r=this.authModule.handleFragmentResponse(e,t.state)}catch(o){throw o instanceof nn&&o.subError===hn?Q(hn):o}return j(this.handleCodeResponseFromServer.bind(this),C.HandleCodeResponseFromServer,this.logger,this.performanceClient,t.correlationId)(r,t)})}handleCodeResponseFromServer(e,t,r=!0){return T(this,null,function*(){if(this.performanceClient.addQueueMeasurement(C.HandleCodeResponseFromServer,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&(yield j(this.authModule.updateAuthority.bind(this.authModule),C.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId)),r&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{let i=this.createCcsCredentials(t);i&&(this.authCodeRequest.ccsCredential=i)}return yield j(this.authModule.acquireToken.bind(this.authModule),C.AuthClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)})}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:kt.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:kt.UPN}:null}};function Kf(n,e,t){let r=qo.getDeserializedResponse(n);if(!r)throw qo.stripLeadingHashOrQuery(n)?(t.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),t.errorPii(`The ${e} detected is: ${n}`),Q(Da)):(t.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),Q(Aa));return r}function OS(n,e,t){if(!n.state)throw Q(Zo);let r=zf(e,n.state);if(!r)throw Q(Ma);if(r.interactionType!==t)throw Q(Ra)}var Wf=class extends pn{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,a,l,u),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=c}acquireToken(e){try{let r={popupName:this.generatePopupName(e.scopes||In,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window};return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(e,r))}catch(t){return Promise.reject(t)}}logout(e){try{this.logger.verbose("logoutPopup called");let t=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(t),popupWindowAttributes:e?.popupWindowAttributes||{},popupWindowParent:e?.popupWindowParent??window},o=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,r,o,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(t,r,o,i))}catch(t){return Promise.reject(t)}}acquireTokenPopupAsync(e,t){return T(this,null,function*(){this.logger.verbose("acquireTokenPopupAsync called");let r=this.initializeServerTelemetryManager($e.acquireTokenPopup),o=yield j(this.initializeAuthorizationRequest.bind(this),C.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,re.Popup);hu(o.authority);try{let i=yield j(this.initializeAuthorizationCodeRequest.bind(this),C.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(o),s=yield j(this.createAuthCodeClient.bind(this),C.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:o.authority,requestAzureCloudOptions:o.azureCloudOptions,requestExtraQueryParameters:o.extraQueryParameters,account:o.account}),a=Sn.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme),c;a&&(c=this.performanceClient.startMeasurement(C.FetchAccountIdWithNativeBroker,e.correlationId));let l=yield s.getAuthCodeUrl(J(D({},o),{nativeBroker:a})),u=new ii(s,this.browserStorage,i,this.logger,this.performanceClient),d=this.initiateAuthRequest(l,t);this.eventHandler.emitEvent(se.POPUP_OPENED,re.Popup,{popupWindow:d},null);let p=yield this.monitorPopupForHash(d,t.popupWindowParent),h=tn(Kf,C.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(p,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(Ir.removeThrottle(this.browserStorage,this.config.auth.clientId,i),h.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),c&&c.end({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw Q(Bn);let g=new Hn(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,$e.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,h.accountId,this.nativeStorage,o.correlationId),{userRequestState:y}=Nt.parseRequestState(this.browserCrypto,o.state);return yield g.acquireToken(J(D({},o),{state:y,prompt:void 0}))}return yield u.handleCodeResponse(h,o)}catch(i){throw t.popup?.close(),i instanceof Se&&(i.setCorrelationId(this.correlationId),r.cacheFailedRequest(i)),i}})}logoutPopupAsync(e,t,r,o){return T(this,null,function*(){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(se.LOGOUT_START,re.Popup,e);let i=this.initializeServerTelemetryManager($e.logoutPopup);try{yield this.clearCacheOnLogout(e.account);let s=yield j(this.createAuthCodeClient.bind(this),C.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:r,account:e.account||void 0});try{s.authority.endSessionEndpoint}catch{if(e.account?.homeAccountId&&e.postLogoutRedirectUri&&s.authority.protocolMode===Bt.OIDC){if(this.browserStorage.removeAccount(e.account?.homeAccountId),this.eventHandler.emitEvent(se.LOGOUT_SUCCESS,re.Popup,e),o){let l={apiId:$e.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},u=_e.getAbsoluteUrl(o,on());yield this.navigationClient.navigateInternal(u,l)}t.popup?.close();return}}let a=s.getLogoutUri(e);this.eventHandler.emitEvent(se.LOGOUT_SUCCESS,re.Popup,e);let c=this.openPopup(a,t);if(this.eventHandler.emitEvent(se.POPUP_OPENED,re.Popup,{popupWindow:c},null),yield this.monitorPopupForHash(c,t.popupWindowParent).catch(()=>{}),o){let l={apiId:$e.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},u=_e.getAbsoluteUrl(o,on());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${u}`),yield this.navigationClient.navigateInternal(u,l)}else this.logger.verbose("No main window navigation requested")}catch(s){throw t.popup?.close(),s instanceof Se&&(s.setCorrelationId(this.correlationId),i.cacheFailedRequest(s)),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(se.LOGOUT_FAILURE,re.Popup,null,s),this.eventHandler.emitEvent(se.LOGOUT_END,re.Popup),s}this.eventHandler.emitEvent(se.LOGOUT_END,re.Popup)})}initiateAuthRequest(e,t){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),Q(Tr)}monitorPopupForHash(e,t){return new Promise((r,o)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");let i=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(i),o(Q(hn));return}let s="";try{s=e.location.href}catch{}if(!s||s==="about:blank")return;clearInterval(i);let a="",c=this.config.auth.OIDCOptions.serverResponseType;e&&(c===tr.QUERY?a=e.location.search:a=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(a)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,t)})}openPopup(e,t){try{let r;if(t.popup?(r=t.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof t.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,t)),!r)throw Q(xa);return r.focus&&r.focus(),this.currentWindow=r,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),this.browserStorage.setInteractionInProgress(!1),Q(Na)}}openSizedPopup(e,{popupName:t,popupWindowAttributes:r,popupWindowParent:o}){let i=o.screenLeft?o.screenLeft:o.screenX,s=o.screenTop?o.screenTop:o.screenY,a=o.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=o.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,l=r.popupSize?.width,u=r.popupSize?.height,d=r.popupPosition?.top,p=r.popupPosition?.left;return(!l||l<0||l>a)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),l=vt.POPUP_WIDTH),(!u||u<0||u>c)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),u=vt.POPUP_HEIGHT),(!d||d<0||d>c)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),d=Math.max(0,c/2-vt.POPUP_HEIGHT/2+s)),(!p||p<0||p>a)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),p=Math.max(0,a/2-vt.POPUP_WIDTH/2+i)),o.open(e,t,`width=${l}, height=${u}, top=${d}, left=${p}, scrollbars=yes`)}unloadWindow(e){this.browserStorage.cleanRequestByInteractionType(re.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(e,t){return`${vt.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${t}.${this.correlationId}`}generateLogoutPopupName(e){let t=e.account&&e.account.homeAccountId;return`${vt.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${t}.${this.correlationId}`}};var mu=class{constructor(e,t,r,o,i){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}initiateAuthRequest(e,t){return T(this,null,function*(){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){t.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(He.ORIGIN_URI,t.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(He.CORRELATION_ID,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest),this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);let r={apiId:$e.acquireTokenRedirect,timeout:t.redirectTimeout,noHistory:!1};if(typeof t.onRedirectNavigate=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),t.onRedirectNavigate(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),yield t.navigationClient.navigateExternal(e,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),yield t.navigationClient.navigateExternal(e,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),Q(Tr)})}handleCodeResponse(e,t){return T(this,null,function*(){this.logger.verbose("RedirectHandler.handleCodeResponse called"),this.browserStorage.setInteractionInProgress(!1);let r=this.browserStorage.generateStateKey(t),o=this.browserStorage.getTemporaryCache(r);if(!o)throw L(Rt.stateNotFound,"Cached State");let i;try{i=this.authModule.handleFragmentResponse(e,o)}catch(l){throw l instanceof nn&&l.subError===hn?Q(hn):l}let s=this.browserStorage.generateNonceKey(o),a=this.browserStorage.getTemporaryCache(s);if(this.authCodeRequest.code=i.code,i.cloud_instance_host_name&&(yield j(this.authModule.updateAuthority.bind(this.authModule),C.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(i.cloud_instance_host_name,this.authCodeRequest.correlationId)),i.nonce=a||void 0,i.state=o,i.client_info)this.authCodeRequest.clientInfo=i.client_info;else{let l=this.checkCcsCredentials();l&&(this.authCodeRequest.ccsCredential=l)}let c=yield this.authModule.acquireToken(this.authCodeRequest,i);return this.browserStorage.cleanRequestByState(t),c})}checkCcsCredentials(){let e=this.browserStorage.getTemporaryCache(He.CCS_CREDENTIAL,!0);if(e)try{return JSON.parse(e)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${e}`)}return null}};function G1(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;let n=window.performance.getEntriesByType("navigation");return(n.length?n[0]:void 0)?.type}var Yf=class extends pn{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,a,l,u),this.nativeStorage=c}acquireToken(e){return T(this,null,function*(){let t=yield j(this.initializeAuthorizationRequest.bind(this),C.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,re.Redirect);this.browserStorage.updateCacheEntries(t.state,t.nonce,t.authority,t.loginHint||"",t.account||null);let r=this.initializeServerTelemetryManager($e.acquireTokenRedirect),o=i=>{i.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.cleanRequestByState(t.state),this.eventHandler.emitEvent(se.RESTORE_FROM_BFCACHE,re.Redirect))};try{let i=yield j(this.initializeAuthorizationCodeRequest.bind(this),C.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(t),s=yield j(this.createAuthCodeClient.bind(this),C.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),a=new mu(s,this.browserStorage,i,this.logger,this.performanceClient),c=yield s.getAuthCodeUrl(J(D({},t),{nativeBroker:Sn.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)})),l=this.getRedirectStartPage(e.redirectStartPage);return this.logger.verbosePii(`Redirect start page: ${l}`),window.addEventListener("pageshow",o),yield a.initiateAuthRequest(c,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:l,onRedirectNavigate:e.onRedirectNavigate||this.config.auth.onRedirectNavigate})}catch(i){throw i instanceof Se&&(i.setCorrelationId(this.correlationId),r.cacheFailedRequest(i)),window.removeEventListener("pageshow",o),this.browserStorage.cleanRequestByState(t.state),i}})}handleRedirectPromise(e="",t){return T(this,null,function*(){let r=this.initializeServerTelemetryManager($e.handleRedirectPromise);try{if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;let[o,i]=this.getRedirectResponse(e||"");if(!o)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(re.Redirect),G1()!=="back_forward"?t.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;let s=this.browserStorage.getTemporaryCache(He.ORIGIN_URI,!0)||R.EMPTY_STRING,a=_e.removeHashFromUrl(s),c=_e.removeHashFromUrl(window.location.href);if(a===c&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),s.indexOf("#")>-1&&cC(s),yield this.handleResponse(o,r);if(this.config.auth.navigateToLoginRequestUrl){if(!uu()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(He.URL_HASH,i,!0);let l={apiId:$e.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0},u=!0;if(!s||s==="null"){let d=lC();this.browserStorage.setTemporaryCache(He.ORIGIN_URI,d,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),u=yield this.navigationClient.navigateInternal(d,l)}else this.logger.verbose(`Navigating to loginRequestUrl: ${s}`),u=yield this.navigationClient.navigateInternal(s,l);if(!u)return yield this.handleResponse(o,r)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),yield this.handleResponse(o,r);return null}catch(o){throw o instanceof Se&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),this.browserStorage.cleanRequestByInteractionType(re.Redirect),o}})}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(this.config.auth.OIDCOptions.serverResponseType===tr.QUERY?t=window.location.search:t=window.location.hash);let r=qo.getDeserializedResponse(t);if(r){try{OS(r,this.browserCrypto,re.Redirect)}catch(i){return i instanceof Se&&this.logger.error(`Interaction type validation failed due to ${i.errorCode}: ${i.errorMessage}`),[null,""]}return aC(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,t]}let o=this.browserStorage.getTemporaryCache(He.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(He.URL_HASH)),o&&(r=qo.getDeserializedResponse(o),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,o]):[null,""]}handleResponse(e,t){return T(this,null,function*(){let r=e.state;if(!r)throw Q(Zo);let o=this.browserStorage.getCachedRequest(r);if(this.logger.verbose("handleResponse called, retrieved cached request"),e.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw Q(Bn);let c=new Hn(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,$e.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,e.accountId,this.nativeStorage,o.correlationId),{userRequestState:l}=Nt.parseRequestState(this.browserCrypto,r);return c.acquireToken(J(D({},o),{state:l,prompt:void 0})).finally(()=>{this.browserStorage.cleanRequestByState(r)})}let i=this.browserStorage.getCachedAuthority(r);if(!i)throw Q(Jo);let s=yield j(this.createAuthCodeClient.bind(this),C.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:i});return Ir.removeThrottle(this.browserStorage,this.config.auth.clientId,o),new mu(s,this.browserStorage,o,this.logger,this.performanceClient).handleCodeResponse(e,r)})}logout(e){return T(this,null,function*(){this.logger.verbose("logoutRedirect called");let t=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager($e.logout);try{this.eventHandler.emitEvent(se.LOGOUT_START,re.Redirect,e),yield this.clearCacheOnLogout(t.account);let o={apiId:$e.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},i=yield j(this.createAuthCodeClient.bind(this),C.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e&&e.authority,requestExtraQueryParameters:e?.extraQueryParameters,account:e&&e.account||void 0});if(i.authority.protocolMode===Bt.OIDC)try{i.authority.endSessionEndpoint}catch{if(t.account?.homeAccountId){this.browserStorage.removeAccount(t.account?.homeAccountId),this.eventHandler.emitEvent(se.LOGOUT_SUCCESS,re.Redirect,t);return}}let s=i.getLogoutUri(t);if(this.eventHandler.emitEvent(se.LOGOUT_SUCCESS,re.Redirect,t),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(s)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),yield this.navigationClient.navigateExternal(s,o);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),yield this.navigationClient.navigateExternal(s,o);return}}catch(o){throw o instanceof Se&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),this.eventHandler.emitEvent(se.LOGOUT_FAILURE,re.Redirect,null,o),this.eventHandler.emitEvent(se.LOGOUT_END,re.Redirect),o}this.eventHandler.emitEvent(se.LOGOUT_END,re.Redirect)})}getRedirectStartPage(e){let t=e||window.location.href;return _e.getAbsoluteUrl(t,on())}};function PS(n,e,t,r,o){return T(this,null,function*(){if(e.addQueueMeasurement(C.SilentHandlerInitiateAuthRequest,r),!n)throw t.info("Navigate url is empty"),Q(Tr);return o?j(q1,C.SilentHandlerLoadFrame,t,e,r)(n,o,e,r):tn(K1,C.SilentHandlerLoadFrameSync,t,e,r)(n)})}function FS(n,e,t,r,o,i,s){return T(this,null,function*(){return r.addQueueMeasurement(C.SilentHandlerMonitorIframeForHash,i),new Promise((a,c)=>{e<Ff&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${Ff}ms). This may result in timeouts.`);let l=window.setTimeout(()=>{window.clearInterval(u),c(Q(Oa))},e),u=window.setInterval(()=>{let d="",p=n.contentWindow;try{d=p?p.location.href:""}catch{}if(!d||d==="about:blank")return;let h="";p&&(s===tr.QUERY?h=p.location.search:h=p.location.hash),window.clearTimeout(l),window.clearInterval(u),a(h)},t)}).finally(()=>{tn(W1,C.RemoveHiddenIframe,o,r,i)(n)})})}function q1(n,e,t,r){return t.addQueueMeasurement(C.SilentHandlerLoadFrame,r),new Promise((o,i)=>{let s=LS();window.setTimeout(()=>{if(!s){i("Unable to load iframe");return}s.src=n,o(s)},e)})}function K1(n){let e=LS();return e.src=n,e}function LS(){let n=document.createElement("iframe");return n.className="msalSilentIframe",n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height="0",n.style.border="0",n.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(n),n}function W1(n){document.body===n.parentNode&&document.body.removeChild(n)}var Qf=class extends pn{constructor(e,t,r,o,i,s,a,c,l,u,d){super(e,t,r,o,i,s,c,u,d),this.apiId=a,this.nativeStorage=l}acquireToken(e){return T(this,null,function*(){this.performanceClient.addQueueMeasurement(C.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");let t=D({},e);t.prompt?t.prompt!==et.NONE&&t.prompt!==et.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${t.prompt} with ${et.NONE}`),t.prompt=et.NONE):t.prompt=et.NONE;let r=yield j(this.initializeAuthorizationRequest.bind(this),C.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(t,re.Silent);hu(r.authority);let o=this.initializeServerTelemetryManager(this.apiId),i;try{return i=yield j(this.createAuthCodeClient.bind(this),C.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:o,requestAuthority:r.authority,requestAzureCloudOptions:r.azureCloudOptions,requestExtraQueryParameters:r.extraQueryParameters,account:r.account}),yield j(this.silentTokenHelper.bind(this),C.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(i,r)}catch(s){if(s instanceof Se&&(s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s)),!i||!(s instanceof Se)||s.errorCode!==vt.INVALID_GRANT_ERROR)throw s;this.performanceClient.addFields({retryError:s.errorCode},this.correlationId);let a=yield j(this.initializeAuthorizationRequest.bind(this),C.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(t,re.Silent);return yield j(this.silentTokenHelper.bind(this),C.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(i,a)}})}logout(){return Promise.reject(Q(Sr))}silentTokenHelper(e,t){return T(this,null,function*(){let r=t.correlationId;this.performanceClient.addQueueMeasurement(C.SilentIframeClientTokenHelper,r);let o=yield j(this.initializeAuthorizationCodeRequest.bind(this),C.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,r)(t),i=yield j(e.getAuthCodeUrl.bind(e),C.GetAuthCodeUrl,this.logger,this.performanceClient,r)(J(D({},t),{nativeBroker:Sn.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,t.authenticationScheme)})),s=new ii(e,this.browserStorage,o,this.logger,this.performanceClient),a=yield j(PS,C.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(i,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait),c=this.config.auth.OIDCOptions.serverResponseType,l=yield j(FS,C.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(a,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,c),u=tn(Kf,C.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(l,c,this.logger);if(u.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw Q(Bn);let d=new Hn(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,u.accountId,this.browserStorage,r),{userRequestState:p}=Nt.parseRequestState(this.browserCrypto,t.state);return j(d.acquireToken.bind(d),C.NativeInteractionClientAcquireToken,this.logger,this.performanceClient,r)(J(D({},t),{state:p,prompt:t.prompt||et.NONE}))}return j(s.handleCodeResponse.bind(s),C.HandleCodeResponse,this.logger,this.performanceClient,r)(u,t)})}};var Zf=class extends pn{acquireToken(e){return T(this,null,function*(){this.performanceClient.addQueueMeasurement(C.SilentRefreshClientAcquireToken,e.correlationId);let t=yield j(pu,C.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r=D(D({},e),t);e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));let o=this.initializeServerTelemetryManager($e.acquireTokenSilent_silentFlow),i=yield this.createRefreshTokenClient({serverTelemetryManager:o,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return j(i.acquireTokenByRefreshToken.bind(i),C.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(r).catch(s=>{throw s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s),s})})}logout(){return Promise.reject(Q(Sr))}createRefreshTokenClient(e){return T(this,null,function*(){let t=yield j(this.getClientConfiguration.bind(this),C.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new Qo(t,this.performanceClient)})}};var Jf=class{constructor(e,t,r,o){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=t,this.logger=r,this.cryptoObj=o}loadExternalTokens(e,t,r){if(!this.isBrowserEnvironment)throw Q(Ar);let o=t.id_token?$o.extractTokenClaims(t.id_token,fn):void 0,i={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},s=e.authority?new Un(Un.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,i,this.logger,e.correlationId||$t()):void 0,a=this.loadAccount(e,r.clientInfo||t.client_info||"",o,s),c=this.loadIdToken(t,a.homeAccountId,a.environment,a.realm),l=this.loadAccessToken(e,t,a.homeAccountId,a.environment,a.realm,r),u=this.loadRefreshToken(t,a.homeAccountId,a.environment);return this.generateAuthenticationResult(e,{account:a,idToken:c,accessToken:l,refreshToken:u},o,s)}loadAccount(e,t,r,o){if(this.logger.verbose("TokenCache - loading account"),e.account){let c=Xe.createFromAccountInfo(e.account);return this.storage.setAccount(c),c}else if(!o||!t&&!r)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),Q(za);let i=Xe.generateHomeAccountId(t,o.authorityType,this.logger,this.cryptoObj,r),s=r?.tid,a=Ta(this.storage,o,i,fn,r,t,o.hostnameAndPort,s,void 0,void 0,this.logger);return this.storage.setAccount(a),a}loadIdToken(e,t,r,o){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");let i=Qe.createIdTokenEntity(t,r,e.id_token,this.config.auth.clientId,o);return this.storage.setIdTokenCredential(i),i}loadAccessToken(e,t,r,o,i,s){if(t.access_token)if(t.expires_in){if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");let a=t.scope?tt.fromString(t.scope):new tt(e.scopes),c=s.expiresOn||t.expires_in+new Date().getTime()/1e3,l=s.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+new Date().getTime()/1e3,u=Qe.createAccessTokenEntity(r,o,t.access_token,this.config.auth.clientId,i,a.printScopes(),c,l,fn);return this.storage.setAccessTokenCredential(u),u}loadRefreshToken(e,t,r){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");let o=Qe.createRefreshTokenEntity(t,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return this.storage.setRefreshTokenCredential(o),o}generateAuthenticationResult(e,t,r,o){let i="",s=[],a=null,c;t?.accessToken&&(i=t.accessToken.secret,s=tt.fromString(t.accessToken.target).asArray(),a=new Date(Number(t.accessToken.expiresOn)*1e3),c=new Date(Number(t.accessToken.extendedExpiresOn)*1e3));let l=t.account;return{authority:o?o.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:s,account:l.getAccountInfo(),idToken:t.idToken?.secret||"",idTokenClaims:r||{},accessToken:i,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:c,familyId:t.refreshToken?.familyId||"",tokenType:t?.accessToken?.tokenType||"",state:e.state||"",cloudGraphHostName:l.cloudGraphHostName||"",msGraphHost:l.msGraphHost||"",fromNativeBroker:!1}}};var Xf=class extends ls{constructor(e){super(e),this.includeRedirectUri=!1}};var ep=class extends pn{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,c,l,u),this.apiId=a}acquireToken(e){return T(this,null,function*(){if(!e.code)throw Q($a);let t=yield j(this.initializeAuthorizationRequest.bind(this),C.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,re.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{let o=J(D({},t),{code:e.code}),i=yield j(this.getClientConfiguration.bind(this),C.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),s=new Xf(i);this.logger.verbose("Auth code client created");let a=new ii(s,this.browserStorage,o,this.logger,this.performanceClient);return yield j(a.handleCodeResponseFromServer.bind(a),C.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(o){throw o instanceof Se&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),o}})}logout(){return Promise.reject(Q(Sr))}};function Mr(n){let e=n?.idTokenClaims;if(e?.tfp||e?.acr)return"B2C";if(e?.tid){if(e?.tid==="9188040d-6c67-4c5b-b112-36a304b66dad")return"MSA"}else return;return"AAD"}function tp(n,e){try{du(n)}catch(t){throw e.end({success:!1},t),t}}var sc=class n{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new mS(this.logger,this.performanceClient):jo,this.eventHandler=new Gf(this.logger),this.browserStorage=this.isBrowserEnvironment?new rc(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,Gy(this.config.auth),this.performanceClient):vS(this.config.auth.clientId,this.logger);let t={cacheLocation:lt.MemoryStorage,temporaryCacheLocation:lt.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new rc(this.config.auth.clientId,t,this.browserCrypto,this.logger,void 0,this.performanceClient),this.tokenCache=new Jf(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this),this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}static createController(e,t){return T(this,null,function*(){let r=new n(e);return yield r.initialize(t),r})}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}initialize(e){return T(this,null,function*(){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(se.INITIALIZE_END);return}let t=e?.correlationId||this.getRequestCorrelationId(),r=this.config.system.allowNativeBroker,o=this.performanceClient.startMeasurement(C.InitializeClientApplication,t);if(this.eventHandler.emitEvent(se.INITIALIZE_START),r)try{this.nativeExtensionProvider=yield Sn.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(i){this.logger.verbose(i)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),yield j(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),C.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,t)(this.performanceClient,t)),this.initialized=!0,this.eventHandler.emitEvent(se.INITIALIZE_END),o.end({allowNativeBroker:r,success:!0})})}handleRedirectPromise(e){return T(this,null,function*(){if(this.logger.verbose("handleRedirectPromise called"),Nf(this.initialized),this.isBrowserEnvironment){let t=e||"",r=this.redirectResponse.get(t);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null})}handleRedirectPromiseInternal(e){return T(this,null,function*(){let t=this.getAllAccounts(),r=this.browserStorage.getCachedNativeRequest(),o=r&&Sn.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e,i=o?r?.correlationId:this.browserStorage.getTemporaryCache(He.CORRELATION_ID,!0)||"",s=this.performanceClient.startMeasurement(C.AcquireTokenRedirect,i);this.eventHandler.emitEvent(se.HANDLE_REDIRECT_START,re.Redirect);let a;if(o&&this.nativeExtensionProvider){this.logger.trace("handleRedirectPromise - acquiring token from native platform");let c=new Hn(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,$e.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,r.accountId,this.nativeInternalStorage,r.correlationId);a=j(c.handleRedirectPromise.bind(c),C.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(this.performanceClient,s.event.correlationId)}else{this.logger.trace("handleRedirectPromise - acquiring token from web flow");let c=this.createRedirectClient(i);a=j(c.handleRedirectPromise.bind(c),C.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(e,s)}return a.then(c=>(c?(t.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(se.LOGIN_SUCCESS,re.Redirect,c),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(se.ACQUIRE_TOKEN_SUCCESS,re.Redirect,c),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),s.end({success:!0,accountType:Mr(c.account)})):s.event.errorCode?s.end({success:!1}):s.discard(),this.eventHandler.emitEvent(se.HANDLE_REDIRECT_END,re.Redirect),c)).catch(c=>{let l=c;throw t.length>0?this.eventHandler.emitEvent(se.ACQUIRE_TOKEN_FAILURE,re.Redirect,null,l):this.eventHandler.emitEvent(se.LOGIN_FAILURE,re.Redirect,null,l),this.eventHandler.emitEvent(se.HANDLE_REDIRECT_END,re.Redirect),s.end({success:!1},l),c})})}acquireTokenRedirect(e){return T(this,null,function*(){let t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);let r=this.performanceClient.startMeasurement(C.AcquireTokenPreRedirect,t);r.add({accountType:Mr(e.account),scenarioId:e.scenarioId});let o=e.onRedirectNavigate;if(o)e.onRedirectNavigate=s=>{let a=typeof o=="function"?o(s):void 0;return a!==!1?r.end({success:!0}):r.discard(),a};else{let s=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=a=>{let c=typeof s=="function"?s(a):void 0;return c!==!1?r.end({success:!0}):r.discard(),c}}let i=this.getAllAccounts().length>0;try{xf(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),i?this.eventHandler.emitEvent(se.ACQUIRE_TOKEN_START,re.Redirect,e):this.eventHandler.emitEvent(se.LOGIN_START,re.Redirect,e);let s;return this.nativeExtensionProvider&&this.canUseNative(e)?s=new Hn(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,$e.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,r).catch(c=>{if(c instanceof Vn&&oi(c))return this.nativeExtensionProvider=void 0,this.createRedirectClient(t).acquireToken(e);if(c instanceof Vt)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(t).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),c}):s=this.createRedirectClient(t).acquireToken(e),yield s}catch(s){throw r.end({success:!1},s),i?this.eventHandler.emitEvent(se.ACQUIRE_TOKEN_FAILURE,re.Redirect,null,s):this.eventHandler.emitEvent(se.LOGIN_FAILURE,re.Redirect,null,s),s}})}acquireTokenPopup(e){let t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(C.AcquireTokenPopup,t);r.add({scenarioId:e.scenarioId,accountType:Mr(e.account)});try{this.logger.verbose("acquireTokenPopup called",t),tp(this.initialized,r),this.browserStorage.setInteractionInProgress(!0)}catch(s){return Promise.reject(s)}let o=this.getAllAccounts();o.length>0?this.eventHandler.emitEvent(se.ACQUIRE_TOKEN_START,re.Popup,e):this.eventHandler.emitEvent(se.LOGIN_START,re.Popup,e);let i;return this.canUseNative(e)?i=this.acquireTokenNative(J(D({},e),{correlationId:t}),$e.acquireTokenPopup).then(s=>(this.browserStorage.setInteractionInProgress(!1),r.end({success:!0,isNativeBroker:!0,accountType:Mr(s.account)}),s)).catch(s=>{if(s instanceof Vn&&oi(s))return this.nativeExtensionProvider=void 0,this.createPopupClient(t).acquireToken(e);if(s instanceof Vt)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(t).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),s}):i=this.createPopupClient(t).acquireToken(e),i.then(s=>(o.length<this.getAllAccounts().length?this.eventHandler.emitEvent(se.LOGIN_SUCCESS,re.Popup,s):this.eventHandler.emitEvent(se.ACQUIRE_TOKEN_SUCCESS,re.Popup,s),r.end({success:!0,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:Mr(s.account)}),s)).catch(s=>(o.length>0?this.eventHandler.emitEvent(se.ACQUIRE_TOKEN_FAILURE,re.Popup,null,s):this.eventHandler.emitEvent(se.LOGIN_FAILURE,re.Popup,null,s),r.end({success:!1},s),Promise.reject(s)))}trackPageVisibilityWithMeasurement(){let e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}ssoSilent(e){return T(this,null,function*(){let t=this.getRequestCorrelationId(e),r=J(D({},e),{prompt:e.prompt,correlationId:t});this.ssoSilentMeasurement=this.performanceClient.startMeasurement(C.SsoSilent,t),this.ssoSilentMeasurement?.add({scenarioId:e.scenarioId,accountType:Mr(e.account)}),tp(this.initialized,this.ssoSilentMeasurement),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",t),this.eventHandler.emitEvent(se.SSO_SILENT_START,re.Silent,r);let o;return this.canUseNative(r)?o=this.acquireTokenNative(r,$e.ssoSilent).catch(i=>{if(i instanceof Vn&&oi(i))return this.nativeExtensionProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw i}):o=this.createSilentIframeClient(r.correlationId).acquireToken(r),o.then(i=>(this.eventHandler.emitEvent(se.SSO_SILENT_SUCCESS,re.Silent,i),this.ssoSilentMeasurement?.end({success:!0,isNativeBroker:i.fromNativeBroker,accessTokenSize:i.accessToken.length,idTokenSize:i.idToken.length,accountType:Mr(i.account)}),i)).catch(i=>{throw this.eventHandler.emitEvent(se.SSO_SILENT_FAILURE,re.Silent,null,i),this.ssoSilentMeasurement?.end({success:!1},i),i}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})})}acquireTokenByCode(e){return T(this,null,function*(){let t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);let r=this.performanceClient.startMeasurement(C.AcquireTokenByCode,t);tp(this.initialized,r),this.eventHandler.emitEvent(se.ACQUIRE_TOKEN_BY_CODE_START,re.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw Q(qa);if(e.code){let o=e.code,i=this.hybridAuthCodeResponses.get(o);return i?(this.logger.verbose("Existing acquireTokenByCode request found",t),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),i=this.acquireTokenByCodeAsync(J(D({},e),{correlationId:t})).then(s=>(this.eventHandler.emitEvent(se.ACQUIRE_TOKEN_BY_CODE_SUCCESS,re.Silent,s),this.hybridAuthCodeResponses.delete(o),r.end({success:!0,isNativeBroker:s.fromNativeBroker,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:Mr(s.account)}),s)).catch(s=>{throw this.hybridAuthCodeResponses.delete(o),this.eventHandler.emitEvent(se.ACQUIRE_TOKEN_BY_CODE_FAILURE,re.Silent,null,s),r.end({success:!1},s),s}),this.hybridAuthCodeResponses.set(o,i)),yield i}else if(e.nativeAccountId)if(this.canUseNative(e,e.nativeAccountId)){let o=yield this.acquireTokenNative(J(D({},e),{correlationId:t}),$e.acquireTokenByCode,e.nativeAccountId).catch(i=>{throw i instanceof Vn&&oi(i)&&(this.nativeExtensionProvider=void 0),i});return r.end({accountType:Mr(o.account),success:!0}),o}else throw Q(Ka);else throw Q(Ga)}catch(o){throw this.eventHandler.emitEvent(se.ACQUIRE_TOKEN_BY_CODE_FAILURE,re.Silent,null,o),r.end({success:!1},o),o}})}acquireTokenByCodeAsync(e){return T(this,null,function*(){return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(C.AcquireTokenByCodeAsync,e.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),yield this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(o=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:o.fromCache,isNativeBroker:o.fromNativeBroker}),o)).catch(o=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},o),o}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})})}acquireTokenFromCache(e,t){return T(this,null,function*(){switch(this.performanceClient.addQueueMeasurement(C.AcquireTokenFromCache,e.correlationId),t){case rn.Default:case rn.AccessToken:case rn.AccessTokenAndRefreshToken:let r=this.createSilentCacheClient(e.correlationId);return j(r.acquireToken.bind(r),C.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw L(Rt.tokenRefreshRequired)}})}acquireTokenByRefreshToken(e,t){return T(this,null,function*(){switch(this.performanceClient.addQueueMeasurement(C.AcquireTokenByRefreshToken,e.correlationId),t){case rn.Default:case rn.AccessTokenAndRefreshToken:case rn.RefreshToken:case rn.RefreshTokenAndNetwork:let r=this.createSilentRefreshClient(e.correlationId);return j(r.acquireToken.bind(r),C.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw L(Rt.tokenRefreshRequired)}})}acquireTokenBySilentIframe(e){return T(this,null,function*(){this.performanceClient.addQueueMeasurement(C.AcquireTokenBySilentIframe,e.correlationId);let t=this.createSilentIframeClient(e.correlationId);return j(t.acquireToken.bind(t),C.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)})}logout(e){return T(this,null,function*(){let t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect(D({correlationId:t},e))})}logoutRedirect(e){return T(this,null,function*(){let t=this.getRequestCorrelationId(e);return xf(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),this.createRedirectClient(t).logout(e)})}logoutPopup(e){try{let t=this.getRequestCorrelationId(e);return du(this.initialized),this.browserStorage.setInteractionInProgress(!0),this.createPopupClient(t).logout(e)}catch(t){return Promise.reject(t)}}clearCache(e){return T(this,null,function*(){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}let t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)})}getAllAccounts(e){return yS(this.logger,this.browserStorage,this.isBrowserEnvironment,e)}getAccount(e){return CS(e,this.logger,this.browserStorage)}getAccountByUsername(e){return ES(e,this.logger,this.browserStorage)}getAccountByHomeId(e){return wS(e,this.logger,this.browserStorage)}getAccountByLocalId(e){return _S(e,this.logger,this.browserStorage)}setActiveAccount(e){IS(e,this.browserStorage)}getActiveAccount(){return bS(this.browserStorage)}hydrateCache(e,t){return T(this,null,function*(){this.logger.verbose("hydrateCache called");let r=Xe.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return this.browserStorage.setAccount(r),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)})}acquireTokenNative(e,t,r){return T(this,null,function*(){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw Q(Bn);return new Hn(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.nativeExtensionProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e)})}canUseNative(e,t){if(this.logger.trace("canUseNative called"),!Sn.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case et.NONE:case et.CONSENT:case et.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace(`canUseNative: prompt = ${e.prompt} is not compatible with native flow, returning false`),!1}return!t&&!this.getNativeAccountId(e)?(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){let t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new Wf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new Yf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new Qf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,$e.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new ic(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new Zf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new ep(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,$e.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return kf(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}handleAccountCacheChange(e){try{e.key?.includes(mt.ACTIVE_ACCOUNT_FILTERS)&&this.eventHandler.emitEvent(se.ACTIVE_ACCOUNT_CHANGED);let t=e.newValue||e.oldValue;if(!t)return;let r=JSON.parse(t);if(typeof r!="object"||!Xe.isAccountEntity(r))return;let i=co.toObject(new Xe,r).getAccountInfo();!e.oldValue&&e.newValue?(this.logger.info("Account was added to cache in a different window"),this.eventHandler.emitEvent(se.ACCOUNT_ADDED,void 0,i)):!e.newValue&&e.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.eventHandler.emitEvent(se.ACCOUNT_REMOVED,void 0,i))}catch{return}}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e?.correlationId?e.correlationId:this.isBrowserEnvironment?$t():R.EMPTY_STRING}loginRedirect(e){return T(this,null,function*(){let t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect(D({correlationId:t},e||tC))})}loginPopup(e){let t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup(D({correlationId:t},e||tC))}acquireTokenSilent(e){return T(this,null,function*(){let t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(C.AcquireTokenSilent,t);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),tp(this.initialized,r),this.logger.verbose("acquireTokenSilent called",t);let o=e.account||this.getActiveAccount();if(!o)throw Q(Ua);r.add({accountType:Mr(o)});let i={clientId:this.config.auth.clientId,authority:e.authority||R.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:o.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,shrOptions:e.shrOptions},s=JSON.stringify(i),a=this.activeSilentTokenRequests.get(s);if(typeof a>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",t);let c=j(this.acquireTokenSilentAsync.bind(this),C.AcquireTokenSilentAsync,this.logger,this.performanceClient,t)(J(D({},e),{correlationId:t}),o).then(l=>(this.activeSilentTokenRequests.delete(s),r.end({success:!0,fromCache:l.fromCache,isNativeBroker:l.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,accessTokenSize:l.accessToken.length,idTokenSize:l.idToken.length}),l)).catch(l=>{throw this.activeSilentTokenRequests.delete(s),r.end({success:!1},l),l});return this.activeSilentTokenRequests.set(s,c),J(D({},yield c),{state:e.state})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",t),r.discard(),J(D({},yield a),{state:e.state})})}acquireTokenSilentAsync(e,t){return T(this,null,function*(){let r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(C.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(se.ACQUIRE_TOKEN_START,re.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);let o=yield j(SS,C.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),i=e.cacheLookupPolicy||rn.Default;return this.acquireTokenSilentNoIframe(o,i).catch(a=>T(this,null,function*(){if(Y1(a,i))if(this.activeIframeRequest)if(i!==rn.Skip){let[l,u]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${u}`,o.correlationId);let d=this.performanceClient.startMeasurement(C.AwaitConcurrentIframe,o.correlationId);d.add({awaitIframeCorrelationId:u});let p=yield l;if(d.end({success:p}),p)return this.logger.verbose(`Parallel iframe request with correlationId: ${u} succeeded. Retrying cache and/or RT redemption`,o.correlationId),this.acquireTokenSilentNoIframe(o,i);throw this.logger.info(`Iframe request with correlationId: ${u} failed. Interaction is required.`),a}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",o.correlationId),j(this.acquireTokenBySilentIframe.bind(this),C.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o);else{let l;return this.activeIframeRequest=[new Promise(u=>{l=u}),o.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",o.correlationId),j(this.acquireTokenBySilentIframe.bind(this),C.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o).then(u=>(l(!0),u)).catch(u=>{throw l(!1),u}).finally(()=>{this.activeIframeRequest=void 0})}else throw a})).then(a=>(this.eventHandler.emitEvent(se.ACQUIRE_TOKEN_SUCCESS,re.Silent,a),e.correlationId&&this.performanceClient.addFields({fromCache:a.fromCache,isNativeBroker:a.fromNativeBroker},e.correlationId),a)).catch(a=>{throw this.eventHandler.emitEvent(se.ACQUIRE_TOKEN_FAILURE,re.Silent,null,a),a}).finally(()=>{document.removeEventListener("visibilitychange",r)})})}acquireTokenSilentNoIframe(e,t){return T(this,null,function*(){return Sn.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(e,$e.acquireTokenSilent_silentFlow).catch(r=>T(this,null,function*(){throw r instanceof Vn&&oi(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,L(Rt.tokenRefreshRequired)):r}))):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),j(this.acquireTokenFromCache.bind(this),C.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,t).catch(r=>{if(t===rn.AccessToken)throw r;return this.eventHandler.emitEvent(se.ACQUIRE_TOKEN_NETWORK_START,re.Silent,e),j(this.acquireTokenByRefreshToken.bind(this),C.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,t)}))})}};function Y1(n,e){let t=!(n instanceof Vt&&n.subError!==ho.badToken),r=n.errorCode===vt.INVALID_GRANT_ERROR||n.errorCode===Rt.tokenRefreshRequired,o=t&&r||n.errorCode===ho.noTokensFound||n.errorCode===ho.refreshTokenExpired,i=YT.includes(e);return o&&i}function US(n,e){return T(this,null,function*(){let t=new Uf(n);return yield t.initialize(),sc.createController(t,e)})}var vu=class n{static createPublicClientApplication(e){return T(this,null,function*(){let t=yield US(e);return new n(e,t)})}constructor(e,t){this.controller=t||new sc(new Uf(e))}initialize(e){return T(this,null,function*(){return this.controller.initialize(e)})}acquireTokenPopup(e){return T(this,null,function*(){return this.controller.acquireTokenPopup(e)})}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}hydrateCache(e,t){return T(this,null,function*(){return this.controller.hydrateCache(e,t)})}clearCache(e){return this.controller.clearCache(e)}};var yu=class{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case se.LOGIN_START:return Lt.Login;case se.SSO_SILENT_START:return Lt.SsoSilent;case se.ACQUIRE_TOKEN_START:if(e.interactionType===re.Redirect||e.interactionType===re.Popup)return Lt.AcquireToken;break;case se.HANDLE_REDIRECT_START:return Lt.HandleRedirect;case se.LOGOUT_START:return Lt.Logout;case se.SSO_SILENT_SUCCESS:case se.SSO_SILENT_FAILURE:if(t&&t!==Lt.SsoSilent)break;return Lt.None;case se.LOGOUT_END:if(t&&t!==Lt.Logout)break;return Lt.None;case se.HANDLE_REDIRECT_END:if(t&&t!==Lt.HandleRedirect)break;return Lt.None;case se.LOGIN_SUCCESS:case se.LOGIN_FAILURE:case se.ACQUIRE_TOKEN_SUCCESS:case se.ACQUIRE_TOKEN_FAILURE:case se.RESTORE_FROM_BFCACHE:if(e.interactionType===re.Redirect||e.interactionType===re.Popup){if(t&&t!==Lt.Login&&t!==Lt.AcquireToken)break;return Lt.None}break}return null}};var BS="@azure/msal-angular",dC="3.1.0",si=new oe("MSAL_INSTANCE"),np=new oe("MSAL_GUARD_CONFIG"),Q1=new oe("MSAL_INTERCEPTOR_CONFIG"),Z1=new oe("MSAL_BROADCAST_CONFIG"),vo=(()=>{class n{constructor(t,r){this.instance=t,this.location=r;let o=this.location.path(!0).split("#").pop();o&&(this.redirectHash=`#${o}`),this.instance.initializeWrapperLibrary(rC.Angular,dC)}initialize(){return De(this.instance.initialize())}acquireTokenPopup(t){return De(this.instance.acquireTokenPopup(t))}acquireTokenRedirect(t){return De(this.instance.acquireTokenRedirect(t))}acquireTokenSilent(t){return De(this.instance.acquireTokenSilent(t))}handleRedirectObservable(t){return De(this.instance.initialize().then(()=>this.instance.handleRedirectPromise(t||this.redirectHash)))}loginPopup(t){return De(this.instance.loginPopup(t))}loginRedirect(t){return De(this.instance.loginRedirect(t))}logout(t){return De(this.instance.logout(t))}logoutRedirect(t){return De(this.instance.logoutRedirect(t))}logoutPopup(t){return De(this.instance.logoutPopup(t))}ssoSilent(t){return De(this.instance.ssoSilent(t))}getLogger(){return this.logger||(this.logger=this.instance.getLogger().clone(BS,dC)),this.logger}setLogger(t){this.logger=t.clone(BS,dC),this.instance.setLogger(t)}}return n.\u0275fac=function(t){return new(t||n)(X(si),X(qr))},n.\u0275prov=ne({token:n,factory:n.\u0275fac}),n})(),rp=(()=>{class n{constructor(t,r,o){this.msalInstance=t,this.authService=r,this.msalBroadcastConfig=o,this.msalBroadcastConfig&&this.msalBroadcastConfig.eventsToReplay>0?(this.authService.getLogger().verbose(`BroadcastService - eventsToReplay set on BroadcastConfig, replaying the last ${this.msalBroadcastConfig.eventsToReplay} events`),this._msalSubject=new _c(this.msalBroadcastConfig.eventsToReplay)):this._msalSubject=new ft,this.msalSubject$=this._msalSubject.asObservable(),this._inProgress=new pt(Lt.Startup),this.inProgress$=this._inProgress.asObservable(),this.msalInstance.addEventCallback(i=>{this._msalSubject.next(i);let s=yu.getInteractionStatusFromEvent(i,this._inProgress.value);s!==null&&(this.authService.getLogger().verbose(`BroadcastService - ${i.eventType} results in setting inProgress from ${this._inProgress.value} to ${s}`),this._inProgress.next(s))})}}return n.\u0275fac=function(t){return new(t||n)(X(si),X(vo),X(Z1,8))},n.\u0275prov=ne({token:n,factory:n.\u0275fac}),n})(),hC=(()=>{class n{constructor(t,r,o,i,s){this.msalGuardConfig=t,this.msalBroadcastService=r,this.authService=o,this.location=i,this.router=s,this.msalBroadcastService.inProgress$.subscribe()}parseUrl(t){return this.router.parseUrl(t)}getDestinationUrl(t){this.authService.getLogger().verbose("Guard - getting destination url");let r=document.getElementsByTagName("base"),o=this.location.normalize(r.length?r[0].href:window.location.origin),i=this.location.prepareExternalUrl(t);return i.startsWith("#")?(this.authService.getLogger().verbose("Guard - destination by hash routing"),`${o}/${i}`):`${o}${t}`}loginInteractively(t){let r=typeof this.msalGuardConfig.authRequest=="function"?this.msalGuardConfig.authRequest(this.authService,t):D({},this.msalGuardConfig.authRequest);if(this.msalGuardConfig.interactionType===re.Popup)return this.authService.getLogger().verbose("Guard - logging in by popup"),this.authService.loginPopup(r).pipe(me(i=>(this.authService.getLogger().verbose("Guard - login by popup successful, can activate, setting active account"),this.authService.instance.setActiveAccount(i.account),!0)));this.authService.getLogger().verbose("Guard - logging in by redirect");let o=this.getDestinationUrl(t.url);return this.authService.loginRedirect(D({redirectStartPage:o},r)).pipe(me(()=>!1))}activateHelper(t){if(this.msalGuardConfig.interactionType!==re.Popup&&this.msalGuardConfig.interactionType!==re.Redirect)throw new tc("invalid_interaction_type","Invalid interaction type provided to MSAL Guard. InteractionType.Popup or InteractionType.Redirect must be provided in the MsalGuardConfiguration");if(this.authService.getLogger().verbose("MSAL Guard activated"),typeof window<"u"){if(_e.hashContainsKnownProperties(window.location.hash)&&Of.isInIframe()&&!this.authService.instance.getConfiguration().system.allowRedirectInIframe)return this.authService.getLogger().warning("Guard - redirectUri set to page with MSAL Guard. It is recommended to not set redirectUri to a page that requires authentication."),le(!1)}else return this.authService.getLogger().info("Guard - window is undefined, MSAL does not support server-side token acquisition"),le(!0);this.msalGuardConfig.loginFailedRoute&&(this.loginFailedRoute=this.parseUrl(this.msalGuardConfig.loginFailedRoute));let r=this.location.path(!0);return this.authService.initialize().pipe(Dn(()=>this.authService.handleRedirectObservable()),Dn(()=>{if(!this.authService.instance.getAllAccounts().length)return t?(this.authService.getLogger().verbose("Guard - no accounts retrieved, log in required to activate"),this.loginInteractively(t)):(this.authService.getLogger().verbose("Guard - no accounts retrieved, no state, cannot load"),le(!1));if(this.authService.getLogger().verbose("Guard - at least 1 account exists, can activate or load"),t){let o=this.includesCode(t.url),i=!!t.root&&!!t.root.fragment&&this.includesCode(`#${t.root.fragment}`),s=this.location.prepareExternalUrl(t.url).indexOf("#")===0;if(o&&(i||s))return this.authService.getLogger().info("Guard - Hash contains known code response, stopping navigation."),r.indexOf("#")>-1?le(this.parseUrl(this.location.path())):le(this.parseUrl(""))}return le(!0)}),Ut(o=>(this.authService.getLogger().error("Guard - error while logging in, unable to activate"),this.authService.getLogger().errorPii(`Guard - error: ${o.message}`),this.loginFailedRoute&&t?(this.authService.getLogger().verbose("Guard - loginFailedRoute set, redirecting"),le(this.loginFailedRoute)):le(!1))))}includesCode(t){return t.lastIndexOf("/code")>-1&&t.lastIndexOf("/code")===t.length-5||t.indexOf("#code=")>-1||t.indexOf("&code=")>-1}canActivate(t,r){return this.authService.getLogger().verbose("Guard - canActivate"),this.activateHelper(r)}canActivateChild(t,r){return this.authService.getLogger().verbose("Guard - canActivateChild"),this.activateHelper(r)}canMatch(){return this.authService.getLogger().verbose("Guard - canLoad"),this.activateHelper()}}return n.\u0275fac=function(t){return new(t||n)(X(np),X(rp),X(vo),X(qr),X(_t))},n.\u0275prov=ne({token:n,factory:n.\u0275fac}),n})();var VS=(()=>{class n{static forRoot(t,r,o){return{ngModule:n,providers:[{provide:si,useValue:t},{provide:np,useValue:r},{provide:Q1,useValue:o},vo]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Zt({type:n}),n.\u0275inj=Qt({providers:[hC,rp],imports:[En]}),n})();var ac=class{},fC=(()=>{class n{constructor(t,r,o,i){this.msalService=t,this.router=r,this.silentTokenRequest=o,this.msalInstance=i,this.loginId="",this.accountInfo=this.msalService.instance.getActiveAccount()}initialize(){return De(this.msalInstance.initialize())}getUserAuth(){return console.log("silentTokenRequest in ngkit",this.silentTokenRequest),new Oe(t=>{this.initialize(),setTimeout(()=>{this.msalService.ssoSilent(this.silentTokenRequest).subscribe({next:r=>T(this,null,function*(){yield this.msalInstance.initialize(),t.next(r)}),error:r=>T(this,null,function*(){console.log("before acquireTokenSilent",r),yield this.msalInstance.initialize(),this.msalService.acquireTokenPopup(this.silentTokenRequest).subscribe({next:o=>{t.next(o)},error:o=>{console.log("acquireTokenSilent error block",o),this.router.navigate(["/no-user-access"])}})})})},1e3)})}displayLogName(t){this.loginId=t}handleError(t){return cr(t.message||"Server Error")}static{this.\u0275fac=function(r){return new(r||n)(X(vo),X(_t),X(ac,8),X(si))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),HS=(()=>{class n{static forRoot(t,r){return{ngModule:n,providers:[vo,fC,hC,rp,{provide:si,useValue:t},{provide:ac,useValue:r},{provide:np,useFactory:function(){return{interactionType:re.Redirect,authRequest:{scopes:[...r.scopes]},loginFailedRoute:"/no-user-access"}}}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Zt({type:n})}static{this.\u0275inj=Qt({imports:[En,VS]})}}return n})();var jn=class n{static API_HOST_ROOT_DEV="https://dgmvp-api.dev.edonpdms.cld1np.thehartford.com/";static API_HOST_ROOT_QA="";static API_HOST_ROOT_PROD="";static AUTH_AZURE_CLIENTID_DEV="064088b8-3b21-4945-a3ea-96113971dac8";static AUTH_AZURE_CLIENTID_QA="";static AUTH_AZURE_CLIENTID_PROD="";static AUTH_AZURE_AUTHORITY="https://login.microsoftonline.com/a311fc62-83f4-45f0-9502-1bb2247d4c8d/oauth2/v2.0/authorize";static AUTH_APIC_CLIENTID="064088b8-3b21-4945-a3ea-96113971dac8";static AUTH_APIC_CLIENTID_DEV="";static AUTH_APIC_CLIENTID_QA="";static AUTH_APIC_CLIENTID_PROD="";static MSAL_TIMEOUT=3599e3;static get API_HOST_ROOT(){switch(n.getHostEnv()){case"DEV":return n.API_HOST_ROOT_DEV;case"QA":return n.API_HOST_ROOT_QA;case"PROD":return n.API_HOST_ROOT_PROD;case"localhost":return"/api";default:return n.API_HOST_ROOT_DEV}}static get AUTH_AZURE_CLIENTID(){switch(n.getHostEnv()){case"DEV":return n.AUTH_AZURE_CLIENTID_DEV;case"QA":return n.AUTH_AZURE_CLIENTID_QA;case"PROD":return n.AUTH_AZURE_CLIENTID_PROD;default:return n.AUTH_AZURE_CLIENTID_DEV}}static getHostEnv(e){let t=window.location.hostname||"";return e&&(t=e),t==="localhost"?t:(t=t.split(/[.-]/)[1]||"",["dev","qa","prod"].includes(t)?t.toUpperCase():"DEV")}static msalConfig(){return{auth:{clientId:n.AUTH_AZURE_CLIENTID,authority:n.AUTH_AZURE_AUTHORITY,redirectUri:window.location.origin},cache:{cacheLocation:lt.LocalStorage,storeAuthStateInCookie:!1},system:{allowNativeBroker:!1}}}};var wC=FC(jS()),qS=FC($S());var Ht=[];for(let n=0;n<256;++n)Ht.push((n+256).toString(16).slice(1));function GS(n,e=0){return(Ht[n[e+0]]+Ht[n[e+1]]+Ht[n[e+2]]+Ht[n[e+3]]+"-"+Ht[n[e+4]]+Ht[n[e+5]]+"-"+Ht[n[e+6]]+Ht[n[e+7]]+"-"+Ht[n[e+8]]+Ht[n[e+9]]+"-"+Ht[n[e+10]]+Ht[n[e+11]]+Ht[n[e+12]]+Ht[n[e+13]]+Ht[n[e+14]]+Ht[n[e+15]]).toLowerCase()}var vC,eF=new Uint8Array(16);function yC(){if(!vC){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");vC=crypto.getRandomValues.bind(crypto)}return vC(eF)}var tF=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),CC={randomUUID:tF};function nF(n,e,t){if(CC.randomUUID&&!e&&!n)return CC.randomUUID();n=n||{};let r=n.random||(n.rng||yC)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(let o=0;o<16;++o)e[t+o]=r[o];return e}return GS(r)}var Cu=nF;var ai=class n{constructor(e,t){this.http=e;this.router=t;let r=JSON.parse(localStorage.getItem("currentUser")||"{}");this.currentUserSubject=new pt(r),this.currentUser=this.currentUserSubject.asObservable()}userId;sessionID;lineageFileCreationSessionID;userName;currentUserSubject;currentUser;generateUUID(){return Cu()}get currentUserValue(){return this.currentUserSubject.value}SSOlogin(){this.sessionID=this.generateUUID();let e=this.getUsernameFromSessionStorage();return console.log("SSOlogin - username:",e),{userSessionId:this.sessionID,username:e}}getUsernameFromSessionStorage(){let e=sessionStorage.getItem("username")||"";return console.log("getUsernameFromSessionStorage - username:",e),e}login(e,t){return this.http.get("assets/user.json").pipe(me(r=>{let o=r.find(i=>i.user===e&&i.password===t);if(o)return this.userId=o.id.toString(),this.userName=o.user,this.sessionID=this.generateUUID(),this.router.navigate(["/home"]),o.authdata=window.btoa(e+":"+t),localStorage.setItem("currentUser",JSON.stringify(o)),sessionStorage.setItem("username",o.user),sessionStorage.setItem("isSSOLogin","false"),this.currentUserSubject.next(o),o;throw new Error("Invalid username or password")}))}logout(){sessionStorage.removeItem("currentUser"),this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||n)(X(Di),X(_t))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};var Rr=class n{constructor(e,t){this.http=e;this.authenticationService=t;window.addEventListener("beforeunload",this.clearSessionStorage.bind(this))}userId;userName;loginSessionID;functionality;lineageFileCreationSessionID;connectionURL="assets/connection.json";clearSessionStorage(e){sessionStorage.clear()}downloadFile(e){return this.http.get(e,{responseType:"blob"})}uploadFile(e,t){this.userId=this.authenticationService.userId,this.userName=this.getUsernameBasedOnLoginMethod(),this.loginSessionID=this.authenticationService.sessionID,this.lineageFileCreationSessionID=this.authenticationService.lineageFileCreationSessionID;let r=new Date().toISOString(),o=new FormData;o.append("login_session_id",this.loginSessionID),o.append("timestamp",r),o.append("username",this.userName),o.append("file_data",e,e.name),o.append("functionality",t?"TRANSFORMATION_FILES_CREATION":"LINEAGE_CREATION");let i=this.createFunctionalitySessionID();return o.append("functionality_session_id",i),this.isSSOLogin()||o.append("user_id",this.userId),this.http.post(jn.API_HOST_ROOT,o).pipe(Ut(s=>this.handleError(s)))}getUsernameBasedOnLoginMethod(){return sessionStorage.getItem("isSSOLogin")==="true"?sessionStorage.getItem("username")||"":this.authenticationService.userName||""}isSSOLogin(){return sessionStorage.getItem("isSSOLogin")==="true"}createFunctionalitySessionID(e=!1){let t=sessionStorage.getItem("functionalitySessionID");return t&&!e||(t=Cu(),sessionStorage.setItem("functionalitySessionID",t)),t}handleError(e){let t="An unknown error occurred!";return e.status===400?e.error&&typeof e.error=="string"?t=`Error 400: ${e.error}`:t="Error 400: Bad Request. Please check your file and try again.":e.status===504?t="Error 504: Gateway Timeout. The server took too long to respond. Please try again later.":e.status===502?t="Server error 502: Bad Gateway. Please try again later.":e.status>=500?t=`Server error ${e.status}: ${e.message}. Please try again later.`:t=`Error ${e.status}: ${e.message}`,cr(()=>new Error(t))}submitForm(e,t){this.userId=this.authenticationService.userId,this.userName=this.getUsernameBasedOnLoginMethod(),this.loginSessionID=this.authenticationService.sessionID,this.lineageFileCreationSessionID=this.authenticationService.lineageFileCreationSessionID;let r=new Date().toISOString(),o=new FormData;o.append("username",this.userName),o.append("file_data",t,t.name),o.append("functionality","LINEAGE_WITH_TRANSFORMATION_CREATION"),o.append("resource_name",e.resource_name),o.append("login_session_id",this.loginSessionID),o.append("lineage_file_creation_session_id",this.lineageFileCreationSessionID),o.append("timestamp",r);let i=this.createFunctionalitySessionID();return o.append("functionality_session_id",i),this.isSSOLogin()||o.append("user_id",this.userId),this.http.post(jn.API_HOST_ROOT,o).pipe(Ut(s=>this.handleError(s)))}submitJobForm(e){this.userId=this.authenticationService.userId,this.userName=this.getUsernameBasedOnLoginMethod(),this.loginSessionID=this.authenticationService.sessionID;let t=new FormData,r=new Date().toISOString();t.append("functionality","JOB_MONITORING");let o=this.createFunctionalitySessionID();return t.append("functionality_session_id",o),t.append("job_id",e.job_id),t.append("timestamp",r),t.append("username",this.userName),t.append("login_session_id",this.loginSessionID),this.isSSOLogin()||t.append("user_id",this.userId),this.http.post(jn.API_HOST_ROOT,t).pipe(Ut(i=>this.handleError(i)))}submitBusinessAssociationForm(e,t){this.userId=this.authenticationService.userId,this.userName=this.getUsernameBasedOnLoginMethod(),this.loginSessionID=this.authenticationService.sessionID;let r=new FormData,o=new Date().toISOString();r.append("file_data",t,t.name),r.append("timestamp",o),r.append("functionality","BUSINESS_TERMS_ASSOCIATION");let i=this.createFunctionalitySessionID();return r.append("functionality_session_id",i),r.append("sheet_name",e.sheet_selected),r.append("username",this.userName),r.append("login_session_id",this.loginSessionID),this.isSSOLogin()||r.append("user_id",this.userId),this.http.post(jn.API_HOST_ROOT,r).pipe(Ut(s=>this.handleError(s)))}submitBusinessTermsCreation(e,t){this.userId=this.authenticationService.userId,this.userName=this.getUsernameBasedOnLoginMethod(),this.loginSessionID=this.authenticationService.sessionID;let r=new FormData,o=new Date().toISOString();r.append("file_data",t,t.name),r.append("timestamp",o),r.append("functionality","BUSINESS_TERMS_CREATION_UPDATION");let i=this.createFunctionalitySessionID();return r.append("functionality_session_id",i),r.append("username",this.userName),r.append("login_session_id",this.loginSessionID),this.isSSOLogin()||r.append("user_id",this.userId),this.http.post(jn.API_HOST_ROOT,r).pipe(Ut(s=>this.handleError(s)))}downloadAndZipFile(e,t){let r=atob(e),o=new Uint8Array(r.length);for(let s=0;s<r.length;s++)o[s]=r.charCodeAt(s);if(o[0]===80&&o[1]===75){let s=new Blob([o],{type:"application/zip"});(0,wC.saveAs)(s,`${t}.zip`)}else{let s=new qS.default;s.file(`${t}.txt`,r),s.generateAsync({type:"blob"}).then(a=>{(0,wC.saveAs)(a,`${t}.zip`)})}}getOptions(){return this.http.get(this.connectionURL)}static \u0275fac=function(t){return new(t||n)(X(Di),X(ai))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};var ip=class n{constructor(e){this.uploadService=e}download(){this.uploadService.downloadFile("assets/lineageCreation.xlsm").subscribe(t=>{let r=window.URL.createObjectURL(t),o=document.createElement("a");o.href=r,o.download="UserInputTemplate.xlsm",document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(r)})}static \u0275fac=function(t){return new(t||n)(Te(Rr))};static \u0275cmp=Tt({type:n,selectors:[["app-template-file"]],standalone:!0,features:[Ot],decls:28,vars:0,consts:[[1,"container","my-5"],[1,"d-flex","justify-content-between"],[1,"flex-fill","mr-3","mainDiv","d-flex","align-items-center","justify-content-center",2,"border","none"],[1,"text-center",2,"font-family","'Roboto', sans-serif","color","#2c3e50"],[2,"font-size","32px","font-weight","700","color","#2980b9","margin-bottom","10px"],[2,"font-size","24px","font-style","italic","color","#8e44ad"],[1,"card","shadow-lg","flex-fill","ml-3","secondDiv"],[1,"card-header","bg-info","text-white","text-center"],[1,"card-body"],[2,"list-style-type","disc","padding-left","40px","font-family","'Roboto', sans-serif","color","#2c3e50","font-size","18px","line-height","1.6"],[2,"margin-bottom","10px"]],template:function(t,r){t&1&&(ie(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),ge(5,"Welcome to DEF Data Lineage Integration"),te(),ie(6,"p",5),ge(7,"Your gateway to seamless data lineage. Empower your journey with lineage tracking."),te()()(),ie(8,"div",6)(9,"div",7)(10,"h2"),ge(11,"Instructions"),te()(),ie(12,"div",8)(13,"ul",9)(14,"li",10),ge(15,"Provide the necessary database (DB name, host, port, username, password) where DEF data is stored and establish a connection."),te(),ie(16,"li",10),ge(17,"Select jobs for lineage creation by filtering through DB, schema, table, and jobID."),te(),ie(18,"li",10),ge(19,"If the selected resources are not scanned into IDMC, a popup will prompt to scan the resources."),te(),ie(20,"li",10),ge(21,"A downloadable mapping zip file based on the selected jobs will be available."),te(),ie(22,"li",10),ge(23,"Create a custom catalog in IDMC and upload the link file."),te(),ie(24,"li",10),ge(25,"Provide the custom catalog resource created in IDMC back to the application."),te(),ie(26,"li",10),ge(27,"Schedule the lineage creation process for the selected jobs."),te()()()()()())},styles:['.custom-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px;list-style-type:none;position:relative;padding-left:25px}.custom-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"";width:10px;height:10px;border-radius:50%;background-color:#3a5a78;position:absolute;left:0;top:50%;transform:translateY(-50%)}.card-header[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .btn-lg[_ngcontent-%COMP%]{font-size:1.2rem}.container[_ngcontent-%COMP%]{max-width:100%;margin:auto}.bg-primary[_ngcontent-%COMP%], .bg-info[_ngcontent-%COMP%]{background-color:#3a5a78!important}.card[_ngcontent-%COMP%]{box-shadow:0 4px 8px #0000001a;border-radius:10px}.card-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px}.card-text[_ngcontent-%COMP%]{font-size:16px;margin-bottom:20px}.btn[_ngcontent-%COMP%]{padding:10px 20px;font-size:16px}.btn-success[_ngcontent-%COMP%]:hover{color:#fff;background-color:#8da4b5;border-color:#3a5a78}.btn-success[_ngcontent-%COMP%]{color:#fff;background-color:#3a5a78;border-color:#3a5a78}.mainDiv[_ngcontent-%COMP%]{width:40%}.secondDiv[_ngcontent-%COMP%]{width:60%}@media only screen and (min-width: 360px) and (max-width: 768px){.d-flex[_ngcontent-%COMP%]{display:block!important}.mainDiv[_ngcontent-%COMP%]{width:auto!important}.secondDiv[_ngcontent-%COMP%]{width:auto!important;margin-top:3%;margin-left:0!important}}']})};var tA=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Te(Zs),Te(Ii))}}static{this.\u0275dir=ln({type:n})}}return n})(),nA=(()=>{class n extends tA{static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=Ws(n)))(o||n)}})()}static{this.\u0275dir=ln({type:n,features:[Vr]})}}return n})(),AC=new oe("");var rF={provide:AC,useExisting:wi(()=>hc),multi:!0};function oF(){let n=Gr()?Gr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var iF=new oe(""),hc=(()=>{class n extends tA{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!oF())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Te(Zs),Te(Ii),Te(iF,8))}}static{this.\u0275dir=ln({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&it("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},features:[zc([rF]),Vr]})}}return n})();function ci(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function rA(n){return n!=null&&typeof n.length=="number"}var oA=new oe(""),iA=new oe(""),sF=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,bu=class{static min(e){return aF(e)}static max(e){return cF(e)}static required(e){return lF(e)}static requiredTrue(e){return uF(e)}static email(e){return dF(e)}static minLength(e){return hF(e)}static maxLength(e){return fF(e)}static pattern(e){return pF(e)}static nullValidator(e){return sA(e)}static compose(e){return hA(e)}static composeAsync(e){return pA(e)}};function aF(n){return e=>{if(ci(e.value)||ci(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function cF(n){return e=>{if(ci(e.value)||ci(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function lF(n){return ci(n.value)?{required:!0}:null}function uF(n){return n.value===!0?null:{required:!0}}function dF(n){return ci(n.value)||sF.test(n.value)?null:{email:!0}}function hF(n){return e=>ci(e.value)||!rA(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function fF(n){return e=>rA(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function pF(n){if(!n)return sA;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ci(r.value))return null;let o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}function sA(n){return null}function aA(n){return n!=null}function cA(n){return Ti(n)?De(n):n}function lA(n){let e={};return n.forEach(t=>{e=t!=null?D(D({},e),t):e}),Object.keys(e).length===0?null:e}function uA(n,e){return e.map(t=>t(n))}function gF(n){return!n.validate}function dA(n){return n.map(e=>gF(e)?e:t=>e.validate(t))}function hA(n){if(!n)return null;let e=n.filter(aA);return e.length==0?null:function(t){return lA(uA(t,e))}}function fA(n){return n!=null?hA(dA(n)):null}function pA(n){if(!n)return null;let e=n.filter(aA);return e.length==0?null:function(t){let r=uA(t,e).map(cA);return Yp(r).pipe(me(lA))}}function gA(n){return n!=null?pA(dA(n)):null}function KS(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function mA(n){return n._rawValidators}function vA(n){return n._rawAsyncValidators}function _C(n){return n?Array.isArray(n)?n:[n]:[]}function cp(n,e){return Array.isArray(n)?n.includes(e):n===e}function WS(n,e){let t=_C(e);return _C(n).forEach(o=>{cp(t,o)||t.push(o)}),t}function YS(n,e){return _C(e).filter(t=>!cp(n,t))}var lp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=fA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=gA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},uc=class extends lp{get formDirective(){return null}get path(){return null}},Tu=class extends lp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},up=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},mF={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},z7=J(D({},mF),{"[class.ng-submitted]":"isSubmitted"}),gp=(()=>{class n extends up{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Te(Tu,2))}}static{this.\u0275dir=ln({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&ah("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Vr]})}}return n})(),mp=(()=>{class n extends up{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Te(uc,10))}}static{this.\u0275dir=ln({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){r&2&&ah("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[Vr]})}}return n})();var Eu="VALID",sp="INVALID",cc="PENDING",wu="DISABLED",li=class{},dp=class extends li{constructor(e,t){super(),this.value=e,this.source=t}},_u=class extends li{constructor(e,t){super(),this.pristine=e,this.source=t}},Iu=class extends li{constructor(e,t){super(),this.touched=e,this.source=t}},lc=class extends li{constructor(e,t){super(),this.status=e,this.source=t}},IC=class extends li{constructor(e){super(),this.source=e}},bC=class extends li{constructor(e){super(),this.source=e}};function DC(n){return(vp(n)?n.validators:n)||null}function vF(n){return Array.isArray(n)?fA(n):n||null}function MC(n,e){return(vp(e)?e.asyncValidators:n)||null}function yF(n){return Array.isArray(n)?gA(n):n||null}function vp(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function yA(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new ue(1e3,"");if(!r[t])throw new ue(1001,"")}function CA(n,e,t){n._forEachChild((r,o)=>{if(t[o]===void 0)throw new ue(1002,"")})}var dc=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=$c(()=>this.statusReactive()),this.statusReactive=Hc(void 0),this._pristine=$c(()=>this.pristineReactive()),this.pristineReactive=Hc(!0),this._touched=$c(()=>this.touchedReactive()),this.touchedReactive=Hc(!1),this._events=new ft,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return zr(this.statusReactive)}set status(e){zr(()=>this.statusReactive.set(e))}get valid(){return this.status===Eu}get invalid(){return this.status===sp}get pending(){return this.status==cc}get disabled(){return this.status===wu}get enabled(){return this.status!==wu}get pristine(){return zr(this.pristineReactive)}set pristine(e){zr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return zr(this.touchedReactive)}set touched(e){zr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(WS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(WS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(YS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(YS(e,this._rawAsyncValidators))}hasValidator(e){return cp(this._rawValidators,e)}hasAsyncValidator(e){return cp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(J(D({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Iu(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Iu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(J(D({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new _u(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new _u(!0,r))}markAsPending(e={}){this.status=cc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new lc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(J(D({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=wu,this.errors=null,this._forEachChild(o=>{o.disable(J(D({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new dp(this.value,r)),this._events.next(new lc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(J(D({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Eu,this._forEachChild(r=>{r.enable(J(D({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(J(D({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Eu||this.status===cc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new dp(this.value,t)),this._events.next(new lc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(J(D({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?wu:Eu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=cc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=cA(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new lc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new wt,this.statusChanges=new wt}_calculateStatus(){return this._allControlsDisabled()?wu:this.errors?sp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(cc)?cc:this._anyControlsHaveStatus(sp)?sp:Eu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),o=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),o&&this._events.next(new _u(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Iu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){vp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=vF(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=yF(this._rawAsyncValidators)}},hp=class extends dc{constructor(e,t,r){super(DC(t),MC(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){CA(this,!0,e),Object.keys(e).forEach(r=>{yA(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e?e[o]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,i)=>{r=t(r,o,i)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var TC=class extends hp{};var RC=new oe("CallSetDisabledState",{providedIn:"root",factory:()=>yp}),yp="always";function CF(n,e){return[...e.path,n]}function QS(n,e,t=yp){kC(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),wF(n,e),IF(n,e),_F(n,e),EF(n,e)}function ZS(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),pp(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function fp(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function EF(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function kC(n,e){let t=mA(n);e.validator!==null?n.setValidators(KS(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=vA(n);e.asyncValidator!==null?n.setAsyncValidators(KS(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let o=()=>n.updateValueAndValidity();fp(e._rawValidators,o),fp(e._rawAsyncValidators,o)}function pp(n,e){let t=!1;if(n!==null){if(e.validator!==null){let o=mA(n);if(Array.isArray(o)&&o.length>0){let i=o.filter(s=>s!==e.validator);i.length!==o.length&&(t=!0,n.setValidators(i))}}if(e.asyncValidator!==null){let o=vA(n);if(Array.isArray(o)&&o.length>0){let i=o.filter(s=>s!==e.asyncValidator);i.length!==o.length&&(t=!0,n.setAsyncValidators(i))}}}let r=()=>{};return fp(e._rawValidators,r),fp(e._rawAsyncValidators,r),t}function wF(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&EA(n,e)})}function _F(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&EA(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function EA(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function IF(n,e){let t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function bF(n,e){n==null,kC(n,e)}function TF(n,e){return pp(n,e)}function SF(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function AF(n){return Object.getPrototypeOf(n.constructor)===nA}function DF(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function MF(n,e){if(!e)return null;Array.isArray(e);let t,r,o;return e.forEach(i=>{i.constructor===hc?t=i:AF(i)?r=i:o=i}),o||r||t||null}function RF(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function JS(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function XS(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var ap=class extends dc{constructor(e=null,t,r){super(DC(t),MC(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),vp(t)&&(t.nonNullable||t.initialValueIsDefault)&&(XS(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){JS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){JS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){XS(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var kF=n=>n instanceof ap;var Cp=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=ln({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),NF={provide:AC,useExisting:wi(()=>NC),multi:!0},NC=(()=>{class n extends nA{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=Ws(n)))(o||n)}})()}static{this.\u0275dir=ln({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,o){r&1&&it("input",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},features:[zc([NF]),Vr]})}}return n})();var wA=new oe("");var xF={provide:uc,useExisting:wi(()=>Su)},Su=(()=>{class n extends uc{get submitted(){return zr(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,o){super(),this.callSetDisabledState=o,this._submitted=$c(()=>this._submittedReactive()),this._submittedReactive=Hc(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new wt,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(pp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return QS(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ZS(t.control||null,t,!1),RF(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),DF(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new IC(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new bC(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,o=this.form.get(t.path);r!==o&&(ZS(r||null,t),kF(o)&&(QS(o,t,this.callSetDisabledState),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);bF(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&TF(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){kC(this.form,this),this._oldForm&&pp(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(r){return new(r||n)(Te(oA,10),Te(iA,10),Te(RC,8))}}static{this.\u0275dir=ln({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,o){r&1&&it("submit",function(s){return o.onSubmit(s)})("reset",function(){return o.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[zc([xF]),Vr,_i]})}}return n})();var OF={provide:Tu,useExisting:wi(()=>Au)},Au=(()=>{class n extends Tu{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,o,i,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new wt,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=MF(this,i)}ngOnChanges(t){this._added||this._setUpControl(),SF(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return CF(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(Te(uc,13),Te(oA,10),Te(iA,10),Te(AC,10),Te(wA,8))}}static{this.\u0275dir=ln({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[zc([OF]),Vr,_i]})}}return n})();var _A=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Zt({type:n})}static{this.\u0275inj=Qt({})}}return n})(),SC=class extends dc{constructor(e,t,r){super(DC(t),MC(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let o=this._adjustIndex(e);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),t&&(this.controls.splice(o,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){CA(this,!1,e),e.forEach((r,o)=>{yA(this,!1,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function eA(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Ep=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let o=this._reduceControls(t),i={};return eA(r)?i=r:r!==null&&(i.validators=r.validator,i.asyncValidators=r.asyncValidator),new hp(o,i)}record(t,r=null){let o=this._reduceControls(t);return new TC(o,r)}control(t,r,o){let i={};return this.useNonNullable?(eA(r)?i=r:(i.validators=r,i.asyncValidators=o),new ap(t,J(D({},i),{nonNullable:!0}))):new ap(t,r,o)}array(t,r,o){let i=t.map(s=>this._createControl(s));return new SC(i,r,o)}_reduceControls(t){let r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){if(t instanceof ap)return t;if(t instanceof dc)return t;if(Array.isArray(t)){let r=t[0],o=t.length>1?t[1]:null,i=t.length>2?t[2]:null;return this.control(r,o,i)}else return this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var IA=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:RC,useValue:t.callSetDisabledState??yp}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Zt({type:n})}static{this.\u0275inj=Qt({imports:[_A]})}}return n})(),wp=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:wA,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:RC,useValue:t.callSetDisabledState??yp}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Zt({type:n})}static{this.\u0275inj=Qt({imports:[_A]})}}return n})();var _p=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Tt({type:n,selectors:[["app-download-file"]],standalone:!0,features:[Ot],decls:39,vars:0,consts:[[1,"container"],[1,"d-flex","justify-content-between"],[1,"card","shadow-lg","flex-fill","mr-3","mainDiv"],[1,"card-header","bg-primary","text-white"],[1,"card-body","text-center"],["hukclass","btn-secondary btn-md","text","Download Template","type","button"],[1,"card","shadow-lg","flex-fill","ml-3","secondDiv"],[1,"card-header","bg-info","text-white"],[1,"card-body"],[1,"list-group"],[1,"list-group-item"],[1,"custom-list"],["role","alert",1,"alert","alert-warning","mt-4",2,"font-size","1rem","border-left","5px solid #ffc107","background-color","#fff3cd"]],template:function(t,r){t&1&&(ie(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),ge(5,"Download ZIP File"),te()(),ie(6,"div",4)(7,"p"),ge(8,"Your mapping zip file ready for download "),te(),Ye(9,"huk-button",5),te()(),ie(10,"div",6)(11,"div",7)(12,"h2"),ge(13,"Guidelines"),te()(),ie(14,"div",8)(15,"ul",9)(16,"li",10)(17,"strong"),ge(18,"Instructions on how to create a custom catalog and upload zip file"),te(),ie(19,"ul",11)(20,"li"),ge(21,"Navigate to Metadata Command Center."),te(),ie(22,"li"),ge(23,'Click on "New" on the left menu.'),te(),ie(24,"li"),ge(25,"Create a catalog source."),te(),ie(26,"li"),ge(27,'At the bottom, select the "Custom Catalog Source" option and provide a name.'),te(),ie(28,"li"),ge(29,"Upload the "),ie(30,"code"),ge(31,"links.csv"),te(),ge(32," zip file here."),te(),ie(33,"li"),ge(34,"Save and run this."),te()()()()()()()(),ie(35,"div",12)(36,"strong"),ge(37,"Note:"),te(),ge(38," Once you create the resource and upload the links file in IDMC, revert to the UI and provide the custom catalog resource name for it to be scheduled and monitored on an ongoing basis. "),te())},styles:['.custom-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px;list-style-type:none;position:relative;padding-left:25px}.custom-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"";width:10px;height:10px;border-radius:50%;background-color:#3a5a78;position:absolute;left:0;top:50%;transform:translateY(-50%)}.card-header[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .btn-lg[_ngcontent-%COMP%]{font-size:1.2rem}.container[_ngcontent-%COMP%]{max-width:100%;margin:auto}.bg-primary[_ngcontent-%COMP%], .bg-info[_ngcontent-%COMP%]{background-color:#3a5a78!important}.card[_ngcontent-%COMP%]{box-shadow:0 4px 8px #0000001a;border-radius:10px}.card-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px}.card-text[_ngcontent-%COMP%]{font-size:16px;margin-bottom:20px}.btn[_ngcontent-%COMP%]{padding:10px 20px;font-size:16px}.btn-success[_ngcontent-%COMP%]:hover{color:#fff;background-color:#8da4b5;border-color:#3a5a78}.btn-success[_ngcontent-%COMP%]{color:#fff;background-color:#3a5a78;border-color:#3a5a78}.mainDiv[_ngcontent-%COMP%]{width:40%}.secondDiv[_ngcontent-%COMP%]{width:60%}@media only screen and (min-width: 360px) and (max-width: 768px){.d-flex[_ngcontent-%COMP%]{display:block!important}.mainDiv[_ngcontent-%COMP%]{width:auto!important}.secondDiv[_ngcontent-%COMP%]{width:auto!important;margin-top:3%;margin-left:0!important}}']})};function PF(n,e){if(n&1){let t=bi();ie(0,"div",12)(1,"div",4)(2,"huk-select",13),jr("ngModelChange",function(o){St(t);let i=Je(2);return Ro(i.selectedConnection,o)||(i.selectedConnection=o),At(o)}),it("hukChange",function(){St(t);let o=Je(2);return At(o.onDropdownChange1())}),te()(),ie(3,"div",4)(4,"huk-select",14),jr("ngModelChange",function(o){St(t);let i=Je(2);return Ro(i.selectedDefTable,o)||(i.selectedDefTable=o),At(o)}),it("hukChange",function(){St(t);let o=Je(2);return At(o.onDropdownChange1())}),te()(),ie(5,"div",4)(6,"huk-multiselect-dropdown",15),jr("ngModelChange",function(o){St(t);let i=Je(2);return Ro(i.sourceTableOptions,o)||(i.sourceTableOptions=o),At(o)}),te()()()}if(n&2){let t=Je(2);ze(2),Ve("options",t.sourceDatabase),Hr("ngModel",t.selectedConnection),ze(2),Ve("options",t.sourceSchema),Hr("ngModel",t.selectedDefTable),ze(2),Hr("ngModel",t.sourceTableOptions),Ve("value",t.sourceTableOptions)}}function FF(n,e){if(n&1){let t=bi();ie(0,"div",12)(1,"div",4)(2,"huk-select",16),jr("ngModelChange",function(o){St(t);let i=Je(2);return Ro(i.defTableOptions,o)||(i.defTableOptions=o),At(o)}),it("hukChange",function(){St(t);let o=Je(2);return At(o.onDropdownChange1())}),te()(),ie(3,"div",4)(4,"huk-select",17),jr("ngModelChange",function(o){St(t);let i=Je(2);return Ro(i.defTableOptions,o)||(i.defTableOptions=o),At(o)}),it("hukChange",function(){St(t);let o=Je(2);return At(o.onDropdownChange1())}),te()(),ie(5,"div",4)(6,"huk-multiselect-dropdown",18),jr("ngModelChange",function(o){St(t);let i=Je(2);return Ro(i.defTableOptions,o)||(i.defTableOptions=o),At(o)}),te()(),ie(7,"div",4)(8,"huk-select",19),jr("ngModelChange",function(o){St(t);let i=Je(2);return Ro(i.defTableOptions,o)||(i.defTableOptions=o),At(o)}),it("hukChange",function(){St(t);let o=Je(2);return At(o.onDropdownChange1())}),te()()()}if(n&2){let t=Je(2);ze(2),Ve("options",t.targetDatabase),Hr("ngModel",t.defTableOptions),ze(2),Ve("options",t.targetSchema),Hr("ngModel",t.defTableOptions),ze(2),Hr("ngModel",t.defTableOptions),Ve("value",t.targetTable),ze(2),Ve("options",t.jobIdOptions),Hr("ngModel",t.defTableOptions)}}function LF(n,e){if(n&1){let t=bi();ie(0,"div",7)(1,"button",8),it("click",function(){St(t);let o=Je(2);return At(o.selectAll())}),ge(2,"Select All"),te(),ie(3,"button",8),it("click",function(){St(t);let o=Je(2);return At(o.deSelectAll())}),ge(4,"Deselect All"),te()()}if(n&2){let t=Je(2);ze(),Ve("disabled",t.disableButton),ze(2),Ve("disabled",t.disableButton)}}function UF(n,e){n&1&&Ye(0,"img",20)}function BF(n,e){if(n&1){let t=bi();ie(0,"div",3)(1,"div",4)(2,"h3"),ge(3,"Filter By:"),te()(),ie(4,"div",5)(5,"div",4)(6,"huk-select",6),it("hukChange",function(o){St(t);let i=Je();return At(i.onDropdownChange(o))}),te()()(),ie(7,"div",7)(8,"button",8),it("click",function(){St(t);let o=Je();return At(o.toggleSelectRows("include"))}),ge(9,"Include / Exclude Src Table - Trgt Table Mapping "),te()(),Cn(10,PF,7,6,"div",9)(11,FF,9,8,"div",9)(12,LF,5,2,"div",10),ie(13,"div"),Cn(14,UF,1,0,"img",11),te()()}if(n&2){let t=Je();ze(6),Ve("options",t.connectionOptions),ze(2),Ve("disabled",t.disable),ze(2),Ve("ngIf",t.showSelectRows),ze(),Ve("ngIf",t.showSelectRows),ze(),Ve("ngIf",t.showSelectRows),ze(2),Ve("ngIf",t.show)}}function VF(n,e){n&1&&(ie(0,"div",21),Ye(1,"app-download-file"),te())}var Ip=class n{constructor(e,t){this.uploadService=e;this.router=t}form;show=!1;isDropdownSelected=!1;connectionOptions=[{name:"CONNECTION 1",value:"CONNECTION 1"},{name:"CONNECTION 2",value:"CONNECTION 2"},{name:"CONNECTION 3",value:"CONNECTION 3"},{name:"CONNECTION 4",value:"CONNECTION 4"}];disable=!0;disableButton=!0;hidden=!1;sourceDatabase=[{name:"Source Database 1",value:"Source Database 1"},{name:"Source Database 2",value:"Source Database 2"},{name:"Source Database 3",value:"Source Database 3"},{name:"Source Database 4",value:"Source Database 4"}];sourceSchema=[{name:"Source Schema 1",value:"Source Schema 1"},{name:"Source Schema 2",value:"Source Schema 2"},{name:"Source Schema 3",value:"Source Schema 3"},{name:"Source Schema 4",value:"Source Schema 4"}];sourceTableOptions=[{name:"Source Table 1",value:"Source table1"},{name:"Source Table 2",value:"Source table2"},{name:"Source Table 3",value:"Source table3"},{name:"Source Table 4",value:"Source table4"}];targetDatabase=[{name:"Target Database 1",value:"Target Database 1"},{name:"Target Database 2",value:"Target Database 2"},{name:"Target Database 3",value:"Target Database 3"},{name:"Target Database 4",value:"Target Database 4"}];targetSchema=[{name:"Target Schema 1",value:"Target Schema 1"},{name:"Target Schema 2",value:"Target Schema 2"},{name:"Target Schema 3",value:"Target Schema 3"},{name:"Target Schema 4",value:"Target Schema 4"}];targetTable=[{name:"Target Table 1",value:"Target Table 1"},{name:"Target Table 2",value:"Target Table 2"},{name:"Target Table 3",value:"Target Table 3"},{name:"Target Table 4",value:"Target Table 4"}];jobIdOptions=[{name:"Job Id 1",value:"job1"},{name:"Job Id 2",value:"job2"},{name:"Job Id 3",value:"job3"},{name:"Job Id 4",value:"job4"}];defTableOptions=[{name:"Table 1",value:"table1"},{name:"Table 2",value:"table2"},{name:"Table 3",value:"table3"},{name:"Table 4",value:"table4"}];selectedConnection="";selectedDefTable="";showSelectRows=!1;toggleSelectRows(e){e==="include"?this.showSelectRows=!0:e==="exclude"&&(this.showSelectRows=!1)}onDropdownChange(e){console.log("Dropdown changed:",e.detail);let t=e.detail;this.selectedConnection=t,this.disable=!this.selectedConnection}onDropdownChange1(){console.log("selectedConnection:",this.selectedConnection),console.log("selectedDefTable:",this.selectedDefTable),console.log("sourceTableOptions:",this.sourceTableOptions),console.log("targetDatabase:",this.targetDatabase),console.log("targetSchema:",this.targetSchema),console.log("targetTable:",this.targetTable),console.log("jobIdOptions:",this.jobIdOptions);let e=this.selectedConnection&&this.selectedDefTable&&this.sourceTableOptions.length>0&&this.targetDatabase.length>0&&this.targetSchema.length>0&&this.targetTable.length>0&&this.jobIdOptions.length>0;console.log("shouldDisableButtons:",e),this.disableButton=!1}selectAll(){this.show=!0,this.hidden=!0}deSelectAll(){console.log("deSelectAll called")}shouldDisableButtons(){debugger;return!this.showSelectRows||this.disable}options;ngOnInit(){this.uploadService.getOptions().subscribe(e=>{console.log(e),this.options=e})}static \u0275fac=function(t){return new(t||n)(Te(Rr),Te(_t))};static \u0275cmp=Tt({type:n,selectors:[["app-catalog-resource-selection"]],standalone:!0,features:[Ot],decls:3,vars:2,consts:[[1,"centered-container"],["class","dropdown-container",4,"ngIf"],["style","margin-top: 5%;",4,"ngIf"],[1,"dropdown-container"],[1,"dropdown-wrapper"],[1,"dropdowns-horizontal"],["dropposition","bottom-left","nooptionaltext","","helpertextformat","text","label","DB Connection","labelformat","text","placeholder","Please Select","refresh","0","size","medium","formControlName","selectedConnection",3,"hukChange","options"],[1,"button-row"],["type","submit",1,"btn","btn-secondary",3,"click","disabled"],["class","select-row",4,"ngIf"],["class","button-row",4,"ngIf"],["src","assets/Dual Ring-1s-110px.gif","class","centre","alignment","justify-content","width","50","height","50","alt","Example Image",4,"ngIf"],[1,"select-row"],["dropposition","bottom-left","nooptionaltext","","helpertextformat","text","label","Source Database","labelformat","text","placeholder","Please Select","refresh","0","size","medium",3,"ngModelChange","hukChange","options","ngModel"],["dropposition","bottom-left","nooptionaltext","","helpertextformat","text","label","Source Schema","labelformat","text","placeholder","Please Select","refresh","0","size","medium",3,"ngModelChange","hukChange","options","ngModel"],["dropposition","bottom-left","helpertextformat","text","nooptionaltext","","label","Source Table","labelformat","text","placeholder","Please Select","refresh","0","size","medium","sortby","none","sortdirection","ascending",3,"ngModelChange","ngModel","value"],["dropposition","bottom-left","nooptionaltext","","helpertextformat","text","label","Target Database","labelformat","text","placeholder","Please Select","refresh","0","size","medium",3,"ngModelChange","hukChange","options","ngModel"],["dropposition","bottom-left","nooptionaltext","","helpertextformat","text","label","Target Schema","labelformat","text","placeholder","Please Select","refresh","0","size","medium",3,"ngModelChange","hukChange","options","ngModel"],["dropposition","bottom-left","helpertextformat","text","nooptionaltext","","label","Target Table","labelformat","text","placeholder","Please Select","refresh","0","size","medium","sortby","none","sortdirection","ascending",3,"ngModelChange","ngModel","value"],["dropposition","bottom-left","nooptionaltext","","helpertextformat","text","label","Job Id","labelformat","text","placeholder","Please Select","refresh","0","size","medium",3,"ngModelChange","hukChange","options","ngModel"],["src","assets/Dual Ring-1s-110px.gif","alignment","justify-content","width","50","height","50","alt","Example Image",1,"centre"],[2,"margin-top","5%"]],template:function(t,r){t&1&&(ie(0,"div",0),Cn(1,BF,15,6,"div",1)(2,VF,2,0,"div",2),te()),t&2&&(ze(),Ve("ngIf",!r.hidden),ze(),Ve("ngIf",r.hidden))},dependencies:[En,ko,_p],styles:[".centered-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:50vh;background-color:#f5f5f5}.dropdown-container[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:8px;box-shadow:0 4px 8px #0000001a}.dropdown-wrapper[_ngcontent-%COMP%]{margin-bottom:20px}.dropdowns-horizontal[_ngcontent-%COMP%]{display:flex;gap:20px}h3[_ngcontent-%COMP%]{margin-bottom:10px;font-size:1.2em;color:#333}.btn-secondary[_ngcontent-%COMP%], a.btn-secondary[_ngcontent-%COMP%]{background-color:#3a5a78;color:#fff;border:1px solid #3a5a78}.centre[_ngcontent-%COMP%]{display:block;margin:auto}",`.button-row[_ngcontent-%COMP%], .select-row[_ngcontent-%COMP%] {
    display: flex;
    gap: 10px; 

  }`]})};var bp=class n{constructor(e){this.http=e}apiUrl="assets/db.json";getDbDetails(){return this.http.get(this.apiUrl)}static \u0275fac=function(t){return new(t||n)(X(Di))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};function jF(n,e){if(n&1){let t=bi();ie(0,"div",2)(1,"h2",3),ge(2,"Get DB Details"),te(),ie(3,"form",4),it("ngSubmit",function(){St(t);let o=Je();return At(o.onSubmit())}),ie(4,"div",5)(5,"div",6),Ye(6,"huk-select",7),te()(),ie(7,"div",5)(8,"div",6),Ye(9,"huk-select",8),te()(),ie(10,"div",5)(11,"label",9),ge(12,"Port:"),te(),Ye(13,"input",10),te(),ie(14,"div",5)(15,"label",11),ge(16,"Username:"),te(),Ye(17,"input",12),te(),ie(18,"div",5)(19,"label",13),ge(20,"Password:"),te(),Ye(21,"input",14),te(),ie(22,"button",15),ge(23,"Establish Connection"),te()()()}if(n&2){let t=Je();ze(3),Ve("formGroup",t.form),ze(3),Ve("options",t.databaseOptions),ze(3),Ve("options",t.schemaOptions)}}function zF(n,e){n&1&&(ie(0,"div"),Ye(1,"app-catalog-resource-selection"),te())}var Tp=class n{constructor(e,t,r){this.dbDetailsService=e;this.fb=t;this.router=r}form;showLineageComponent=!1;show=!0;databaseOptions=[{name:"Database 1",value:"Database 1"},{name:"Database 2",value:"Database 2"},{name:"Database 3",value:"Database 3"},{name:"Database 4",value:"Database 4"}];schemaOptions=[{name:"Schema 1",value:"Schema 1"},{name:"Schema 2",value:"Schema 2"},{name:"Schema 3",value:"Schema 3"},{name:"Schema 4",value:"Schema 4"}];ngOnInit(){this.form=this.fb.group({databasename:[""],schema:[""],port:[""],username:[""],password:[""],connectionOptions:[""]})}onSubmit(){this.showLineageComponent=!0,this.show=!1}static \u0275fac=function(t){return new(t||n)(Te(bp),Te(Ep),Te(_t))};static \u0275cmp=Tt({type:n,selectors:[["app-initial-lob"]],standalone:!0,features:[Ot],decls:2,vars:2,consts:[["class","simple-form-container",4,"ngIf"],[4,"ngIf"],[1,"simple-form-container"],[1,"form-title"],[3,"ngSubmit","formGroup"],[1,"form-group"],[1,"dropdown-wrapper"],["dropposition","bottom-left","nooptionaltext","","helpertextformat","text","label","Select Database Name","labelformat","text","placeholder","Please Select Database","refresh","0","size","medium","formControlName","",3,"options"],["dropposition","bottom-left","nooptionaltext","","helpertextformat","text","label","Select Schema","labelformat","text","placeholder","Please Select Schema","refresh","0","size","medium","formControlName","",3,"options"],["for","port"],["id","port","type","number","formControlName","","placeholder","Enter port",1,"form-control"],["for","username"],["id","username","type","text","formControlName","","placeholder","Enter username",1,"form-control"],["for","password"],["id","password","type","text","formControlName","","placeholder","Enter password",1,"form-control"],["type","submit",1,"btn","btn-secondary"]],template:function(t,r){t&1&&Cn(0,jF,24,3,"div",0)(1,zF,2,0,"div",1),t&2&&(Ve("ngIf",r.show),ze(),Ve("ngIf",r.showLineageComponent))},dependencies:[wp,Cp,hc,NC,gp,mp,Su,Au,Ip,En,ko],styles:[".simple-form-container[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;padding:20px;border:1px solid #ccc;border-radius:10px;box-shadow:0 0 10px #0000001a;background-color:#f9f9f9}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff;color:#fff;padding:10px 20px;border-radius:5px;cursor:pointer}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.mt-3[_ngcontent-%COMP%]{margin-top:15px}.mt-3[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:green;font-weight:700}.btn-secondary[_ngcontent-%COMP%], a.btn-secondary[_ngcontent-%COMP%]{background-color:#3a5a78;color:#fff;border:1px solid #3a5a78}"]})};function $F(n,e){n&1&&Ye(0,"app-template-file")}function GF(n,e){n&1&&Ye(0,"app-template-file")}function qF(n,e){n&1&&Ye(0,"app-initial-lob")}var Sp=class n{constructor(e,t){this.authenticationService=e;this.uploadService=t}title="Home Page";userId;navigateComponent="templateFile";logout(){this.authenticationService.logout()}currentComponent="";showComponent(e){e.detail.id!==this.navigateComponent&&(this.navigateComponent=e.detail.id)}static \u0275fac=function(t){return new(t||n)(Te(ai),Te(Rr))};static \u0275cmp=Tt({type:n,selectors:[["app-home"]],standalone:!0,features:[Ot],decls:5,vars:3,consts:[["mobilemenu","","navtitle","HUK","primarynavalert",`y
{"text":"","noAlertsMessage":""}`,"primarynavlogolink",'{"id":"logo-link","href":"#"}',"primarynavright",'[{"id":"help","dropdown":"Help","icon":"questions","href":"#"},{"id":"my-account","dropdown":"My Account","icon":"user","href":"#","links":[{"id":"Logout","link":"Logout","href":"#"}]}]',"secondarynav",`[
{"id":"home","dropdown":"Home","active":true},
{"id":"initailLOB","dropdown":"Initial LOB Onboarding","active":true},
{"id":"postlob","dropdown":"Post-LOB Onboarding","active":true} ,
{"id":"returnjob","dropdown":"Rerun Job","active":true},
{"id":"jobstatus","dropdown":"Job Status","active":true}]`,3,"hukNavClick"],[1,"selectcomponent"],[4,"ngIf"]],template:function(t,r){t&1&&(ie(0,"huk-header",0),it("hukNavClick",function(i){return r.showComponent(i)}),te(),ie(1,"div",1),Cn(2,$F,1,0,"app-template-file",2)(3,GF,1,0,"app-template-file",2)(4,qF,1,0,"app-initial-lob",2),te()),t&2&&(ze(2),Ve("ngIf",r.navigateComponent=="templateFile"),ze(),Ve("ngIf",r.navigateComponent=="home"),ze(),Ve("ngIf",r.navigateComponent=="initailLOB"))},dependencies:[zh,En,ko,ip,Tp],styles:[".menu[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;justify-content:center}header[_ngcontent-%COMP%]{height:70px;padding:0 30px;background-color:#3a5a78;position:sticky;z-index:100;box-shadow:1px 1px 15px #a1b6fdd2;display:flex;justify-content:normal;align-items:center}.selectcomponent[_ngcontent-%COMP%]{width:100%}.message[_ngcontent-%COMP%]{gap:40px;position:relative;cursor:pointer}@media (max-width: 768px){.button-container[_ngcontent-%COMP%]{grid-template-columns:1fr;padding-left:10%;padding-top:2%}huk-button[_ngcontent-%COMP%]{max-width:100%}}.menu-width[_ngcontent-%COMP%]{margin-left:auto;padding:10px}.main[_ngcontent-%COMP%]{height:calc(100vh - 70px);width:100%;overflow-y:scroll;overflow-x:hidden;padding:40px 30px 30px}.main[_ngcontent-%COMP%]{display:flex}@media only screen and (min-width: 360px) and (max-width: 768px){.main[_ngcontent-%COMP%]{display:block}}"]})};var Ap=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Tt({type:n,selectors:[["app-no-user"]],standalone:!0,features:[Ot],decls:10,vars:0,consts:[[1,"container","mt-5"],[1,"d-flex","align-items-center","justify-content-center","text-center","prompt-title","pb-3"],["role","alert",1,"alert","alert-danger","shadow-lg","p-4","rounded",2,"max-width","600px","background-color","#f8d7da","color","#721c24"],[1,"alert-heading",2,"font-size","1.5rem"],[2,"font-size","1.2rem"],[1,"mb-0",2,"font-size","1rem"]],template:function(t,r){t&1&&(ie(0,"main",0)(1,"div",1)(2,"div",2)(3,"h4",3),ge(4,"Access Denied"),te(),ie(5,"p",4),ge(6,"You do not have the necessary permissions to access this tool."),te(),Ye(7,"hr"),ie(8,"p",5),ge(9,"If you believe this is an error, please contact your manager."),te()()()())}})};function KF(n,e){n&1&&(ie(0,"div",18),ge(1," Username is required "),te())}function WF(n,e){n&1&&(ie(0,"div",18),ge(1," Password is required "),te())}function YF(n,e){if(n&1&&(ie(0,"div",19),ge(1),te()),n&2){let t=Je();ze(),Vm(t.error)}}var Dp=class n{constructor(e,t,r,o,i,s){this.formBuilder=e;this.route=t;this.router=r;this.uploadService=o;this.authenticationService=i;this.authServices=s;this.authenticationService.currentUserValue&&this.router.navigate(["/"])}loginForm;userId;username;isSSOLogin=!1;loading=!1;submitted=!1;returnUrl;error="";loginData={user:"",password:""};ngOnInit(){this.loginForm=this.formBuilder.group({username:["",bu.required],password:["",bu.required]}),this.userId=this.authenticationService.userId,this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/",this.username=this.getUsernameBasedOnLoginMethod(),console.log("username on init",this.username)}getUsernameBasedOnLoginMethod(){return sessionStorage.getItem("isSSOLogin")==="true"?sessionStorage.getItem("username")||"":this.authenticationService.userName||""}loginWithSSO(){let{userSessionId:e,username:t}=this.authenticationService.SSOlogin(),r=this.authenticationService.currentUserValue,o={userSessionId:e,username:t,userId:r.id};console.log("payload before API call",o),console.log("username before API call",t),this.authServices.getUserAuth().subscribe(i=>{if(i){sessionStorage.setItem("accessToken",i.accessToken);let s=Date.now()+jn.MSAL_TIMEOUT,a=new Date(s).toString(),c=Date.parse(a);sessionStorage.setItem("expiryTime",c.toString()),sessionStorage.setItem("username",i.account?.username),sessionStorage.setItem("isSSOLogin","true"),this.router.navigate(["/home"])}else this.error="SSO login failed"},i=>{this.error="SSO login failed"})}submit(){if(this.loginForm.invalid)return;let{username:e,password:t}=this.loginForm.value;this.authenticationService.login(e,t).subscribe(r=>{this.router.navigate(["/home"])},r=>{this.error="Invalid username or password"})}static \u0275fac=function(t){return new(t||n)(Te(Ep),Te(Zr),Te(_t),Te(Rr),Te(ai),Te(fC))};static \u0275cmp=Tt({type:n,selectors:[["app-login"]],standalone:!0,features:[Ot],decls:27,vars:4,consts:[["lang","en"],[1,"logosec"],["src","assets/getsitelogo.png","alt","Data Governance Logo"],[1,"col-md-6","offset-md-3","mt-5"],[1,"card",2,"border-color","#3a5a78"],[1,"card-header","text-white",2,"background-color","#3a5a78"],[1,"card-body"],[3,"formGroup"],[1,"form-group"],["for","username"],["type","text","formControlName","username",1,"form-control"],["class","alert alert-danger validation",4,"ngIf"],["for","password"],["type","password","formControlName","password",1,"form-control"],[1,"d-flex","justify-content-between"],["type","submit",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],["class","alert alert-danger mt-3 mb-0",4,"ngIf"],[1,"alert","alert-danger","validation"],[1,"alert","alert-danger","mt-3","mb-0"]],template:function(t,r){if(t&1&&(ie(0,"html",0)(1,"body")(2,"header")(3,"div",1),Ye(4,"img",2),te()(),ie(5,"div",3)(6,"div",4)(7,"h4",5),ge(8,"Login Form"),te(),ie(9,"div",6)(10,"form",7)(11,"div",8)(12,"label",9),ge(13,"Username"),te(),Ye(14,"input",10),Cn(15,KF,2,0,"div",11),te(),ie(16,"div",8)(17,"label",12),ge(18,"Password"),te(),Ye(19,"input",13),Cn(20,WF,2,0,"div",11),te(),ie(21,"div",14)(22,"button",15),it("click",function(){return r.submit()}),ge(23,"Login"),te(),ie(24,"button",16),it("click",function(){return r.loginWithSSO()}),ge(25,"Login with SAML SSO"),te()(),Cn(26,YF,2,1,"div",17),te()()()()()()),t&2){let o,i;ze(10),Ve("formGroup",r.loginForm),ze(5),Ve("ngIf",((o=r.loginForm.get("username"))==null?null:o.invalid)&&((o=r.loginForm.get("username"))==null?null:o.touched)),ze(5),Ve("ngIf",((i=r.loginForm.get("password"))==null?null:i.invalid)&&((i=r.loginForm.get("password"))==null?null:i.touched)),ze(6),Ve("ngIf",r.error)}},dependencies:[wp,Cp,hc,gp,mp,Su,Au,En,ko,zh,IA],styles:[".validation[_ngcontent-%COMP%]{margin-top:3px}.menu[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;justify-content:center}.menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 15px}.menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-weight:700}.menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.textAdjustment[_ngcontent-%COMP%]{margin:60px;text-align:center}header[_ngcontent-%COMP%]{height:70px;width:100vw;padding:0 30px;background-color:#3a5a78;position:sticky;z-index:100;box-shadow:1px 1px 15px #a1b6fdd2;display:flex;justify-content:normal;align-items:center}.logo[_ngcontent-%COMP%]{font-size:27px;font-weight:600;color:#2f8d46}.icn[_ngcontent-%COMP%]{height:30px}.menuicn[_ngcontent-%COMP%]{cursor:pointer}.searchbar[_ngcontent-%COMP%], .message[_ngcontent-%COMP%], .logosec[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.logosec[_ngcontent-%COMP%]{gap:60px}.btn-primary[_ngcontent-%COMP%]{background-color:#0067b8;border-color:#007bff;font-weight:500}.btn-secondary[_ngcontent-%COMP%]{background-color:#0067b8;font-weight:500;border-color:#007bff;color:#fff}.d-flex[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:10px}.d-flex[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:last-child{margin-right:0}"]})};function QF(){return new vu(jn.msalConfig())}var ZF={scopes:["api://064088b8-3b21-4945-a3ea-96113971dac8/objres.app.user"],forceRefresh:!1},TA=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"home",component:Sp},{path:"login",component:Dp},{path:"no-user-access",component:Ap}],SA={providers:[Hm({eventCoalescing:!0}),Wv(TA),Ob(),wh(),Hm({eventCoalescing:!0}),wh(_b()),$d(HS),$d(Ib),{provide:si,useFactory:QF},{provide:ac,useValue:ZF},vo,Wv(TA)]};var Mp=class n{title="Data Governance";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Tt({type:n,selectors:[["app-root"]],standalone:!0,features:[Ot],decls:1,vars:0,template:function(t,r){t&1&&Ye(0,"router-outlet")},dependencies:[zv]})};var JF=()=>UC(),AA=(n,e)=>typeof window>"u"?Promise.resolve():JF().then(()=>LC(JSON.parse('[["huk-table-xc",[[1,"huk-table-xc",{"caption":[1],"captionDescription":[1,"caption-description"],"collapsefade":[4],"collapsenumrows":[2],"gridlines":[4],"hoverhighlight":[4],"mobilebreakpoint":[2],"nodatamessage":[1],"refresh":[2],"striped":[4],"tablejson":[1025],"internalRefresh":[32],"numRows":[32],"tableSorted":[32]},[[0,"hukPopoverDisplay","handlePopoverDisplayed"],[9,"resize","checkWindowSize"]]]]],["huk-google-address",[[1,"huk-google-address",{"compact":[4],"disabled":[1540],"googleMapsApiKey":[1,"google-maps-api-key"],"hasAptField":[4,"has-apt-field"],"hasTwoLines":[4,"has-two-lines"],"netsensitive":[4],"nodisabledtext":[4],"nooptionaltext":[4],"required":[4],"requiredasterisk":[4],"size":[1],"statesmaxheight":[1]},[[8,"hukNetworkEvent","handleNetworkEvent"]]]]],["huk-paginator",[[1,"huk-paginator",{"activepage":[1538],"altmobileview":[4],"pages":[2],"pagesdisplayed":[2],"intPagesArray":[32],"pageClicked":[32],"screenMin":[32]},[[9,"resize","checkSize"]]]]],["huk-card",[[1,"huk-card",{"bluetop":[4],"hasheader":[4],"heading":[1],"iconheading":[1],"imageheading":[1],"leftheading":[1],"leftheadingformat":[1],"offset":[4],"padding":[1],"rightheading":[1],"rightheadingformat":[1],"theme":[1],"top":[4]}]]],["huk-checkbox-group",[[1,"huk-checkbox-group",{"altversion":[4],"datamissing":[1],"disabled":[1540],"eventinfo":[1],"grouplabel":[1],"horizontal":[4],"labelformat":[1],"netsensitive":[4],"nodisabledtext":[4],"nooptionaltext":[4],"nopadding":[4],"required":[4],"requiredasterisk":[4],"secondaryalt":[4],"showdatamissing":[4],"value":[1537],"verticalstacked":[4],"checkboxValuesArray":[32],"showErrMsg":[32],"setMessageText":[64]},[[8,"hukNetworkEvent","handleNetworkEvent"]]]]],["huk-checkbox-group-tile",[[1,"huk-checkbox-group-tile",{"alignment":[1],"datamissing":[1],"disabled":[1540],"eventinfo":[1],"grouplabel":[1],"labelformat":[1],"netsensitive":[4],"nodisabledtext":[4],"nooptionaltext":[4],"nopadding":[4],"required":[4],"requiredasterisk":[4],"showdatamissing":[4],"size":[1],"theme":[1],"tilewidth":[1],"value":[1537],"verticalstacked":[4],"checkboxTilesArray":[32],"screenMin":[32],"showErrMsg":[32],"setMessageText":[64]},[[8,"hukNetworkEvent","handleNetworkEvent"],[9,"resize","checkSize"]]]]],["huk-modal",[[1,"huk-modal",{"alert":[1],"arialabel":[1],"backgroundnoclose":[4],"closeicon":[4],"eventinfo":[1],"footerbuttons":[1],"headercenter":[4],"headertitle":[1],"hukid":[1],"iconclass":[1],"scrolling":[4],"size":[1],"verticalcenter":[4],"width":[1],"footerButtonsArray":[32],"modalOpened":[32],"screenMin":[32],"present":[64],"dismiss":[64]},[[0,"hukClick","handleHukClick"],[8,"hukOpenModal","handleHukOpenModal"],[4,"keydown","handleEscape"],[0,"hukModalFocus","handleHukModalFocusEvent"],[9,"resize","checkWindowSize"]]]]],["huk-radio-tile",[[1,"huk-radio-tile",{"alignment":[1],"datamissing":[1],"disabled":[1540],"eventinfo":[1],"grouplabel":[1],"labelformat":[1],"netsensitive":[4],"nodisabledtext":[4],"nooptionaltext":[4],"nopadding":[4],"options":[1],"required":[4],"requiredasterisk":[4],"showdatamissing":[4],"size":[1],"theme":[1],"tilewidth":[1],"value":[1537],"verticalstacked":[4],"radioOptionsArray":[32],"screenMin":[32],"showErrMsg":[32],"setMessageText":[64]},[[8,"hukNetworkEvent","handleNetworkEvent"],[9,"resize","checkSize"]]]]],["huk-timeline",[[1,"huk-timeline",{"eventinfo":[1],"steps":[1],"iSteps":[32],"stepBackward":[64],"stepForward":[64]}]]],["huk-checkbox-tile",[[1,"huk-checkbox-tile",{"disabled":[1540],"eventinfo":[1],"icon":[1025],"label":[1],"netsensitive":[4],"removable":[4],"size":[1],"theme":[1],"tilewidth":[1],"value":[1540]},[[8,"hukNetworkEvent","handleNetworkEvent"]]]]],["huk-file-upload",[[1,"huk-file-upload",{"acceptedfiles":[1],"btnclass":[1],"dropzoneproperties":[1],"eventinfo":[1],"headers":[1],"hukid":[1],"icon":[1],"maxFiles":[8,"max-files"],"noremovelinks":[4],"nothumbnail":[4],"paramName":[1,"param-name"],"timeout":[2],"url":[1]}]]],["huk-form-message",[[1,"huk-form-message",{"displayclose":[4],"type":[1],"showMessage":[32]}]]],["huk-foundation",[[1,"huk-foundation",{"header":[1]}]]],["huk-message",[[1,"huk-message",{"anchorNav":[1,"anchor-nav"],"displayClose":[1028,"display-close"],"faded":[1028],"heading":[1],"message":[1],"readmore":[4],"showAnchor":[4,"show-anchor"],"showTitle":[4,"show-title"],"type":[1],"isCollapsed":[32],"iShowComp":[32]}]]],["huk-multiselect-panel",[[1,"huk-multiselect-panel",{"arialabel":[1],"arialabelright":[1],"datamissing":[1],"disabled":[1540],"eventinfo":[1],"label":[1],"labelformat":[1],"labelright":[1],"labelrightformat":[1],"netsensitive":[4],"nodisabledtext":[4],"nooptionaltext":[4],"nopadding":[4],"refresh":[2],"required":[4],"requiredasterisk":[4],"showdatamissing":[4],"sortby":[1],"sortdirection":[1],"value":[1537],"iLeftPanelOptions":[32],"iRightPanelOptions":[32],"showIntErrMsg":[32]},[[8,"hukNetworkEvent","handleNetworkEvent"]]]]],["huk-panel",[[1,"huk-panel",{"btnclosetext":[1],"btnopentext":[1],"btnwidth":[2],"collapsible":[4],"expanded":[1540],"heading":[1],"icon":[1],"nocareticon":[4],"subpanel":[4],"theme":[1]}]]],["huk-progress-bar",[[1,"huk-progress-bar",{"activeStepIndex":[1026,"active-step-index"],"clickable":[4],"eventinfo":[1],"steps":[1],"theme":[1],"iSteps":[32],"stepBackward":[64],"stepForward":[64]}]]],["huk-radio-button",[[1,"huk-radio-button",{"datamissing":[1],"disabled":[1540],"eventinfo":[1],"grouplabel":[1],"iconclass":[1],"inputwidth":[1],"labelformat":[1],"netsensitive":[4],"nodisabledtext":[4],"nooptionaltext":[4],"nopadding":[4],"options":[1],"required":[4],"requiredasterisk":[4],"showdatamissing":[4],"theme":[1],"value":[1537],"verticalstacked":[4],"radioOptionsArray":[32],"showErrMsg":[32],"setMessageText":[64]},[[8,"hukNetworkEvent","handleNetworkEvent"]]]]],["huk-stepper",[[1,"huk-stepper",{"activeStepIndex":[1026,"active-step-index"],"checkmark":[4],"eventinfo":[1],"halocolor":[1],"refresh":[2],"steps":[1],"iRefresh":[32],"iSteps":[32],"stepBackward":[64],"stepForward":[64]}]]],["huk-tab",[[1,"huk-tab",{"disabled":[4],"active":[1028],"collapse":[1028],"maxheight":[1],"noPadding":[4,"no-padding"],"responsive":[4],"tabId":[1,"tab-id"],"tabNotification":[1,"tab-notification"],"tabTitle":[1,"tab-title"],"hideInAccordion":[32]}]]],["huk-table",[[1,"huk-table",{"caption":[1],"captionDescription":[1,"caption-description"],"collapsefade":[4],"collapsenumrows":[2],"gridlines":[4],"hoverhighlight":[4],"nodatamessage":[1],"striped":[4],"tablejson":[1],"isMobile":[32],"numRows":[32],"tableSorted":[32]},[[9,"resize","checkWindowSize"]]]]],["huk-tabs",[[1,"huk-tabs",{"activeTabId":[1,"active-tab-id"],"eventinfo":[1],"noautoswitch":[4],"refresh":[2],"responsive":[4],"tabwidth":[2],"theme":[1],"iActiveTabId":[32],"internalRefresh":[32]},[[10,"click","handleWindowClickEvent"],[0,"hukExpandCollapseClickEvent","hukExpandCollapseClickEventListener"],[0,"hukTabChangedEvent","hukTabChangedEventListener"],[9,"resize","resizeListener"]]]]],["huk-text-list",[[1,"huk-text-list",{"items":[1],"label":[1],"underlined":[4],"itemsArray":[32]}]]],["huk-accordion",[[1,"huk-accordion",null,[[0,"hukPanelClick","handleHukPanelClick"]]]]],["huk-bar-graph",[[1,"huk-bar-graph",{"categoryAxisLabel":[1,"category-axis-label"],"categoryAxisOffset":[2,"category-axis-offset"],"categoryLabelSize":[1,"category-label-size"],"categoryTextSize":[1,"category-text-size"],"data":[1],"header":[1],"headerSize":[1,"header-size"],"height":[2],"maxValue":[2,"max-value"],"minValue":[2,"min-value"],"order":[1],"orientation":[1],"padding":[2],"showAxisLabels":[4,"show-axis-labels"],"showticks":[4],"showTransitions":[4,"show-transitions"],"tooltipHorizontalOffset":[2,"tooltip-horizontal-offset"],"tooltipSize":[1,"tooltip-size"],"tooltipVerticalOffset":[2,"tooltip-vertical-offset"],"transitionTime":[2,"transition-time"],"valueAxisLabel":[1,"value-axis-label"],"valueAxisOffset":[2,"value-axis-offset"],"valueLabelSize":[1,"value-label-size"],"valueTextSize":[1,"value-text-size"],"width":[2],"internalRefresh":[32]}]]],["huk-pie-chart",[[1,"huk-pie-chart",{"catName":[1,"cat-name"],"chartHeader":[1,"chart-header"],"details":[1],"headerHeightOffset":[2,"header-height-offset"],"headerWidthOffset":[2,"header-width-offset"],"height":[2],"hideLegend":[4,"hide-legend"],"hidePieText":[4,"hide-pie-text"],"pieChartType":[1,"pie-chart-type"],"showTransitions":[4,"show-transitions"],"strokeColor":[1,"stroke-color"],"tooltipOffsetX":[2,"tooltip-offset-x"],"tooltipOffsetY":[2,"tooltip-offset-y"],"transitionDuration":[2,"transition-duration"],"width":[2]}]]],["huk-radio",[[1,"huk-radio",{"datamissing":[1],"disabled":[1540],"eventinfo":[1],"grouplabel":[1],"horizontal":[4],"labelformat":[1],"netsensitive":[4],"nodisabledtext":[4],"nooptionaltext":[4],"nopadding":[4],"options":[1],"required":[4],"requiredasterisk":[4],"showdatamissing":[4],"value":[1537],"verticalstacked":[4],"radioOptionsArray":[32],"showErrMsg":[32],"setMessageText":[64]},[[8,"hukNetworkEvent","handleNetworkEvent"]]]]],["huk-toast",[[1,"huk-toast",{"closeButtonText":[513,"close-button-text"],"cssClass":[513,"css-class"],"duration":[520],"message":[513],"position":[513],"showCloseButton":[520,"show-close-button"],"displayToast":[64]}]]],["huk-checkbox",[[1,"huk-checkbox",{"altversion":[4],"arialabel":[1],"disabled":[1540],"eventinfo":[1],"label":[1],"labelformat":[1],"netsensitive":[4],"secondaryalt":[4],"size":[1],"value":[1540]},[[8,"hukNetworkEvent","handleNetworkEvent"]]]]],["huk-image",[[0,"huk-image",{"altText":[1,"alt-text"],"height":[1],"source":[1],"width":[1]}]]],["huk-assets_9",[[1,"huk-header",{"headertype":[1],"mobilemenu":[4],"navtitle":[1],"nobreadcrumb":[4],"primarynavalert":[1],"primarynavleft":[1],"primarynavlogolink":[1],"primarynavright":[1],"refresh":[2],"searchfield":[4],"searchicon":[1],"searchplaceholder":[1],"searchresults":[1],"searchresultsmaxheight":[1],"secondarynav":[1025],"showgithub":[4],"fullheader":[32],"internalRefresh":[32],"primaryNavAlert":[32],"primaryNavAlertsArray":[32],"primaryNavLeftArray":[32],"primaryNavLogoLink":[32],"primaryNavRightArray":[32],"screenMin":[32],"secondaryNavArray":[32],"toggleNavOpen":[32],"clearAllAlerts":[64],"loadAlerts":[64],"removeAlerts":[64]},[[9,"resize","checkWindowSize"]]],[1,"huk-side-nav",{"alertsmaxheight":[1],"defaultcollapsed":[4],"nocollapse":[4],"sidenav":[1],"sidenavalert":[1],"sidenavbottom":[1],"sidenavlogolink":[1],"internalRefresh":[32],"navAlert":[32],"navAlertsArray":[32],"screenMin":[32],"toggleMobileNav":[32],"toggleSideNav":[32],"clearAllAlerts":[64],"loadAlerts":[64],"removeAlerts":[64]},[[10,"click","handleWindowClickEvent"],[9,"resize","checkWindowSize"]]],[1,"huk-footer",{"additionallinks":[1],"links":[1],"theme":[1],"type":[513],"footerMarginTop":[32]},[[9,"resize","checkWindowSize"]]],[1,"huk-header-internal",{"fullheader":[4],"primarynavlogolink":[1]},[[9,"resize","checkWindowSize"]]],[1,"huk-search",{"arialabel":[1],"compact":[4],"disabled":[1540],"dropdownwidth":[1],"dropposition":[1],"eventinfo":[1],"excludeuservalue":[4],"helpertext":[1],"helpertextformat":[1],"hukid":[1],"inputwidth":[1],"label":[1],"labelformat":[1],"lefticonclass":[1],"navbarsearch":[4],"netsensitive":[4],"nodescriptionmatch":[4],"nodisabledtext":[4],"nopadding":[4],"placeholder":[1],"resultsmaxheight":[1],"righticonclass":[1],"searchresults":[1],"size":[1],"sortresults":[1],"value":[1537],"expandedSearch":[32],"selectedOptionIndex":[32],"showResults":[32]},[[10,"click","handleWindowClickEvent"],[8,"hukNetworkEvent","handleNetworkEvent"],[9,"resize","getDropdownSize"]]],[1,"huk-version",{"fontsize":[1]}],[17,"huk-button",{"clicktext":[1],"compact":[4],"disabled":[1540],"eventinfo":[1],"hukclass":[1],"hukid":[1],"iconclass":[1025],"netsensitive":[4],"setfocus":[1028],"text":[1025],"type":[1],"showMore":[32],"loadSpinner":[64],"unloadSpinner":[64]},[[8,"hukLoadSpinner","handleLoadSpinner"],[8,"hukNetworkEvent","handleNetworkEvent"],[8,"hukUnloadSpinner","handleUnloadSpinner"]]],[0,"huk-assets",{"altText":[1,"alt-text"],"hukimage":[1]}],[0,"huk-icon",{"disabled":[4],"errormessage":[4],"focusable":[4],"icon":[1],"iconsize":[1],"icontitle":[1],"istoggled":[1028],"label":[1],"stylemods":[1],"toggle":[4]}]]],["huk-popover",[[1,"huk-popover",{"alignment":[1],"buttontext":[1],"disabled":[1540],"eventinfo":[1],"hukclass":[1],"hukid":[1],"icon":[1],"iconcolor":[1],"netsensitive":[4],"nocloseicon":[4],"popoverplacement":[1],"popovertitle":[1],"type":[1],"show":[32]},[[10,"click","handleWindowClickEvent"],[8,"hukClosePopover","handleHukClosePopover"],[8,"hukNetworkEvent","handleNetworkEvent"],[4,"keydown","handleEscape"]]]]],["huk-select",[[1,"huk-select",{"arialabel":[1],"compact":[4],"datamissing":[1],"disabled":[1540],"dropdownwidth":[1],"dropposition":[1],"eventinfo":[1],"gbxunmask":[4],"helpertext":[1],"helpertextformat":[1],"hukid":[1],"inputwidth":[1],"label":[1],"labelformat":[1],"netsensitive":[4],"nodisabledtext":[4],"nohelpertextonerror":[4],"nooptionaltext":[4],"nopadding":[4],"options":[1],"optionsmaxheight":[1],"placeholder":[1],"refresh":[2],"relative":[4],"required":[4],"requiredasterisk":[4],"setfocus":[1028],"showdatamissing":[4],"size":[1],"value":[1537],"displayValue":[32],"focusedOptionIndex":[32],"showIntErrMsg":[32],"showOptions":[32]},[[10,"click","handleWindowClickEvent"],[8,"hukNetworkEvent","handleNetworkEvent"],[9,"resize","getDropdownSize"]]]]],["huk-input-field",[[1,"huk-input-field",{"acceptedcreditcards":[1],"aligntext":[1],"arialabel":[1],"autoheight":[4],"compact":[4],"dataerror":[1],"datamissing":[1],"dateformat":[1],"dateyearprepend":[1],"decimalplaces":[2],"disabled":[1540],"disablevalidation":[4],"eventinfo":[1],"gbxunmask":[4],"helpertext":[1],"helpertextformat":[1],"hukclass":[1],"hukid":[1],"inputwidth":[1],"label":[1],"labelformat":[1],"lefticonclass":[1],"masked":[4],"maxheight":[1],"maxlength":[2],"minlength":[2],"netsensitive":[4],"nodisabledtext":[4],"nohelpertextonerror":[4],"nooptionaltext":[4],"nopadding":[4],"passwordreveal":[4],"pattern":[1],"placeholder":[1],"readonly":[4],"refresh":[2],"required":[4],"requiredasterisk":[4],"revealicon":[4],"righticonclass":[1],"rows":[2],"setfocus":[1028],"showdataerror":[4],"showdatamissing":[4],"size":[1],"value":[1025],"iconViewState":[32],"showIntErrMsg":[32]},[[8,"hukNetworkEvent","handleNetworkEvent"]]]]],["huk-autocomplete_4",[[1,"huk-datepicker",{"arialabel":[1],"backgroundnoclose":[4],"buttons":[4],"cancelbtnclass":[1],"cancelbtntext":[1],"compact":[4],"confirmbtnclass":[1],"confirmbtntext":[1],"dataerror":[1],"datamissing":[1],"dateformat":[1],"defaultfocusdate":[1],"disabled":[1540],"disableddates":[1],"disablevalidation":[4],"dropposition":[1],"enableddates":[1],"eventinfo":[1],"gbxunmask":[4],"helpertext":[1],"helpertextformat":[1],"hukid":[1],"inputwidth":[1],"label":[1],"labelformat":[1],"maxdate":[1],"mindate":[1],"multiselect":[4],"netsensitive":[4],"nodisabledtext":[4],"nohelpertextonerror":[4],"noinputfield":[4],"nomanualentry":[4],"nooptionaltext":[4],"nopadding":[4],"placeholder":[1],"refresh":[2],"relative":[4],"required":[4],"requiredasterisk":[4],"showdataerror":[4],"showdatamissing":[4],"size":[1],"value":[1537],"yearprepend":[1],"dateFound":[32],"datepickerDivWidth":[32],"showIntErrMsg":[32]},[[10,"click","handleWindowClickEvent"],[8,"hukNetworkEvent","handleNetworkEvent"]]],[1,"huk-autocomplete",{"arialabel":[1],"compact":[4],"containsmatch":[4],"dataerror":[1],"datamissing":[1],"disabled":[1540],"disablevalidation":[4],"dropdownwidth":[1],"dropposition":[1],"eventinfo":[1],"freeform":[4],"gbxunmask":[4],"helpertext":[1],"helpertextformat":[1],"hukid":[1],"inputwidth":[1],"label":[1],"labelformat":[1],"lefticonclass":[1],"listdisplay":[2],"matchonblur":[4],"maxlength":[2],"netsensitive":[4],"nodisabledtext":[4],"nohelpertextonerror":[4],"nooptionaltext":[4],"nooptionssort":[4],"nopadding":[4],"noshowalltext":[4],"numcharsearch":[2],"options":[1],"pattern":[1],"placeholder":[1],"refresh":[2],"relative":[4],"required":[4],"requiredasterisk":[4],"righticonclass":[1],"showallclick":[4],"showallindicator":[1],"showdataerror":[4],"showdatamissing":[4],"size":[1],"type":[1],"value":[1537],"optionsArr":[32],"selectedOptionIndex":[32],"showIntErrMsg":[32],"showList":[32],"suggestionList":[32]},[[10,"click","handleWindowClickEvent"],[8,"hukNetworkEvent","handleNetworkEvent"],[9,"resize","getDropdownSize"]]],[1,"huk-multiselect-dropdown",{"arialabel":[1],"compact":[4],"datamissing":[1],"disabled":[1540],"dropdownwidth":[1],"dropposition":[1],"eventinfo":[1],"helpertext":[1],"helpertextformat":[1],"hukid":[1],"inputwidth":[1],"label":[1],"labelformat":[1],"netsensitive":[4],"nodisabledtext":[4],"nohelpertextonerror":[4],"nooptionaltext":[4],"nopadding":[4],"optionslistheight":[1],"placeholder":[1],"refresh":[2],"relative":[4],"required":[4],"requiredasterisk":[4],"selectedcount":[4],"showdatamissing":[4],"size":[1],"sortby":[1],"sortdirection":[1],"value":[1537],"isShown":[32],"optionsUpdated":[32],"showIntErrMsg":[32]},[[10,"click","handleWindowClickEvent"],[8,"hukNetworkEvent","handleNetworkEvent"],[9,"resize","getDropdownSize"]]],[1,"huk-toggle",{"arialabel":[1],"checkmark":[4],"compact":[4],"disabled":[1540],"eventinfo":[1],"grouplabel":[1],"hukid":[1],"labelformat":[1],"netsensitive":[4],"nodisabledtext":[4],"nopadding":[4],"size":[1],"textoff":[1],"texton":[1],"value":[1540]},[[8,"hukNetworkEvent","handleNetworkEvent"]]]]]]'),e));AA();Nb(Mp,SA).catch(n=>console.error(n));
